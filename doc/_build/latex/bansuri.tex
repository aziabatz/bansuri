%% Generated by Sphinx.
\def\sphinxdocclass{report}
\documentclass[letterpaper,10pt,english]{sphinxmanual}
\ifdefined\pdfpxdimen
   \let\sphinxpxdimen\pdfpxdimen\else\newdimen\sphinxpxdimen
\fi \sphinxpxdimen=.75bp\relax
\ifdefined\pdfimageresolution
    \pdfimageresolution= \numexpr \dimexpr1in\relax/\sphinxpxdimen\relax
\fi
\newdimen\sphinxremdimen\sphinxremdimen = 10pt
%% let collapsible pdf bookmarks panel have high depth per default
\PassOptionsToPackage{bookmarksdepth=5}{hyperref}

\PassOptionsToPackage{booktabs}{sphinx}
\PassOptionsToPackage{colorrows}{sphinx}

\PassOptionsToPackage{warn}{textcomp}
\usepackage[utf8]{inputenc}
\ifdefined\DeclareUnicodeCharacter
% support both utf8 and utf8x syntaxes
  \ifdefined\DeclareUnicodeCharacterAsOptional
    \def\sphinxDUC#1{\DeclareUnicodeCharacter{"#1}}
  \else
    \let\sphinxDUC\DeclareUnicodeCharacter
  \fi
  \sphinxDUC{00A0}{\nobreakspace}
  \sphinxDUC{2500}{\sphinxunichar{2500}}
  \sphinxDUC{2502}{\sphinxunichar{2502}}
  \sphinxDUC{2514}{\sphinxunichar{2514}}
  \sphinxDUC{251C}{\sphinxunichar{251C}}
  \sphinxDUC{2572}{\textbackslash}
\fi
\usepackage{cmap}
\usepackage[T1]{fontenc}
\usepackage{amsmath,amssymb,amstext}
\usepackage{babel}



\usepackage{tgtermes}
\usepackage{tgheros}
\renewcommand{\ttdefault}{txtt}



\usepackage[Bjarne]{fncychap}
\usepackage{sphinx}

\fvset{fontsize=auto}
\usepackage{geometry}


% Include hyperref last.
\usepackage{hyperref}
% Fix anchor placement for figures with captions.
\usepackage{hypcap}% it must be loaded after hyperref.
% Set up styles of URL: it should be placed after hyperref.
\urlstyle{same}

\addto\captionsenglish{\renewcommand{\contentsname}{Start Here}}

\usepackage{sphinxmessages}
\setcounter{tocdepth}{1}



\title{Bansuri}
\date{Jan 22, 2026}
\release{1.0}
\author{Bansuri Contributors}
\newcommand{\sphinxlogo}{\vbox{}}
\renewcommand{\releasename}{Release}
\makeindex
\begin{document}

\ifdefined\shorthandoff
  \ifnum\catcode`\=\string=\active\shorthandoff{=}\fi
  \ifnum\catcode`\"=\active\shorthandoff{"}\fi
\fi

\pagestyle{empty}
\sphinxmaketitle
\pagestyle{plain}
\sphinxtableofcontents
\pagestyle{normal}
\phantomsection\label{\detokenize{index::doc}}


\sphinxAtStartPar
\sphinxstylestrong{Task Orchestration \& Management System}

\sphinxAtStartPar
Bansuri is a flexible, easy\sphinxhyphen{}to\sphinxhyphen{}use system for running and monitoring multiple scripts with configurable scheduling, timeouts, retries, and notifications.
\begin{description}
\sphinxlineitem{‚úÖ \sphinxstylestrong{What You Can Do}:}\begin{itemize}
\item {} 
\sphinxAtStartPar
Run shell commands on timers or cron schedules

\item {} 
\sphinxAtStartPar
Retry failed tasks automatically

\item {} 
\sphinxAtStartPar
Monitor task execution with detailed logs

\item {} 
\sphinxAtStartPar
Send alerts on failures

\item {} 
\sphinxAtStartPar
Manage multiple tasks from one configuration file

\end{itemize}

\end{description}

\sphinxAtStartPar
‚ö†Ô∏è \sphinxstylestrong{What‚Äôs Coming}: Task dependencies, user switching, hot\sphinxhyphen{}reload, and more.

\sphinxAtStartPar
See \DUrole{xref}{\DUrole{std}{\DUrole{std-ref}{Feature Status}}} for implementation details.

\sphinxstepscope


\chapter{Quick Start Guide}
\label{\detokenize{quickstart:quick-start-guide}}\label{\detokenize{quickstart::doc}}
\sphinxAtStartPar
Get Bansuri running in 5 minutes.


\section{Prerequisites}
\label{\detokenize{quickstart:prerequisites}}\begin{itemize}
\item {} 
\sphinxAtStartPar
Python 3.8 or higher

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{pip}} package manager

\end{itemize}


\section{Installation}
\label{\detokenize{quickstart:installation}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Clone the repository}
git\PYG{+w}{ }clone\PYG{+w}{ }https://github.com/aziabatz/bansuri.git
\PYG{n+nb}{cd}\PYG{+w}{ }bansuri

\PYG{c+c1}{\PYGZsh{} Install in development mode}
pip\PYG{+w}{ }install\PYG{+w}{ }\PYGZhy{}e\PYG{+w}{ }.

\PYG{c+c1}{\PYGZsh{} Verify installation}
bansuri\PYG{+w}{ }\PYGZhy{}\PYGZhy{}help
\end{sphinxVerbatim}


\section{Your First Task}
\label{\detokenize{quickstart:your-first-task}}
\sphinxAtStartPar
\sphinxstylestrong{Step 1: Create} \sphinxcode{\sphinxupquote{scripts.json}}:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}version\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}1.0\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}scripts\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{p}{[}
\PYG{+w}{    }\PYG{p}{\PYGZob{}}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}hello\PYGZhy{}world\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}echo \PYGZsq{}Hello from Bansuri!\PYGZsq{}\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}timer\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}30\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}description\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Prints a greeting every 30 seconds\PYGZdq{}}
\PYG{+w}{    }\PYG{p}{\PYGZcb{}}
\PYG{+w}{  }\PYG{p}{]}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstylestrong{Step 2: Run Bansuri}:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
bansuri
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstylestrong{Expected Output}:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
[2026\PYGZhy{}01\PYGZhy{}19 10:00:00] [MASTER] ========================================
[2026\PYGZhy{}01\PYGZhy{}19 10:00:00] [MASTER] BANSURI ORCHESTRATOR STARTED
[2026\PYGZhy{}01\PYGZhy{}19 10:00:00] [MASTER] ========================================
[2026\PYGZhy{}01\PYGZhy{}19 10:00:00] [hello\PYGZhy{}world] Runner started.
[2026\PYGZhy{}01\PYGZhy{}19 10:00:01] [hello\PYGZhy{}world] Timer configured: running every 30s (30s)
[2026\PYGZhy{}01\PYGZhy{}19 10:00:01] [hello\PYGZhy{}world] Executing shell command: echo \PYGZsq{}Hello from Bansuri!\PYGZsq{}
[2026\PYGZhy{}01\PYGZhy{}19 10:00:01] [hello\PYGZhy{}world] Process finished with code 0
[2026\PYGZhy{}01\PYGZhy{}19 10:00:31] [hello\PYGZhy{}world] Executing shell command: echo \PYGZsq{}Hello from Bansuri!\PYGZsq{}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstylestrong{Step 3: Stop} with \sphinxcode{\sphinxupquote{Ctrl+C}}


\section{What Just Happened?}
\label{\detokenize{quickstart:what-just-happened}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Bansuri read \sphinxcode{\sphinxupquote{scripts.json}}

\item {} 
\sphinxAtStartPar
Found task \sphinxcode{\sphinxupquote{hello\sphinxhyphen{}world}}

\item {} 
\sphinxAtStartPar
Started a \sphinxcode{\sphinxupquote{TaskRunner}} thread for the task

\item {} 
\sphinxAtStartPar
Task ran immediately, then every 30 seconds

\item {} 
\sphinxAtStartPar
Logs showed each execution

\end{enumerate}


\subsection{Useful Examples}
\label{\detokenize{quickstart:useful-examples}}

\section{Backup Database Every Hour}
\label{\detokenize{quickstart:backup-database-every-hour}}
\sphinxAtStartPar
Add this to your \sphinxcode{\sphinxupquote{scripts.json}}:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}hourly\PYGZhy{}backup\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}pg\PYGZus{}dump mydb | gzip \PYGZgt{} /backups/db\PYGZhy{}\PYGZdl{}(date +\PYGZpc{}Y\PYGZpc{}m\PYGZpc{}d\PYGZus{}\PYGZpc{}H\PYGZpc{}M\PYGZpc{}S).sql.gz\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}timer\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}3600\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}timeout\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}15m\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}on\PYGZhy{}fail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}restart\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}times\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{2}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}working\PYGZhy{}directory\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}/backups\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}description\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Backs up PostgreSQL database hourly\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\section{Run Health Checks Every Minute}
\label{\detokenize{quickstart:run-health-checks-every-minute}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}health\PYGZhy{}check\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}/usr/local/bin/health\PYGZhy{}check.sh\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}timer\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}60\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}timeout\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}30s\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}on\PYGZhy{}fail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}stop\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}stdout\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}/var/log/healthcheck.log\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}stderr\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}combined\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}description\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}System health check every minute\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\section{Data Sync with Retries}
\label{\detokenize{quickstart:data-sync-with-retries}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}sync\PYGZhy{}data\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}rsync \PYGZhy{}av /data/source /data/backup\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}timer\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}300\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}on\PYGZhy{}fail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}restart\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}times\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{3}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}timeout\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}5m\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}notify\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}mail\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}description\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Sync data every 5 minutes with retry\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\section{Complete Beginner Configuration}
\label{\detokenize{quickstart:complete-beginner-configuration}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}version\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}1.0\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}notify\PYGZus{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}mail \PYGZhy{}s \PYGZsq{}[Bansuri] Task Failed\PYGZsq{} admin@example.com\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}scripts\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{p}{[}
\PYG{+w}{    }\PYG{p}{\PYGZob{}}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}task\PYGZhy{}1\PYGZhy{}quick\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}echo \PYGZsq{}Quick task\PYGZsq{}\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}timer\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}60\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}description\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Runs every minute\PYGZdq{}}
\PYG{+w}{    }\PYG{p}{\PYGZcb{},}
\PYG{+w}{    }\PYG{p}{\PYGZob{}}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}task\PYGZhy{}2\PYGZhy{}medium\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}/opt/scripts/process.sh\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}timer\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}300\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}timeout\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}2m\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}on\PYGZhy{}fail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}restart\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}times\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{2}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}description\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Runs every 5 minutes with retry\PYGZdq{}}
\PYG{+w}{    }\PYG{p}{\PYGZcb{},}
\PYG{+w}{    }\PYG{p}{\PYGZob{}}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}task\PYGZhy{}3\PYGZhy{}critical\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}/opt/scripts/critical\PYGZhy{}job.sh\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}timer\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}3600\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}timeout\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}30m\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}on\PYGZhy{}fail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}restart\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}times\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{3}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}notify\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}mail\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}stdout\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}/var/log/critical.log\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}stderr\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}combined\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}description\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Critical hourly job with monitoring\PYGZdq{}}
\PYG{+w}{    }\PYG{p}{\PYGZcb{}}
\PYG{+w}{  }\PYG{p}{]}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\subsection{Common Tasks}
\label{\detokenize{quickstart:common-tasks}}
\sphinxAtStartPar
\sphinxstylestrong{Run once and exit:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}one\PYGZhy{}time\PYGZhy{}task\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}setup.sh\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstylestrong{Run periodically:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}periodic\PYGZhy{}task\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}cleanup.sh\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}timer\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}86400\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstylestrong{Run with timeout:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}timeout\PYGZhy{}task\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}long\PYGZhy{}running.sh\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}timeout\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}30m\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstylestrong{Run with retries:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}retry\PYGZhy{}task\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}api\PYGZhy{}call.py\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}on\PYGZhy{}fail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}restart\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}times\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{3}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstylestrong{Run with logging:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}logged\PYGZhy{}task\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}data\PYGZhy{}process.sh\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}stdout\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}/var/log/process.log\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}stderr\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}combined\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstylestrong{Run with notifications:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}monitored\PYGZhy{}task\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}critical\PYGZhy{}check.sh\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}notify\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}mail\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}on\PYGZhy{}fail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}restart\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}times\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{2}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\subsection{Verify Your Configuration}
\label{\detokenize{quickstart:verify-your-configuration}}
\sphinxAtStartPar
Before running:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Validate JSON}
python\PYG{+w}{ }\PYGZhy{}m\PYG{+w}{ }json.tool\PYG{+w}{ }scripts.json

\PYG{c+c1}{\PYGZsh{} Validate with Bansuri}
python\PYG{+w}{ }\PYGZhy{}c\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}}
\PYG{l+s+s2}{from bansuri.base.config\PYGZus{}manager import BansuriConfig}
\PYG{l+s+s2}{config = BansuriConfig.load\PYGZus{}from\PYGZus{}file(\PYGZsq{}scripts.json\PYGZsq{})}
\PYG{l+s+s2}{print(\PYGZsq{}\(\checkmark\) Configuration valid\PYGZsq{})}
\PYG{l+s+s2}{for script in config.scripts:}
\PYG{l+s+s2}{    print(f\PYGZsq{}  \PYGZhy{} \PYGZob{}script.name\PYGZcb{}\PYGZsq{})}
\PYG{l+s+s2}{\PYGZdq{}}
\end{sphinxVerbatim}


\subsection{Next Steps}
\label{\detokenize{quickstart:next-steps}}\begin{itemize}
\item {} 
\sphinxAtStartPar
üìñ Read {\hyperref[\detokenize{configuration::doc}]{\sphinxcrossref{\DUrole{doc}{Configuration}}}} for advanced options

\item {} 
\sphinxAtStartPar
üîî Set up {\hyperref[\detokenize{notifications::doc}]{\sphinxcrossref{\DUrole{doc}{Notifications}}}} for alerts

\item {} 
\sphinxAtStartPar
üöÄ Deploy to production with {\hyperref[\detokenize{deployment::doc}]{\sphinxcrossref{\DUrole{doc}{Deployment Guide}}}}

\item {} 
\sphinxAtStartPar
üêõ See \DUrole{xref}{\DUrole{std}{\DUrole{std-doc}{troubleshooting\sphinxhyphen{}detailed}}} if issues arise

\item {} 
\sphinxAtStartPar
üß© Create custom tasks with {\hyperref[\detokenize{custom-tasks::doc}]{\sphinxcrossref{\DUrole{doc}{Creating Custom Tasks}}}}

\end{itemize}


\subsection{Tips and Tricks}
\label{\detokenize{quickstart:tips-and-tricks}}
\sphinxAtStartPar
\sphinxstylestrong{Use environment variables:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nb}{export}\PYG{+w}{ }\PYG{n+nv}{BACKUP\PYGZus{}DIR}\PYG{o}{=}/backups
bansuri
\end{sphinxVerbatim}

\sphinxAtStartPar
Then in scripts.json:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}pg\PYGZus{}dump mydb \PYGZgt{} \PYGZdl{}BACKUP\PYGZus{}DIR/db.sql\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstylestrong{Use cron\sphinxhyphen{}like schedules as timer:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}timer\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}3600\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
Conversion guide:
\sphinxhyphen{} \sphinxcode{\sphinxupquote{*/5 * * * *}} (every 5 minutes) \(\rightarrow\) \sphinxcode{\sphinxupquote{"timer": "300"}}
\sphinxhyphen{} \sphinxcode{\sphinxupquote{0 * * * *}} (hourly) \(\rightarrow\) \sphinxcode{\sphinxupquote{"timer": "3600"}}
\sphinxhyphen{} \sphinxcode{\sphinxupquote{0 0 * * *}} (daily) \(\rightarrow\) \sphinxcode{\sphinxupquote{"timer": "86400"}}

\sphinxAtStartPar
\sphinxstylestrong{Test commands before adding:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Run the command manually first}
/usr/local/bin/my\PYGZhy{}script.sh
\PYG{n+nb}{echo}\PYG{+w}{ }\PYG{n+nv}{\PYGZdl{}?}\PYG{+w}{  }\PYG{c+c1}{\PYGZsh{} Check exit code}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstylestrong{Redirect verbose output:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}./verbose\PYGZhy{}script.sh 2\PYGZgt{}/dev/null\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}stdout\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}/var/log/task.log\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\subsection{Troubleshooting}
\label{\detokenize{quickstart:troubleshooting}}
\sphinxAtStartPar
Task not running?
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Check it‚Äôs in the config: \sphinxcode{\sphinxupquote{grep "name" scripts.json}}

\item {} 
\sphinxAtStartPar
Verify the command exists: \sphinxcode{\sphinxupquote{which command\_name}}

\item {} 
\sphinxAtStartPar
Test manually: \sphinxcode{\sphinxupquote{/path/to/command}}

\item {} 
\sphinxAtStartPar
Check permissions: \sphinxcode{\sphinxupquote{ls \sphinxhyphen{}la /path/to/command}}

\end{enumerate}

\sphinxAtStartPar
See \DUrole{xref}{\DUrole{std}{\DUrole{std-doc}{troubleshooting\sphinxhyphen{}detailed}}} for more help.


\subsection{Getting Support}
\label{\detokenize{quickstart:getting-support}}\begin{itemize}
\item {} 
\sphinxAtStartPar
üìö Full documentation: See the other RST files

\item {} 
\sphinxAtStartPar
üêõ Report issues: GitHub Issues

\item {} 
\sphinxAtStartPar
üí¨ Discuss: GitHub Discussions

\end{itemize}

\sphinxAtStartPar
Happy orchestrating! üéâ

\sphinxstepscope


\chapter{Installation}
\label{\detokenize{installation:installation}}\label{\detokenize{installation::doc}}
\sphinxAtStartPar
Install Bansuri and its optional dependencies.


\section{Requirements}
\label{\detokenize{installation:requirements}}\begin{itemize}
\item {} 
\sphinxAtStartPar
Python 3.8 or higher

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{pip}} package manager

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{git}} (for source installation)

\end{itemize}


\subsection{Installation Methods}
\label{\detokenize{installation:installation-methods}}

\section{From Source (Recommended for Development)}
\label{\detokenize{installation:from-source-recommended-for-development}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
git\PYG{+w}{ }clone\PYG{+w}{ }https://github.com/aziabatz/bansuri.git
\PYG{n+nb}{cd}\PYG{+w}{ }bansuri
pip\PYG{+w}{ }install\PYG{+w}{ }\PYGZhy{}e\PYG{+w}{ }.
\end{sphinxVerbatim}

\sphinxAtStartPar
Verify installation:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
bansuri\PYG{+w}{ }\PYGZhy{}\PYGZhy{}help
\end{sphinxVerbatim}


\subsection{Optional Dependencies}
\label{\detokenize{installation:optional-dependencies}}
\sphinxAtStartPar
\sphinxstylestrong{For Cron Scheduling}:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
pip\PYG{+w}{ }install\PYG{+w}{ }croniter
\end{sphinxVerbatim}

\sphinxAtStartPar
This enables \sphinxcode{\sphinxupquote{schedule\sphinxhyphen{}cron}} field in tasks.

\sphinxAtStartPar
\sphinxstylestrong{For Email Notifications}:

\sphinxAtStartPar
You need system \sphinxcode{\sphinxupquote{mail}} command (usually pre\sphinxhyphen{}installed):

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Ubuntu/Debian}
sudo\PYG{+w}{ }apt\PYGZhy{}get\PYG{+w}{ }install\PYG{+w}{ }mailutils

\PYG{c+c1}{\PYGZsh{} CentOS/RHEL}
sudo\PYG{+w}{ }yum\PYG{+w}{ }install\PYG{+w}{ }mailx

\PYG{c+c1}{\PYGZsh{} macOS}
\PYG{c+c1}{\PYGZsh{} Usually pre\PYGZhy{}installed}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstylestrong{For Python Script Tasks} (Future):

\sphinxAtStartPar
Install any dependencies your Python scripts need.


\subsection{Verify Installation}
\label{\detokenize{installation:verify-installation}}
\sphinxAtStartPar
Check that Bansuri is installed correctly:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
python\PYG{+w}{ }\PYGZhy{}c\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}import bansuri; print(bansuri.\PYGZus{}\PYGZus{}version\PYGZus{}\PYGZus{})\PYGZdq{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
Expected output:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
0.1.0
\end{sphinxVerbatim}


\subsection{Next Steps}
\label{\detokenize{installation:next-steps}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Read the {\hyperref[\detokenize{quickstart::doc}]{\sphinxcrossref{\DUrole{doc}{Quick Start Guide}}}} guide

\item {} 
\sphinxAtStartPar
Check {\hyperref[\detokenize{configuration::doc}]{\sphinxcrossref{\DUrole{doc}{Configuration}}}} documentation

\item {} 
\sphinxAtStartPar
Explore {\hyperref[\detokenize{reference::doc}]{\sphinxcrossref{\DUrole{doc}{Reference}}}} for all options

\item {} 
\sphinxAtStartPar
See {\hyperref[\detokenize{troubleshooting::doc}]{\sphinxcrossref{\DUrole{doc}{Troubleshooting}}}} if issues arise

\end{enumerate}

\sphinxstepscope


\chapter{Concepts and Terminology}
\label{\detokenize{concepts:concepts-and-terminology}}\label{\detokenize{concepts::doc}}

\section{Core Components}
\label{\detokenize{concepts:core-components}}

\subsection{Task}
\label{\detokenize{concepts:task}}
\sphinxAtStartPar
A \sphinxstylestrong{task} is a unit of work to be executed by Bansuri.

\sphinxAtStartPar
A task consists of:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Name}: Unique identifier

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Command}: What to execute (shell command)

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Schedule}: When/how often to run (timer, cron, or once)

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Policies}: Timeout, retries, notifications

\end{itemize}

\sphinxAtStartPar
Example:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}backup\PYGZhy{}database\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}pg\PYGZus{}dump production | gzip \PYGZgt{} backup.sql.gz\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}timer\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}86400\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}timeout\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}1h\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}on\PYGZhy{}fail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}restart\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}notify\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}mail\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\subsection{Orchestrator}
\label{\detokenize{concepts:orchestrator}}
\sphinxAtStartPar
The \sphinxstylestrong{Orchestrator} is the main coordinator. It:
\begin{itemize}
\item {} 
\sphinxAtStartPar
Reads configuration from \sphinxcode{\sphinxupquote{scripts.json}}

\item {} 
\sphinxAtStartPar
Creates \sphinxcode{\sphinxupquote{TaskRunner}} for each task

\item {} 
\sphinxAtStartPar
Monitors all tasks continuously

\item {} 
\sphinxAtStartPar
Handles graceful shutdown (SIGTERM/SIGINT)

\item {} 
\sphinxAtStartPar
Syncs configuration changes

\end{itemize}

\sphinxAtStartPar
The Orchestrator runs continuously in a single process.


\subsection{TaskRunner}
\label{\detokenize{concepts:taskrunner}}
\sphinxAtStartPar
Each task gets its own \sphinxstylestrong{TaskRunner} that:
\begin{itemize}
\item {} 
\sphinxAtStartPar
Runs in a dedicated thread

\item {} 
\sphinxAtStartPar
Spawns the task process

\item {} 
\sphinxAtStartPar
Manages timeouts and retries

\item {} 
\sphinxAtStartPar
Captures and redirects output

\item {} 
\sphinxAtStartPar
Sends notifications on failure

\end{itemize}


\section{Execution Models}
\label{\detokenize{concepts:execution-models}}
\sphinxAtStartPar
Bansuri supports different scheduling modes:

\sphinxAtStartPar
\sphinxstylestrong{One\sphinxhyphen{}Time Execution}

\sphinxAtStartPar
Task runs once at startup:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}initialize\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}python init.py\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstylestrong{Timer\sphinxhyphen{}Based} (Fixed Interval)

\sphinxAtStartPar
Task runs repeatedly at fixed intervals:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}monitor\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}python health\PYGZus{}check.py\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}timer\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}300\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
Supported formats:
\sphinxhyphen{} \sphinxcode{\sphinxupquote{"60"}} \(\rightarrow\) every 60 seconds
\sphinxhyphen{} \sphinxcode{\sphinxupquote{"5m"}} \(\rightarrow\) every 5 minutes
\sphinxhyphen{} \sphinxcode{\sphinxupquote{"1h"}} \(\rightarrow\) every hour

\sphinxAtStartPar
\sphinxstylestrong{Cron\sphinxhyphen{}Based} (Scheduled Times)

\sphinxAtStartPar
Task runs on cron schedule (requires \sphinxcode{\sphinxupquote{croniter}}):

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}daily\PYGZhy{}backup\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}bash backup.sh\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}schedule\PYGZhy{}cron\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}0 2 * * *\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
Cron format: \sphinxcode{\sphinxupquote{"minute hour day month weekday"}}


\section{Execution Control}
\label{\detokenize{concepts:execution-control}}
\sphinxAtStartPar
\sphinxstylestrong{Failure Handling}

\sphinxAtStartPar
When a task fails (non\sphinxhyphen{}zero exit code):
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{on\sphinxhyphen{}fail: "stop"}} \(\rightarrow\) Stop and don‚Äôt retry (default)

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{on\sphinxhyphen{}fail: "restart"}} \(\rightarrow\) Retry immediately

\end{itemize}

\sphinxAtStartPar
Combined with \sphinxcode{\sphinxupquote{times}} for max retries:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}api\PYGZhy{}sync\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}python sync.py\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}on\PYGZhy{}fail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}restart\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}times\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{3}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstylestrong{Timeout Management}

\sphinxAtStartPar
Kill task if it runs too long:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}long\PYGZhy{}task\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}bash slow.sh\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}timeout\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}30m\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
Supported formats:
\sphinxhyphen{} \sphinxcode{\sphinxupquote{"30s"}} \(\rightarrow\) 30 seconds
\sphinxhyphen{} \sphinxcode{\sphinxupquote{"5m"}} \(\rightarrow\) 5 minutes
\sphinxhyphen{} \sphinxcode{\sphinxupquote{"1h"}} \(\rightarrow\) 1 hour

\sphinxAtStartPar
\sphinxstylestrong{Success Definition}

\sphinxAtStartPar
By default, only exit code 0 is success. Override with:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}exit\PYGZhy{}handler\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}bash script.sh\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}success\PYGZhy{}codes\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{+w}{ }\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{+w}{ }\PYG{l+m+mi}{2}\PYG{p}{]}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
Exit codes 1 and 2 won‚Äôt trigger retries or notifications.


\section{Task Lifecycle}
\label{\detokenize{concepts:task-lifecycle}}
\sphinxAtStartPar
A task goes through these states:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{PENDING} \(\rightarrow\) Task queued, waiting to start

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{RUNNING} \(\rightarrow\) Process is executing

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{TIMEOUT} \(\rightarrow\) Task exceeded timeout limit

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{SUCCESS} \(\rightarrow\) Task completed with success code

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{FAILED} \(\rightarrow\) Task exited with non\sphinxhyphen{}success code

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{RESTARTING} \(\rightarrow\) Task failed, retrying (if \sphinxcode{\sphinxupquote{on\sphinxhyphen{}fail: restart}})

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{STOPPED} \(\rightarrow\) Task stopped by user or reached max attempts

\end{enumerate}


\section{Configuration Synchronization}
\label{\detokenize{concepts:configuration-synchronization}}
\sphinxAtStartPar
The Orchestrator monitors \sphinxcode{\sphinxupquote{scripts.json}} for changes:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{New tasks} \(\rightarrow\) Automatically started

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Deleted tasks} \(\rightarrow\) Automatically stopped

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Modified tasks} \(\rightarrow\) ‚ùå NOT YET (requires hot\sphinxhyphen{}reload)

\end{itemize}

\sphinxAtStartPar
See \DUrole{xref}{\DUrole{std}{\DUrole{std-doc}{../NOT\_IMPLEMENTED.md}}} for feature status.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}monitor\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}check.sh\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}timer\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}300\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstylestrong{Cron\sphinxhyphen{}based Execution (NOT IMPLEMENTED)}

\sphinxAtStartPar
Task runs on cron schedule:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}nightly\PYGZhy{}job\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}backup.sh\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}schedule\PYGZhy{}cron\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}0 2 * * *\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\section{Configuration Hierarchy}
\label{\detokenize{concepts:configuration-hierarchy}}
\sphinxAtStartPar
\sphinxstylestrong{Global Configuration} (scripts.json root level)

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}version\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}1.0\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}notify\PYGZus{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}mail ...\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstylestrong{Per\sphinxhyphen{}task Configuration} (scripts{[}{]}.* level)

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}task\PYGZhy{}name\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}...\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}timer\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}300\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}timeout\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}30s\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}on\PYGZhy{}fail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}restart\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{err}{.}\PYG{err}{.}\PYG{err}{.}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\section{Task Lifecycle}
\label{\detokenize{concepts:id1}}
\sphinxAtStartPar
A task progresses through these states:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{PENDING}: Registered in config, waiting to run

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{RUNNING}: Process spawned with active PID

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{SUCCESS}: Completed with success code (default: 0)

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{FAILED}: Exited with non\sphinxhyphen{}zero code

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{TIMEOUT}: Killed due to exceeding timeout

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{RESTARTING}: Retrying after failure (if on\sphinxhyphen{}fail=restart)

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{STOPPED}: Removed from config or shutdown

\end{enumerate}


\subsection{State Transitions}
\label{\detokenize{concepts:state-transitions}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
PENDING
  ‚Üì
RUNNING \(\rightarrow\) SUCCESS (end)
  ‚Üì
FAILED
  ‚Üì
on\PYGZhy{}fail=stop? \(\rightarrow\) STOPPED (end)
      ‚îÇ
      ‚Üì on\PYGZhy{}fail=restart?
RESTARTING
  ‚Üì
(back to RUNNING)
\end{sphinxVerbatim}


\section{Failure Policies}
\label{\detokenize{concepts:failure-policies}}
\sphinxAtStartPar
\sphinxstylestrong{on\sphinxhyphen{}fail: ‚Äústop‚Äù} (default)

\sphinxAtStartPar
Task stops immediately on failure:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
RUNNING \(\rightarrow\) FAILED \(\rightarrow\) STOPPED
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstylestrong{on\sphinxhyphen{}fail: ‚Äúrestart‚Äù}

\sphinxAtStartPar
Task restarts up to \sphinxcode{\sphinxupquote{times}} attempts:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
RUNNING \(\rightarrow\) FAILED \(\rightarrow\) RESTARTING \(\rightarrow\) RUNNING \(\rightarrow\) FAILED \(\rightarrow\) ... (up to \PYGZsq{}times\PYGZsq{})

If max attempts reached:
FAILED \(\rightarrow\) STOPPED
\end{sphinxVerbatim}

\sphinxAtStartPar
Example:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}on\PYGZhy{}fail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}restart\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}times\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{3}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\subsection{Timeout Behavior}
\label{\detokenize{concepts:timeout-behavior}}
\sphinxAtStartPar
When timeout is exceeded:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
RUNNING \(\rightarrow\) (timeout reached) \(\rightarrow\) FAILED \(\rightarrow\) (apply on\PYGZhy{}fail policy)
\end{sphinxVerbatim}

\sphinxAtStartPar
The process is forcefully terminated with SIGKILL.


\subsection{Success Codes}
\label{\detokenize{concepts:success-codes}}
\sphinxAtStartPar
By default, only exit code \sphinxcode{\sphinxupquote{0}} is considered success. You can define custom success codes:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}success\PYGZhy{}codes\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{+w}{ }\PYG{l+m+mi}{2}\PYG{p}{,}\PYG{+w}{ }\PYG{l+m+mi}{137}\PYG{p}{]}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
Exit codes not in this list are considered failures.


\section{Output Management}
\label{\detokenize{concepts:output-management}}
\sphinxAtStartPar
Bansuri redirects task output according to configuration:

\sphinxAtStartPar
\sphinxstylestrong{No redirection}

\sphinxAtStartPar
Output goes to console (Bansuri‚Äôs stdout/stderr):

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
{\color{red}\bfseries{}\textasciigrave{}\textasciigrave{}}{\color{red}\bfseries{}\textasciigrave{}}

\sphinxAtStartPar
\sphinxstylestrong{File redirection}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}stdout\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}/var/log/task.log\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}stderr\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}combined\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstylestrong{Separate files}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}stdout\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}/var/log/task.out\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}stderr\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}/var/log/task.err\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstylestrong{Combined output}

\sphinxAtStartPar
Both stdout and stderr go to the same file:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}stderr\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}combined\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\section{Resource Management}
\label{\detokenize{concepts:resource-management}}
\sphinxAtStartPar
\sphinxstylestrong{Working Directory}

\sphinxAtStartPar
Tasks execute in the specified directory. Affects:
\begin{itemize}
\item {} 
\sphinxAtStartPar
Relative paths in commands

\item {} 
\sphinxAtStartPar
File operations

\item {} 
\sphinxAtStartPar
Working directory of child processes

\end{itemize}

\sphinxAtStartPar
\sphinxstylestrong{Timeout}

\sphinxAtStartPar
Maximum time a task can run. Process killed if exceeded.

\sphinxAtStartPar
Units:
\sphinxhyphen{} Seconds: \sphinxcode{\sphinxupquote{"30"}} or \sphinxcode{\sphinxupquote{30}}
\sphinxhyphen{} Seconds suffix: \sphinxcode{\sphinxupquote{"30s"}}
\sphinxhyphen{} Minutes: \sphinxcode{\sphinxupquote{"5m"}} = 300 seconds
\sphinxhyphen{} Hours: \sphinxcode{\sphinxupquote{"2h"}} = 7200 seconds

\sphinxAtStartPar
\sphinxstylestrong{Process Groups}

\sphinxAtStartPar
Each task runs in its own process group. Allows:
\begin{itemize}
\item {} 
\sphinxAtStartPar
Killing task and all children

\item {} 
\sphinxAtStartPar
Resource isolation

\item {} 
\sphinxAtStartPar
Clean shutdown

\end{itemize}


\section{Notification System}
\label{\detokenize{concepts:notification-system}}
\sphinxAtStartPar
Triggered on task failure when \sphinxcode{\sphinxupquote{notify: "mail"}} is set.

\sphinxAtStartPar
Components:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{FailureInfo}: Data structure with failure details

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Notifier}: Abstract base class for notification handlers

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{CommandNotifier}: Sends notification via shell command

\end{itemize}

\sphinxAtStartPar
Failure notification includes:
\begin{itemize}
\item {} 
\sphinxAtStartPar
Task name and command

\item {} 
\sphinxAtStartPar
Return code and exit details

\item {} 
\sphinxAtStartPar
Attempt number

\item {} 
\sphinxAtStartPar
Timestamp

\item {} 
\sphinxAtStartPar
Stdout/stderr output

\item {} 
\sphinxAtStartPar
Task description

\end{itemize}

\sphinxAtStartPar
See {\hyperref[\detokenize{notifications::doc}]{\sphinxcrossref{\DUrole{doc}{Notifications}}}} for details.


\section{Abstract Tasks}
\label{\detokenize{concepts:abstract-tasks}}
\sphinxAtStartPar
Custom task implementations implement the \sphinxcode{\sphinxupquote{AbstractTask}} interface:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{class}\PYG{+w}{ }\PYG{n+nc}{AbstractTask}\PYG{p}{(}\PYG{n}{ABC}\PYG{p}{)}\PYG{p}{:}
    \PYG{n+nd}{@abstractmethod}
    \PYG{k}{def}\PYG{+w}{ }\PYG{n+nf}{run}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{)} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZgt{}} \PYG{n+nb}{int}\PYG{p}{:}
\PYG{+w}{        }\PYG{l+s+sd}{\PYGZdq{}\PYGZdq{}\PYGZdq{}Execute task, return exit code\PYGZdq{}\PYGZdq{}\PYGZdq{}}
        \PYG{k}{pass}

    \PYG{n+nd}{@abstractmethod}
    \PYG{k}{def}\PYG{+w}{ }\PYG{n+nf}{stop}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{)} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZgt{}} \PYG{k+kc}{None}\PYG{p}{:}
\PYG{+w}{        }\PYG{l+s+sd}{\PYGZdq{}\PYGZdq{}\PYGZdq{}Stop task if running\PYGZdq{}\PYGZdq{}\PYGZdq{}}
        \PYG{k}{pass}
\end{sphinxVerbatim}

\sphinxAtStartPar
Benefits:
\begin{itemize}
\item {} 
\sphinxAtStartPar
Complex business logic

\item {} 
\sphinxAtStartPar
Native Python integration

\item {} 
\sphinxAtStartPar
Stateful operations

\item {} 
\sphinxAtStartPar
Resource cleanup

\end{itemize}

\sphinxAtStartPar
See {\hyperref[\detokenize{custom-tasks::doc}]{\sphinxcrossref{\DUrole{doc}{Creating Custom Tasks}}}} for examples.


\section{Configuration Management}
\label{\detokenize{concepts:configuration-management}}
\sphinxAtStartPar
\sphinxstylestrong{Loading}

\sphinxAtStartPar
Configuration loaded from \sphinxcode{\sphinxupquote{scripts.json}} when Bansuri starts:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Parse JSON file

\item {} 
\sphinxAtStartPar
Validate schema

\item {} 
\sphinxAtStartPar
Create \sphinxcode{\sphinxupquote{BansuriConfig}} object

\item {} 
\sphinxAtStartPar
Spawn \sphinxcode{\sphinxupquote{TaskRunner}} for each script

\end{enumerate}

\sphinxAtStartPar
\sphinxstylestrong{Validation}

\sphinxAtStartPar
Each script is validated for:
\begin{itemize}
\item {} 
\sphinxAtStartPar
Required fields (name, command)

\item {} 
\sphinxAtStartPar
Valid field types

\item {} 
\sphinxAtStartPar
Sensible values

\item {} 
\sphinxAtStartPar
Scheduling requirements

\end{itemize}

\sphinxAtStartPar
\sphinxstylestrong{Synchronization}

\sphinxAtStartPar
Bansuri periodically syncs config changes:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Detect added tasks \(\rightarrow\) spawn \sphinxcode{\sphinxupquote{TaskRunner}}

\item {} 
\sphinxAtStartPar
Detect removed tasks \(\rightarrow\) stop and remove \sphinxcode{\sphinxupquote{TaskRunner}}

\item {} 
\sphinxAtStartPar
Detect modified tasks \(\rightarrow\) restart \sphinxcode{\sphinxupquote{TaskRunner}}

\end{enumerate}


\section{Performance Concepts}
\label{\detokenize{concepts:performance-concepts}}
\sphinxAtStartPar
\sphinxstylestrong{Concurrency}

\sphinxAtStartPar
Each task runs in its own thread. Multiple tasks execute concurrently.

\sphinxAtStartPar
\sphinxstylestrong{I/O\sphinxhyphen{}bound tasks} (network, disk):
\sphinxhyphen{} Can run many concurrently
\sphinxhyphen{} Limited by system I/O, not CPU

\sphinxAtStartPar
\sphinxstylestrong{CPU\sphinxhyphen{}bound tasks} (computation):
\sphinxhyphen{} Limited by CPU cores
\sphinxhyphen{} Too many concurrent = resource contention

\sphinxAtStartPar
\sphinxstylestrong{Resource Limits}

\sphinxAtStartPar
Monitor and limit:
\begin{itemize}
\item {} 
\sphinxAtStartPar
Memory: Each process and total system

\item {} 
\sphinxAtStartPar
CPU: Per\sphinxhyphen{}process or total

\item {} 
\sphinxAtStartPar
File descriptors

\item {} 
\sphinxAtStartPar
Disk I/O

\end{itemize}


\section{Observability Concepts}
\label{\detokenize{concepts:observability-concepts}}
\sphinxAtStartPar
\sphinxstylestrong{Logging}

\sphinxAtStartPar
Structured logging from:
\begin{itemize}
\item {} 
\sphinxAtStartPar
Orchestrator: Task lifecycle events

\item {} 
\sphinxAtStartPar
TaskRunner: Execution events

\item {} 
\sphinxAtStartPar
Tasks: Custom logs

\end{itemize}

\sphinxAtStartPar
\sphinxstylestrong{Monitoring}

\sphinxAtStartPar
Observable metrics:
\begin{itemize}
\item {} 
\sphinxAtStartPar
Task execution count

\item {} 
\sphinxAtStartPar
Success/failure rates

\item {} 
\sphinxAtStartPar
Execution time

\item {} 
\sphinxAtStartPar
Resource usage

\item {} 
\sphinxAtStartPar
Timeout occurrences

\end{itemize}

\sphinxAtStartPar
\sphinxstylestrong{Alerting}

\sphinxAtStartPar
Based on:
\begin{itemize}
\item {} 
\sphinxAtStartPar
Task failures

\item {} 
\sphinxAtStartPar
Notification triggers

\item {} 
\sphinxAtStartPar
System resource issues

\item {} 
\sphinxAtStartPar
Configuration changes

\end{itemize}


\section{Security Concepts}
\label{\detokenize{concepts:security-concepts}}
\sphinxAtStartPar
\sphinxstylestrong{Process Isolation}

\sphinxAtStartPar
Each task runs in separate process with:
\begin{itemize}
\item {} 
\sphinxAtStartPar
Independent memory space

\item {} 
\sphinxAtStartPar
Own file descriptors

\item {} 
\sphinxAtStartPar
Own process group

\end{itemize}

\sphinxAtStartPar
\sphinxstylestrong{User Context}

\sphinxAtStartPar
(NOT IMPLEMENTED) Tasks can run as specific users with:
\begin{itemize}
\item {} 
\sphinxAtStartPar
Reduced privileges

\item {} 
\sphinxAtStartPar
Different permissions

\item {} 
\sphinxAtStartPar
Isolated home directories

\end{itemize}

\sphinxAtStartPar
\sphinxstylestrong{Working Directory}

\sphinxAtStartPar
Controls where tasks execute and what files they access.

\sphinxAtStartPar
\sphinxstylestrong{Permissions}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Script execute permissions

\item {} 
\sphinxAtStartPar
Log directory write permissions

\item {} 
\sphinxAtStartPar
Output file creation permissions

\end{itemize}


\section{High Availability Concepts}
\label{\detokenize{concepts:high-availability-concepts}}
\sphinxAtStartPar
\sphinxstylestrong{Restart Policies}

\sphinxAtStartPar
Automatic recovery from failures:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{on\sphinxhyphen{}fail: "restart"}}

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{times: N}} attempts

\item {} 
\sphinxAtStartPar
Configurable retry behavior

\end{itemize}

\sphinxAtStartPar
\sphinxstylestrong{Health Checks}

\sphinxAtStartPar
Monitor task execution:
\begin{itemize}
\item {} 
\sphinxAtStartPar
Track exit codes

\item {} 
\sphinxAtStartPar
Detect hangs

\item {} 
\sphinxAtStartPar
Measure latency

\end{itemize}

\sphinxAtStartPar
\sphinxstylestrong{Graceful Shutdown}

\sphinxAtStartPar
Clean termination:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Send SIGTERM to tasks

\item {} 
\sphinxAtStartPar
Wait for graceful shutdown

\item {} 
\sphinxAtStartPar
Force SIGKILL if needed

\item {} 
\sphinxAtStartPar
Flush logs and state

\end{enumerate}


\section{Scaling Concepts}
\label{\detokenize{concepts:scaling-concepts}}
\sphinxAtStartPar
\sphinxstylestrong{Single Instance}

\sphinxAtStartPar
Suitable for:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\textless{} 100 tasks

\item {} 
\sphinxAtStartPar
\textless{} 1000 executions/minute

\item {} 
\sphinxAtStartPar
Single machine

\item {} 
\sphinxAtStartPar
Non\sphinxhyphen{}critical workloads

\end{itemize}

\sphinxAtStartPar
\sphinxstylestrong{Multiple Instances}

\sphinxAtStartPar
For larger deployments:
\begin{itemize}
\item {} 
\sphinxAtStartPar
Partition tasks across instances

\item {} 
\sphinxAtStartPar
Share configuration via version control

\item {} 
\sphinxAtStartPar
Centralize logging

\item {} 
\sphinxAtStartPar
Coordinate via monitoring

\end{itemize}

\sphinxAtStartPar
\sphinxstylestrong{Containerized Deployment}

\sphinxAtStartPar
Run in:
\begin{itemize}
\item {} 
\sphinxAtStartPar
Docker containers

\item {} 
\sphinxAtStartPar
Kubernetes pods

\item {} 
\sphinxAtStartPar
Cloud container services

\end{itemize}

\sphinxAtStartPar
Benefits:
\begin{itemize}
\item {} 
\sphinxAtStartPar
Reproducible environment

\item {} 
\sphinxAtStartPar
Easy scaling

\item {} 
\sphinxAtStartPar
Simplified deployment

\item {} 
\sphinxAtStartPar
Resource limits

\end{itemize}


\section{Related Concepts}
\label{\detokenize{concepts:related-concepts}}
\sphinxAtStartPar
\sphinxstylestrong{Cron} (traditional Linux scheduling)

\sphinxAtStartPar
Similar to Bansuri‚Äôs timer\sphinxhyphen{}based execution but:
\begin{itemize}
\item {} 
\sphinxAtStartPar
System\sphinxhyphen{}level scheduler

\item {} 
\sphinxAtStartPar
Separate from process lifecycle

\item {} 
\sphinxAtStartPar
Limited monitoring

\end{itemize}

\sphinxAtStartPar
Bansuri advantages:
\begin{itemize}
\item {} 
\sphinxAtStartPar
Process\sphinxhyphen{}level control

\item {} 
\sphinxAtStartPar
In\sphinxhyphen{}memory state

\item {} 
\sphinxAtStartPar
Unified logging

\item {} 
\sphinxAtStartPar
Flexible retry logic

\end{itemize}

\sphinxAtStartPar
\sphinxstylestrong{Process Managers} (supervisord, systemd)

\sphinxAtStartPar
Similar in goal but different scope:
\begin{itemize}
\item {} 
\sphinxAtStartPar
Process managers: Keep services running

\item {} 
\sphinxAtStartPar
Bansuri: Orchestrate task execution

\end{itemize}

\sphinxAtStartPar
Bansuri can run under process managers for higher availability.


\section{Terminology Reference}
\label{\detokenize{concepts:terminology-reference}}

\begin{savenotes}\sphinxattablestart
\sphinxthistablewithglobalstyle
\centering
\begin{tabulary}{\linewidth}[t]{TT}
\sphinxtoprule
\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxstyletheadfamily \sphinxAtStartPar
Term
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxstyletheadfamily \sphinxAtStartPar
Definition
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxmidrule
\sphinxtableatstartofbodyhook\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
Orchestrator
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
Central coordinator managing all tasks
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxhline\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
TaskRunner
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
Thread\sphinxhyphen{}based executor for a single task
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxhline\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
Task
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
Unit of work to be executed
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxhline\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
Script
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
Configuration entry for a task
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxhline\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
Configuration
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
JSON file defining tasks and behavior
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxhline\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
Exit Code
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
Process return value (0=success, non\sphinxhyphen{}zero=failure)
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxhline\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
Timeout
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
Maximum execution time for a task
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxhline\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
Failure Policy
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
What to do when task fails (stop or restart)
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxhline\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
Notification
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
Alert sent when task fails
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxhline\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
FailureInfo
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
Data structure with task failure details
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxhline\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
Process Group
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
Group of processes from same task
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxhline\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
Working Directory
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
Directory where task executes
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxhline\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
Success Codes
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
Exit codes considered successful
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxbottomrule
\end{tabulary}
\sphinxtableafterendhook\par
\sphinxattableend\end{savenotes}

\sphinxstepscope


\chapter{System Architecture}
\label{\detokenize{architecture:system-architecture}}\label{\detokenize{architecture::doc}}
\sphinxAtStartPar
Bansuri is designed as a modular task orchestration system. It separates the concerns of task definition, scheduling, and execution monitoring.


\section{High\sphinxhyphen{}Level Overview}
\label{\detokenize{architecture:high-level-overview}}
\sphinxAtStartPar
The system consists of two main components:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Orchestrator}: Reads the configuration from \sphinxcode{\sphinxupquote{scripts.json}}, manages the lifecycle of all tasks, synchronizes configuration changes, and coordinates task execution.

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{TaskRunner}: Encapsulates the logic for spawning a subprocess, managing a control thread, capturing output, and handling lifecycle events (start, stop, timeout, restarts).

\end{enumerate}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
Bansuri uses Python‚Äôs \sphinxcode{\sphinxupquote{subprocess}} module for process isolation, ensuring that a crashing script does not bring down the main orchestrator. Each task runs in its own thread and process.
\end{sphinxadmonition}


\section{Execution Models}
\label{\detokenize{architecture:execution-models}}
\sphinxAtStartPar
Bansuri supports multiple execution models through \sphinxcode{\sphinxupquote{TaskRunner}}:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Simple Execution}: Run the task once and stop.

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Timer\sphinxhyphen{}based Execution}: Run the task at fixed intervals (configured via \sphinxcode{\sphinxupquote{timer}} parameter).

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Cron\sphinxhyphen{}based Execution}: Run the task on a schedule (configured via \sphinxcode{\sphinxupquote{schedule\sphinxhyphen{}cron}}). NOT IMPLEMENTED.

\end{itemize}


\section{Task Lifecycle}
\label{\detokenize{architecture:task-lifecycle}}
\sphinxAtStartPar
A task goes through several states during its execution:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{PENDING}: The task is about to start (in the execution loop).

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{RUNNING}: The process has been spawned and has an active PID.

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{COMPLETED}: The process exited with a success code (default: 0).

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{FAILED}: The process exited with a non\sphinxhyphen{}zero return code or was killed.

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{TIMED\_OUT}: The TaskRunner killed the process because it exceeded its \sphinxcode{\sphinxupquote{timeout}} limit.

\end{itemize}


\section{Error Handling and Restart Policies}
\label{\detokenize{architecture:error-handling-and-restart-policies}}
\sphinxAtStartPar
If a task fails, the \sphinxstylestrong{on\sphinxhyphen{}fail} policy kicks in:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{‚Äústop‚Äù}: Task execution stops immediately on failure.

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{‚Äúrestart‚Äù}: Task is restarted up to \sphinxcode{\sphinxupquote{times}} attempts with a brief delay between attempts.

\end{itemize}

\sphinxAtStartPar
The configuration in {\hyperref[\detokenize{configuration::doc}]{\sphinxcrossref{\DUrole{doc}{Configuration}}}} determines the behavior on task failure.


\section{Output Management}
\label{\detokenize{architecture:output-management}}
\sphinxAtStartPar
Bansuri redirects stdout and stderr according to the task configuration:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{‚Äúcombined‚Äù} (default): Both stdout and stderr are written to the same file.

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{File path}: Stdout/stderr are redirected to the specified file.

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{None}: Output is not captured.

\end{itemize}


\section{Extensibility}
\label{\detokenize{architecture:extensibility}}
\sphinxAtStartPar
Bansuri is built to be extended. You can create custom task implementations by inheriting from the \sphinxcode{\sphinxupquote{AbstractTask}} class and implementing the \sphinxcode{\sphinxupquote{run()}} and \sphinxcode{\sphinxupquote{stop()}} methods. Tasks implementing this interface can be loaded and executed by Bansuri with the \sphinxcode{\sphinxupquote{no\sphinxhyphen{}interface}} configuration option.


\section{Notification System}
\label{\detokenize{architecture:notification-system}}
\sphinxAtStartPar
Bansuri includes a notification system that can alert you when tasks fail. The system is extensible and supports:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Command\sphinxhyphen{}based notifications}: Execute any shell command to send alerts (email, Slack, webhooks, etc.)

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Custom notifiers}: Extend the \sphinxcode{\sphinxupquote{Notifier}} base class to implement custom notification handlers

\end{itemize}

\sphinxAtStartPar
For detailed information, see {\hyperref[\detokenize{notifications::doc}]{\sphinxcrossref{\DUrole{doc}{Notifications}}}}.

\sphinxstepscope


\chapter{Configuration}
\label{\detokenize{configuration:configuration}}\label{\detokenize{configuration::doc}}
\sphinxAtStartPar
How to configure tasks in Bansuri.


\section{Configuration File}
\label{\detokenize{configuration:configuration-file}}
\sphinxAtStartPar
Bansuri uses \sphinxstylestrong{JSON} configuration files to define tasks.

\sphinxAtStartPar
\sphinxstylestrong{Default Location}: \sphinxcode{\sphinxupquote{scripts.json}} in current directory

\sphinxAtStartPar
\sphinxstylestrong{Example}:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}version\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}1.0\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}notify\PYGZus{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}mail \PYGZhy{}s \PYGZsq{}Alert\PYGZsq{} admin@example.com\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}scripts\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{p}{[}
\PYG{+w}{    }\PYG{p}{\PYGZob{}}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}task\PYGZhy{}1\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}python script.py\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}timer\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}300\PYGZdq{}}
\PYG{+w}{    }\PYG{p}{\PYGZcb{}}
\PYG{+w}{  }\PYG{p}{]}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\subsection{Minimal Task}
\label{\detokenize{configuration:minimal-task}}
\sphinxAtStartPar
Only \sphinxstylestrong{name} and \sphinxstylestrong{command} are required:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}version\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}1.0\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}scripts\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{p}{[}
\PYG{+w}{    }\PYG{p}{\PYGZob{}}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}my\PYGZhy{}task\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}bash do\PYGZus{}something.sh\PYGZdq{}}
\PYG{+w}{    }\PYG{p}{\PYGZcb{}}
\PYG{+w}{  }\PYG{p}{]}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\section{Task Parameters Reference}
\label{\detokenize{configuration:task-parameters-reference}}
\sphinxAtStartPar
\sphinxstylestrong{Scheduling} (pick one):

\sphinxAtStartPar
\sphinxstylestrong{Execution Control}:

\sphinxAtStartPar
\sphinxstylestrong{Output \& Logs}:


\begin{savenotes}\sphinxattablestart
\sphinxthistablewithglobalstyle
\centering
\begin{tabulary}{\linewidth}[t]{TTT}
\sphinxtoprule
\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxstyletheadfamily \sphinxAtStartPar
Parameter
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxstyletheadfamily \sphinxAtStartPar
Example
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxstyletheadfamily \sphinxAtStartPar
Description
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxmidrule
\sphinxtableatstartofbodyhook\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{stdout}}
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"task.log"}}
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
File to save stdout
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxhline\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{stderr}}
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"combined"}}
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
File for stderr or ‚Äúcombined‚Äù (default: combined)
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxhline\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{working\sphinxhyphen{}directory}}
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"/app/scripts"}}
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
Directory to run command in
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxhline\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{description}}
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"Daily backup"}}
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
Human\sphinxhyphen{}readable description
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxbottomrule
\end{tabulary}
\sphinxtableafterendhook\par
\sphinxattableend\end{savenotes}

\sphinxAtStartPar
\sphinxstylestrong{Advanced} (not yet implemented):


\begin{savenotes}\sphinxattablestart
\sphinxthistablewithglobalstyle
\centering
\begin{tabulary}{\linewidth}[t]{TTT}
\sphinxtoprule
\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxstyletheadfamily \sphinxAtStartPar
Parameter
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxstyletheadfamily \sphinxAtStartPar
Example
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxstyletheadfamily \sphinxAtStartPar
Description
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxmidrule
\sphinxtableatstartofbodyhook\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{depends\sphinxhyphen{}on}}
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{{[}"task\sphinxhyphen{}1"{]}}}
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
‚ùå Run after other tasks complete
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxhline\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{user}}
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"postgres"}}
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
‚ùå Run as different user
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxhline\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{priority}}
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{10}}
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
‚ùå Process priority (nice value)
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxhline\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{environment\sphinxhyphen{}file}}
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"/etc/env.json"}}
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
‚ùå Load environment variables from file
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxbottomrule
\end{tabulary}
\sphinxtableafterendhook\par
\sphinxattableend\end{savenotes}


\subsection{Time Format Examples}
\label{\detokenize{configuration:time-format-examples}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}timer\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}30\PYGZdq{}}\PYG{p}{,}\PYG{+w}{      }\PYG{c+c1}{// Every 30 seconds}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}timer\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}5m\PYGZdq{}}\PYG{p}{,}\PYG{+w}{      }\PYG{c+c1}{// Every 5 minutes}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}timer\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}1h\PYGZdq{}}\PYG{p}{,}\PYG{+w}{      }\PYG{c+c1}{// Every hour}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}timeout\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}60s\PYGZdq{}}\PYG{p}{,}\PYG{+w}{   }\PYG{c+c1}{// Timeout after 60 seconds}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}timeout\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}30m\PYGZdq{}}\PYG{p}{,}\PYG{+w}{   }\PYG{c+c1}{// Timeout after 30 minutes}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}schedule\PYGZhy{}cron\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}*/5 * * * *\PYGZdq{}}\PYG{+w}{   }\PYG{c+c1}{// Every 5 minutes (cron)}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\subsection{Complete Example}
\label{\detokenize{configuration:complete-example}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}version\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}1.0\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}notify\PYGZus{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}mail \PYGZhy{}s \PYGZsq{}Bansuri: \PYGZob{}task\PYGZcb{}\PYGZsq{} admin@example.com\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}scripts\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{p}{[}
\PYG{+w}{    }\PYG{p}{\PYGZob{}}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}database\PYGZhy{}backup\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}pg\PYGZus{}dump mydb | gzip \PYGZgt{} backup.sql.gz\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}working\PYGZhy{}directory\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}/backups\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}timer\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}86400\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}timeout\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}1h\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}times\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{2}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}on\PYGZhy{}fail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}restart\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}stdout\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}backup.log\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}stderr\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}combined\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}notify\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}mail\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}success\PYGZhy{}codes\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{],}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}description\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Daily PostgreSQL backup\PYGZdq{}}
\PYG{+w}{    }\PYG{p}{\PYGZcb{}}
\PYG{+w}{  }\PYG{p}{]}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
See {\hyperref[\detokenize{reference::doc}]{\sphinxcrossref{\DUrole{doc}{Reference}}}} for more examples and {\hyperref[\detokenize{advanced-config::doc}]{\sphinxcrossref{\DUrole{doc}{Advanced Configuration}}}} for complex setups.

\sphinxstepscope


\chapter{Reference}
\label{\detokenize{reference:reference}}\label{\detokenize{reference::doc}}
\sphinxAtStartPar
Complete reference for configuration and command\sphinxhyphen{}line usage.


\section{Quick Configuration Examples}
\label{\detokenize{reference:quick-configuration-examples}}

\subsection{Minimal Task}
\label{\detokenize{reference:minimal-task}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}version\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}1.0\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}scripts\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{p}{[}
\PYG{+w}{    }\PYG{p}{\PYGZob{}}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}my\PYGZhy{}task\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}echo \PYGZsq{}hello\PYGZsq{}\PYGZdq{}}
\PYG{+w}{    }\PYG{p}{\PYGZcb{}}
\PYG{+w}{  }\PYG{p}{]}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstylestrong{Result}: Task runs once at startup.

\sphinxAtStartPar
‚Äî


\subsection{Timer\sphinxhyphen{}Based Task (Every 5 Minutes)}
\label{\detokenize{reference:timer-based-task-every-5-minutes}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}monitor\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}python monitor.py\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}timer\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}300\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
‚Äî


\subsection{Cron\sphinxhyphen{}Scheduled Task (Daily at 2 AM)}
\label{\detokenize{reference:cron-scheduled-task-daily-at-2-am}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}backup\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}bash backup.sh\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}schedule\PYGZhy{}cron\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}0 2 * * *\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstylestrong{Requirements}: \sphinxcode{\sphinxupquote{pip install croniter}}

\sphinxAtStartPar
‚Äî


\subsection{Task with Retry Logic}
\label{\detokenize{reference:task-with-retry-logic}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}api\PYGZhy{}call\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}curl \PYGZhy{}f https://api.example.com/sync\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}timer\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}3600\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}timeout\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}30s\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}on\PYGZhy{}fail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}restart\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}times\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{3}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}success\PYGZhy{}codes\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstylestrong{Behavior}: Runs hourly, retries 3 times on failure, kills if \textgreater{} 30s.

\sphinxAtStartPar
‚Äî


\subsection{Complete Task Example}
\label{\detokenize{reference:complete-task-example}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}version\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}1.0\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}notify\PYGZus{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}mail \PYGZhy{}s \PYGZsq{}Alert: \PYGZob{}task\PYGZcb{}\PYGZsq{} admin@example.com\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}scripts\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{p}{[}
\PYG{+w}{    }\PYG{p}{\PYGZob{}}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}database\PYGZhy{}maintenance\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}python /app/maintenance.py\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}working\PYGZhy{}directory\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}/app\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}timer\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}86400\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}timeout\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}2h\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}times\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{2}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}on\PYGZhy{}fail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}restart\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}stdout\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}/var/log/maintenance.log\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}stderr\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}combined\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}notify\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}mail\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}success\PYGZhy{}codes\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{],}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}description\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Daily database maintenance\PYGZdq{}}
\PYG{+w}{    }\PYG{p}{\PYGZcb{}}
\PYG{+w}{  }\PYG{p}{]}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\section{Parameter Reference}
\label{\detokenize{reference:parameter-reference}}

\subsection{Required Parameters}
\label{\detokenize{reference:required-parameters}}

\begin{savenotes}\sphinxattablestart
\sphinxthistablewithglobalstyle
\centering
\begin{tabulary}{\linewidth}[t]{TT}
\sphinxtoprule
\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxstyletheadfamily \sphinxAtStartPar
Parameter
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxstyletheadfamily \sphinxAtStartPar
Description
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxmidrule
\sphinxtableatstartofbodyhook\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{version}}
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
Config version (usually ‚Äú1.0‚Äù)
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxhline\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{scripts}}
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
Array of task definitions
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxhline\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{name}} (per\sphinxhyphen{}task)
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
Unique task identifier
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxhline\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{command}}
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
Command or script to execute
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxbottomrule
\end{tabulary}
\sphinxtableafterendhook\par
\sphinxattableend\end{savenotes}


\subsection{Optional Scheduling}
\label{\detokenize{reference:optional-scheduling}}

\begin{savenotes}\sphinxattablestart
\sphinxthistablewithglobalstyle
\centering
\begin{tabulary}{\linewidth}[t]{TT}
\sphinxtoprule
\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxstyletheadfamily \sphinxAtStartPar
Parameter
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxstyletheadfamily \sphinxAtStartPar
Description
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxmidrule
\sphinxtableatstartofbodyhook\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{timer}}
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
Interval in seconds (e.g., ‚Äú300‚Äù, ‚Äú5m‚Äù)
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxhline\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{schedule\sphinxhyphen{}cron}}
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
Cron expression (e.g., ‚Äú0 2 * * {\color{red}\bfseries{}*}‚Äù)
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxbottomrule
\end{tabulary}
\sphinxtableafterendhook\par
\sphinxattableend\end{savenotes}

\sphinxAtStartPar
\sphinxstylestrong{Note}: Pick ONE scheduling method. If none specified, runs once at startup.


\subsection{Optional Execution Control}
\label{\detokenize{reference:optional-execution-control}}

\begin{savenotes}\sphinxattablestart
\sphinxthistablewithglobalstyle
\centering
\begin{tabulary}{\linewidth}[t]{TT}
\sphinxtoprule
\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxstyletheadfamily \sphinxAtStartPar
Parameter
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxstyletheadfamily \sphinxAtStartPar
Default        Description
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxmidrule
\sphinxtableatstartofbodyhook\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{timeout}}
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
None           Max execution time (e.g., ‚Äú5m‚Äù)
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxhline\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{on\sphinxhyphen{}fail}}
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
‚Äústop‚Äù         Behavior: ‚Äústop‚Äù or ‚Äúrestart‚Äù
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxhline\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{times}}
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
1              Max attempts
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxhline\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{success\sphinxhyphen{}codes}}
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
{[}0{]}            Acceptable exit codes (array)
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxbottomrule
\end{tabulary}
\sphinxtableafterendhook\par
\sphinxattableend\end{savenotes}


\subsection{Optional Output}
\label{\detokenize{reference:optional-output}}

\begin{savenotes}\sphinxattablestart
\sphinxthistablewithglobalstyle
\centering
\begin{tabulary}{\linewidth}[t]{TT}
\sphinxtoprule
\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxstyletheadfamily \sphinxAtStartPar
Parameter
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxstyletheadfamily \sphinxAtStartPar
Default        Description
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxmidrule
\sphinxtableatstartofbodyhook\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{stdout}}
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
None           File to save stdout
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxhline\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{stderr}}
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
‚Äúcombined‚Äù     File for stderr or ‚Äúcombined‚Äù
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxhline\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{working\sphinxhyphen{}directory}}
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
None           Directory to run command in
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxhline\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{description}}
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
‚Äú‚Äù             Human\sphinxhyphen{}readable description
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxbottomrule
\end{tabulary}
\sphinxtableafterendhook\par
\sphinxattableend\end{savenotes}


\section{Time Format Reference}
\label{\detokenize{reference:time-format-reference}}
\sphinxAtStartPar
All time\sphinxhyphen{}based parameters support flexible formats:


\begin{savenotes}\sphinxattablestart
\sphinxthistablewithglobalstyle
\centering
\begin{tabulary}{\linewidth}[t]{TT}
\sphinxtoprule
\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxstyletheadfamily \sphinxAtStartPar
Format
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxstyletheadfamily \sphinxAtStartPar
Means
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxmidrule
\sphinxtableatstartofbodyhook\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
‚Äú30‚Äù
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
30 seconds
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxhline\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
‚Äú30s‚Äù
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
30 seconds
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxhline\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
‚Äú5m‚Äù
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
5 minutes (= 300 seconds)
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxhline\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
‚Äú1h‚Äù
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
1 hour (= 3600 seconds)
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxhline\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
‚Äú86400‚Äù
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
1 day in seconds
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxbottomrule
\end{tabulary}
\sphinxtableafterendhook\par
\sphinxattableend\end{savenotes}


\subsection{Common Intervals}
\label{\detokenize{reference:common-intervals}}

\begin{savenotes}\sphinxattablestart
\sphinxthistablewithglobalstyle
\centering
\begin{tabulary}{\linewidth}[t]{TTT}
\sphinxtoprule
\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxstyletheadfamily \sphinxAtStartPar
Interval
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxstyletheadfamily \sphinxAtStartPar
Timer Value
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxstyletheadfamily \sphinxAtStartPar
Alternative Formats
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxmidrule
\sphinxtableatstartofbodyhook\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
Every 30 seconds
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
‚Äú30‚Äù
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
‚Äú30s‚Äù
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxhline\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
Every minute
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
‚Äú60‚Äù
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
‚Äú1m‚Äù
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxhline\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
Every 5 minutes
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
‚Äú300‚Äù
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
‚Äú5m‚Äù
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxhline\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
Every hour
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
‚Äú3600‚Äù
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
‚Äú1h‚Äù
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxhline\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
Every day
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
‚Äú86400‚Äù
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
‚Äú24h‚Äù
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxbottomrule
\end{tabulary}
\sphinxtableafterendhook\par
\sphinxattableend\end{savenotes}


\section{Command\sphinxhyphen{}Line Reference}
\label{\detokenize{reference:command-line-reference}}

\subsection{Start Bansuri}
\label{\detokenize{reference:start-bansuri}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Use default scripts.json}
bansuri

\PYG{c+c1}{\PYGZsh{} Use custom config file}
bansuri\PYG{+w}{ }\PYGZhy{}\PYGZhy{}config\PYG{+w}{ }/path/to/config.json

\PYG{c+c1}{\PYGZsh{} Show help}
bansuri\PYG{+w}{ }\PYGZhy{}\PYGZhy{}help
\end{sphinxVerbatim}


\subsection{Validation}
\label{\detokenize{reference:validation}}
\sphinxAtStartPar
Check if config file is valid JSON:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
python\PYG{+w}{ }\PYGZhy{}m\PYG{+w}{ }json.tool\PYG{+w}{ }scripts.json
\end{sphinxVerbatim}

\sphinxAtStartPar
Quick Validation Script:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
python\PYG{+w}{ }\PYGZhy{}c\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}}
\PYG{l+s+s2}{from bansuri.base.config\PYGZus{}manager import BansuriConfig}
\PYG{l+s+s2}{try:}
\PYG{l+s+s2}{    config = BansuriConfig.load\PYGZus{}from\PYGZus{}file(\PYGZsq{}scripts.json\PYGZsq{})}
\PYG{l+s+s2}{    print(\PYGZsq{}‚úÖ Configuration is valid\PYGZsq{})}
\PYG{l+s+s2}{    for task in config.scripts:}
\PYG{l+s+s2}{        print(f\PYGZsq{}   \PYGZhy{} \PYGZob{}task.name\PYGZcb{}\PYGZsq{})}
\PYG{l+s+s2}{except Exception as e:}
\PYG{l+s+s2}{    print(f\PYGZsq{}‚ùå Error: \PYGZob{}e\PYGZcb{}\PYGZsq{})}
\PYG{l+s+s2}{\PYGZdq{}}
\end{sphinxVerbatim}


\subsection{Testing Commands}
\label{\detokenize{reference:testing-commands}}
\sphinxAtStartPar
Before adding to Bansuri, test your command:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Test shell command}
bash\PYG{+w}{ }\PYGZhy{}x\PYG{+w}{ }/path/to/script.sh

\PYG{c+c1}{\PYGZsh{} Check Python syntax}
python\PYG{+w}{ }\PYGZhy{}m\PYG{+w}{ }py\PYGZus{}compile\PYG{+w}{ }my\PYGZus{}script.py

\PYG{c+c1}{\PYGZsh{} Run with timeout}
timeout\PYG{+w}{ }30s\PYG{+w}{ }python\PYG{+w}{ }my\PYGZus{}script.py
\end{sphinxVerbatim}


\section{Common Mistakes}
\label{\detokenize{reference:common-mistakes}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Missing croniter library}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
ERROR: \PYGZsq{}croniter\PYGZsq{} library is missing
\end{sphinxVerbatim}

\sphinxAtStartPar
Fix:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
pip\PYG{+w}{ }install\PYG{+w}{ }croniter
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Invalid JSON}

\sphinxAtStartPar
Symptom: Task doesn‚Äôt start, no error message

\sphinxAtStartPar
Fix:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
python\PYG{+w}{ }\PYGZhy{}m\PYG{+w}{ }json.tool\PYG{+w}{ }scripts.json
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Command not found}

\sphinxAtStartPar
Symptom: Exit code 127

\sphinxAtStartPar
Fix: Use absolute path to script

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}/usr/local/bin/my\PYGZus{}script.sh\PYGZdq{}}
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Permission denied}

\sphinxAtStartPar
Symptom: Exit code 126

\sphinxAtStartPar
Fix: Make script executable

\begin{sphinxVerbatim}[commandchars=\\\{\}]
chmod\PYG{+w}{ }+x\PYG{+w}{ }/path/to/script.sh
\end{sphinxVerbatim}

\end{enumerate}

\sphinxAtStartPar
See {\hyperref[\detokenize{troubleshooting::doc}]{\sphinxcrossref{\DUrole{doc}{Troubleshooting}}}} for more help.


\subsection{View Logs}
\label{\detokenize{reference:view-logs}}
\sphinxAtStartPar
For systemd:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Live logs}
journalctl\PYG{+w}{ }\PYGZhy{}u\PYG{+w}{ }bansuri\PYG{+w}{ }\PYGZhy{}f

\PYG{c+c1}{\PYGZsh{} Last 50 lines}
journalctl\PYG{+w}{ }\PYGZhy{}u\PYG{+w}{ }bansuri\PYG{+w}{ }\PYGZhy{}n\PYG{+w}{ }\PYG{l+m}{50}

\PYG{c+c1}{\PYGZsh{} Since specific time}
journalctl\PYG{+w}{ }\PYGZhy{}u\PYG{+w}{ }bansuri\PYG{+w}{ }\PYGZhy{}\PYGZhy{}since\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}2024\PYGZhy{}01\PYGZhy{}19 10:00:00\PYGZdq{}}

\PYG{c+c1}{\PYGZsh{} Only errors}
journalctl\PYG{+w}{ }\PYGZhy{}u\PYG{+w}{ }bansuri\PYG{+w}{ }\PYGZhy{}p\PYG{+w}{ }err
\end{sphinxVerbatim}

\sphinxAtStartPar
For file logging:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Live logs}
tail\PYG{+w}{ }\PYGZhy{}f\PYG{+w}{ }/var/log/bansuri.log

\PYG{c+c1}{\PYGZsh{} Last 100 lines}
tail\PYG{+w}{ }\PYGZhy{}100\PYG{+w}{ }/var/log/bansuri.log

\PYG{c+c1}{\PYGZsh{} Follow and grep}
tail\PYG{+w}{ }\PYGZhy{}f\PYG{+w}{ }/var/log/bansuri.log\PYG{+w}{ }\PYG{p}{|}\PYG{+w}{ }grep\PYG{+w}{ }FAILED
\end{sphinxVerbatim}


\subsection{System Management}
\label{\detokenize{reference:system-management}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Start}
systemctl\PYG{+w}{ }start\PYG{+w}{ }bansuri

\PYG{c+c1}{\PYGZsh{} Stop}
systemctl\PYG{+w}{ }stop\PYG{+w}{ }bansuri

\PYG{c+c1}{\PYGZsh{} Restart}
systemctl\PYG{+w}{ }restart\PYG{+w}{ }bansuri

\PYG{c+c1}{\PYGZsh{} Status}
systemctl\PYG{+w}{ }status\PYG{+w}{ }bansuri

\PYG{c+c1}{\PYGZsh{} Enable on boot}
systemctl\PYG{+w}{ }\PYG{n+nb}{enable}\PYG{+w}{ }bansuri

\PYG{c+c1}{\PYGZsh{} Disable on boot}
systemctl\PYG{+w}{ }disable\PYG{+w}{ }bansuri
\end{sphinxVerbatim}


\subsection{Validation}
\label{\detokenize{reference:id3}}
\sphinxAtStartPar
Validate configuration syntax:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
python\PYG{+w}{ }\PYGZhy{}m\PYG{+w}{ }json.tool\PYG{+w}{ }scripts.json
\end{sphinxVerbatim}

\sphinxAtStartPar
Validate with Bansuri:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
python\PYG{+w}{ }\PYGZhy{}c\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}}
\PYG{l+s+s2}{from bansuri.base.config\PYGZus{}manager import BansuriConfig}
\PYG{l+s+s2}{try:}
\PYG{l+s+s2}{    config = BansuriConfig.load\PYGZus{}from\PYGZus{}file(\PYGZsq{}scripts.json\PYGZsq{})}
\PYG{l+s+s2}{    print(\PYGZsq{}\(\checkmark\) Valid\PYGZsq{})}
\PYG{l+s+s2}{except Exception as e:}
\PYG{l+s+s2}{    print(f\PYGZsq{}‚úó Error: \PYGZob{}e\PYGZcb{}\PYGZsq{})}
\PYG{l+s+s2}{\PYGZdq{}}
\end{sphinxVerbatim}


\subsection{Testing}
\label{\detokenize{reference:testing}}
\sphinxAtStartPar
Test a command before adding to config:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
bash\PYG{+w}{ }\PYGZhy{}x\PYG{+w}{ }/path/to/script.sh
\end{sphinxVerbatim}

\sphinxAtStartPar
Profile execution time:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nb}{time}\PYG{+w}{ }/path/to/script.sh
\end{sphinxVerbatim}

\sphinxAtStartPar
Monitor in real\sphinxhyphen{}time:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
watch\PYG{+w}{ }\PYGZhy{}n\PYG{+w}{ }\PYG{l+m}{1}\PYG{+w}{ }\PYG{l+s+s1}{\PYGZsq{}ps aux | grep python\PYGZsq{}}
\end{sphinxVerbatim}


\subsection{Environment Variables}
\label{\detokenize{reference:environment-variables}}

\begin{savenotes}\sphinxattablestart
\sphinxthistablewithglobalstyle
\centering
\begin{tabulary}{\linewidth}[t]{TTT}
\sphinxtoprule
\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxstyletheadfamily \sphinxAtStartPar
Variable
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxstyletheadfamily \sphinxAtStartPar
Default
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxstyletheadfamily \sphinxAtStartPar
Description
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxmidrule
\sphinxtableatstartofbodyhook\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
BANSURI\_ENV
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
production
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
Environment (dev/staging/production)
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxhline\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
BANSURI\_LOG\_LEVEL
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
INFO
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
Logging verbosity (DEBUG/INFO/WARNING/ERROR)
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxbottomrule
\end{tabulary}
\sphinxtableafterendhook\par
\sphinxattableend\end{savenotes}

\sphinxAtStartPar
Set before running:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nb}{export}\PYG{+w}{ }\PYG{n+nv}{BANSURI\PYGZus{}LOG\PYGZus{}LEVEL}\PYG{o}{=}DEBUG
bansuri
\end{sphinxVerbatim}


\section{Configuration Examples}
\label{\detokenize{reference:configuration-examples}}

\subsection{Example 1: Simple Health Check}
\label{\detokenize{reference:example-1-simple-health-check}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}version\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}1.0\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}scripts\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{p}{[}
\PYG{+w}{    }\PYG{p}{\PYGZob{}}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}health\PYGZhy{}check\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}curl \PYGZhy{}f https://example.com/health\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}timer\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}60\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}timeout\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}10s\PYGZdq{}}
\PYG{+w}{    }\PYG{p}{\PYGZcb{}}
\PYG{+w}{  }\PYG{p}{]}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\subsection{Example 2: Database Backup with Retry}
\label{\detokenize{reference:example-2-database-backup-with-retry}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}version\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}1.0\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}notify\PYGZus{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}mail \PYGZhy{}s \PYGZsq{}Backup Alert\PYGZsq{} ops@example.com\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}scripts\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{p}{[}
\PYG{+w}{    }\PYG{p}{\PYGZob{}}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}backup\PYGZhy{}db\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}pg\PYGZus{}dump mydb | gzip \PYGZgt{} backup.sql.gz\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}timer\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}86400\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}timeout\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}2h\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}on\PYGZhy{}fail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}restart\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}times\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{3}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}notify\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}mail\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}stdout\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}/var/log/backup.log\PYGZdq{}}
\PYG{+w}{    }\PYG{p}{\PYGZcb{}}
\PYG{+w}{  }\PYG{p}{]}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\subsection{Example 3: Multiple Tasks}
\label{\detokenize{reference:example-3-multiple-tasks}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}version\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}1.0\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}notify\PYGZus{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}mail \PYGZhy{}s \PYGZsq{}[Bansuri]\PYGZsq{} admin@example.com\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}scripts\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{p}{[}
\PYG{+w}{    }\PYG{p}{\PYGZob{}}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}quick\PYGZhy{}task\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}echo \PYGZsq{}Quick\PYGZsq{}\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}timer\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}60\PYGZdq{}}
\PYG{+w}{    }\PYG{p}{\PYGZcb{},}
\PYG{+w}{    }\PYG{p}{\PYGZob{}}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}medium\PYGZhy{}task\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}sh /opt/process.sh\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}timer\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}300\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}timeout\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}2m\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}on\PYGZhy{}fail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}restart\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}times\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{2}
\PYG{+w}{    }\PYG{p}{\PYGZcb{},}
\PYG{+w}{    }\PYG{p}{\PYGZob{}}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}critical\PYGZhy{}task\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}python /opt/critical.py\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}timer\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}3600\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}timeout\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}30m\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}on\PYGZhy{}fail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}restart\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}times\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{3}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}notify\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}mail\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}stdout\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}/var/log/critical.log\PYGZdq{}}
\PYG{+w}{    }\PYG{p}{\PYGZcb{}}
\PYG{+w}{  }\PYG{p}{]}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\section{Exit Codes Reference}
\label{\detokenize{reference:exit-codes-reference}}
\sphinxAtStartPar
Standard Exit Codes:


\begin{savenotes}\sphinxattablestart
\sphinxthistablewithglobalstyle
\centering
\begin{tabulary}{\linewidth}[t]{TT}
\sphinxtoprule
\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxstyletheadfamily \sphinxAtStartPar
Code
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxstyletheadfamily \sphinxAtStartPar
Meaning
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxmidrule
\sphinxtableatstartofbodyhook\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
0
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
Success
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxhline\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
1
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
General error
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxhline\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
2
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
Misuse of shell command
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxhline\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
126
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
Command invoked cannot execute
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxhline\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
127
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
Command not found
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxhline\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
128+N
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
Fatal signal N
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxhline\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
130
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
Terminated (SIGINT/Ctrl+C)
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxhline\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
137
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
Killed (SIGKILL)
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxhline\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
143
\sphinxbeforeendvarwidth
\end{varwidth}%
&\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxAtStartPar
Terminated (SIGTERM)
\sphinxbeforeendvarwidth
\end{varwidth}%
\\
\sphinxbottomrule
\end{tabulary}
\sphinxtableafterendhook\par
\sphinxattableend\end{savenotes}


\section{Testing Patterns}
\label{\detokenize{reference:testing-patterns}}
\sphinxAtStartPar
Test script exit code:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
/path/to/script.sh
\PYG{n+nb}{echo}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Exit code: }\PYG{n+nv}{\PYGZdl{}?}\PYG{l+s+s2}{\PYGZdq{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
Test with different arguments:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
/path/to/script.sh\PYG{+w}{ }arg1\PYG{+w}{ }arg2
\PYG{n+nb}{echo}\PYG{+w}{ }\PYG{n+nv}{\PYGZdl{}?}
\end{sphinxVerbatim}

\sphinxAtStartPar
Test with timeout:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
timeout\PYG{+w}{ }\PYG{l+m}{30}\PYG{+w}{ }/path/to/script.sh
\PYG{n+nb}{echo}\PYG{+w}{ }\PYG{n+nv}{\PYGZdl{}?}
\end{sphinxVerbatim}

\sphinxAtStartPar
Test output redirection:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
/path/to/script.sh\PYG{+w}{ }\PYGZgt{}\PYG{+w}{ }/tmp/out.log\PYG{+w}{ }\PYG{l+m}{2}\PYGZgt{}\PYG{p}{\PYGZam{}}\PYG{l+m}{1}
cat\PYG{+w}{ }/tmp/out.log
\end{sphinxVerbatim}


\section{Debugging Checklist}
\label{\detokenize{reference:debugging-checklist}}
\sphinxAtStartPar
Task not running:
\begin{itemize}
\item {} 
\sphinxAtStartPar
{[} {]} Command is valid: \sphinxcode{\sphinxupquote{which command\_name}}

\item {} 
\sphinxAtStartPar
{[} {]} Script is executable: \sphinxcode{\sphinxupquote{ls \sphinxhyphen{}la /path/to/script}}

\item {} 
\sphinxAtStartPar
{[} {]} Path is absolute in config

\item {} 
\sphinxAtStartPar
{[} {]} Working directory exists: \sphinxcode{\sphinxupquote{ls \sphinxhyphen{}la /path/to/workdir}}

\item {} 
\sphinxAtStartPar
{[} {]} Timer is set (if periodic task)

\end{itemize}

\sphinxAtStartPar
Task failing repeatedly:
\begin{itemize}
\item {} 
\sphinxAtStartPar
{[} {]} Test command manually

\item {} 
\sphinxAtStartPar
{[} {]} Check exit code: \sphinxcode{\sphinxupquote{/path/to/script.sh; echo \$?}}

\item {} 
\sphinxAtStartPar
{[} {]} Check permissions: \sphinxcode{\sphinxupquote{ls \sphinxhyphen{}la /path/to/script}}

\item {} 
\sphinxAtStartPar
{[} {]} Check output: \sphinxcode{\sphinxupquote{tail \sphinxhyphen{}f /var/log/task.log}}

\item {} 
\sphinxAtStartPar
{[} {]} Check dependencies exist

\end{itemize}

\sphinxAtStartPar
Timeout issues:
\begin{itemize}
\item {} 
\sphinxAtStartPar
{[} {]} Measure actual execution: \sphinxcode{\sphinxupquote{time /path/to/script.sh}}

\item {} 
\sphinxAtStartPar
{[} {]} Increase timeout value

\item {} 
\sphinxAtStartPar
{[} {]} Check system resources: \sphinxcode{\sphinxupquote{free \sphinxhyphen{}h}}, \sphinxcode{\sphinxupquote{df \sphinxhyphen{}h}}

\item {} 
\sphinxAtStartPar
{[} {]} Check for blocking operations

\end{itemize}

\sphinxAtStartPar
Notifications not working:
\begin{itemize}
\item {} 
\sphinxAtStartPar
{[} {]} \sphinxcode{\sphinxupquote{notify}} is set to \sphinxcode{\sphinxupquote{"mail"}}

\item {} 
\sphinxAtStartPar
{[} {]} \sphinxcode{\sphinxupquote{notify\_command}} is configured

\item {} 
\sphinxAtStartPar
{[} {]} Test command: \sphinxcode{\sphinxupquote{echo "test" | mail \sphinxhyphen{}s "test" email@example.com}}

\item {} 
\sphinxAtStartPar
{[} {]} Check network connectivity

\item {} 
\sphinxAtStartPar
{[} {]} Check Bansuri logs

\end{itemize}


\section{Performance Tuning Checklist}
\label{\detokenize{reference:performance-tuning-checklist}}
\sphinxAtStartPar
Memory usage high:
\begin{itemize}
\item {} 
\sphinxAtStartPar
{[} {]} Redirect task output to files

\item {} 
\sphinxAtStartPar
{[} {]} Reduce number of concurrent tasks

\item {} 
\sphinxAtStartPar
{[} {]} Monitor: \sphinxcode{\sphinxupquote{ps aux | grep python}}

\end{itemize}

\sphinxAtStartPar
CPU usage high:
\begin{itemize}
\item {} 
\sphinxAtStartPar
{[} {]} Increase timer intervals

\item {} 
\sphinxAtStartPar
{[} {]} Check for infinite loops

\item {} 
\sphinxAtStartPar
{[} {]} Profile: \sphinxcode{\sphinxupquote{python \sphinxhyphen{}m cProfile}}

\end{itemize}

\sphinxAtStartPar
Tasks running slow:
\begin{itemize}
\item {} 
\sphinxAtStartPar
{[} {]} Check system load: \sphinxcode{\sphinxupquote{uptime}}

\item {} 
\sphinxAtStartPar
{[} {]} Monitor I/O: \sphinxcode{\sphinxupquote{iotop}}

\item {} 
\sphinxAtStartPar
{[} {]} Check network: \sphinxcode{\sphinxupquote{netstat \sphinxhyphen{}s}}

\item {} 
\sphinxAtStartPar
{[} {]} Profile execution: \sphinxcode{\sphinxupquote{time}} command

\end{itemize}


\section{Common Commands Cheat Sheet}
\label{\detokenize{reference:common-commands-cheat-sheet}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} View configuration}
cat\PYG{+w}{ }scripts.json\PYG{+w}{ }\PYG{p}{|}\PYG{+w}{ }python\PYG{+w}{ }\PYGZhy{}m\PYG{+w}{ }json.tool

\PYG{c+c1}{\PYGZsh{} Validate configuration}
python\PYG{+w}{ }\PYGZhy{}c\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}from bansuri.base.config\PYGZus{}manager import BansuriConfig; BansuriConfig.load\PYGZus{}from\PYGZus{}file(\PYGZsq{}scripts.json\PYGZsq{})\PYGZdq{}}

\PYG{c+c1}{\PYGZsh{} Find Bansuri process}
pgrep\PYG{+w}{ }\PYGZhy{}f\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}python \PYGZhy{}m bansuri\PYGZdq{}}

\PYG{c+c1}{\PYGZsh{} Kill Bansuri}
pkill\PYG{+w}{ }\PYGZhy{}f\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}python \PYGZhy{}m bansuri\PYGZdq{}}

\PYG{c+c1}{\PYGZsh{} Check system resources}
free\PYG{+w}{ }\PYGZhy{}h\PYG{+w}{ }\PYG{o}{\PYGZam{}\PYGZam{}}\PYG{+w}{ }df\PYG{+w}{ }\PYGZhy{}h\PYG{+w}{ }\PYG{o}{\PYGZam{}\PYGZam{}}\PYG{+w}{ }uptime

\PYG{c+c1}{\PYGZsh{} Monitor process}
watch\PYG{+w}{ }\PYGZhy{}n\PYG{+w}{ }\PYG{l+m}{1}\PYG{+w}{ }\PYG{l+s+s1}{\PYGZsq{}ps aux | grep bansuri\PYGZsq{}}

\PYG{c+c1}{\PYGZsh{} View recent logs}
tail\PYG{+w}{ }\PYGZhy{}50\PYG{+w}{ }/var/log/bansuri.log

\PYG{c+c1}{\PYGZsh{} Search logs}
grep\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}ERROR\PYGZdq{}}\PYG{+w}{ }/var/log/bansuri.log

\PYG{c+c1}{\PYGZsh{} Count task executions}
grep\PYG{+w}{ }\PYGZhy{}c\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}started\PYGZbs{}|completed\PYGZdq{}}\PYG{+w}{ }/var/log/bansuri.log
\end{sphinxVerbatim}


\subsection{Useful Aliases}
\label{\detokenize{reference:useful-aliases}}
\sphinxAtStartPar
Add to \sphinxcode{\sphinxupquote{.bashrc}}:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nb}{alias}\PYG{+w}{ }bansuri\PYGZhy{}status\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}systemctl status bansuri\PYGZsq{}}
\PYG{n+nb}{alias}\PYG{+w}{ }bansuri\PYGZhy{}logs\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}journalctl \PYGZhy{}u bansuri \PYGZhy{}f\PYGZsq{}}
\PYG{n+nb}{alias}\PYG{+w}{ }bansuri\PYGZhy{}restart\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}systemctl restart bansuri\PYGZsq{}}
\PYG{n+nb}{alias}\PYG{+w}{ }bansuri\PYGZhy{}config\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}cat \PYGZti{}/bansuri/scripts.json | python \PYGZhy{}m json.tool\PYGZsq{}}
\PYG{n+nb}{alias}\PYG{+w}{ }bansuri\PYGZhy{}validate\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}python \PYGZhy{}c \PYGZdq{}from bansuri.base.config\PYGZus{}manager import BansuriConfig; BansuriConfig.load\PYGZus{}from\PYGZus{}file(\PYGZbs{}\PYGZdq{}scripts.json\PYGZbs{}\PYGZdq{}); print(\PYGZbs{}\PYGZdq{}\(\checkmark\) Valid\PYGZbs{}\PYGZdq{})\PYGZdq{}\PYGZsq{}}
\end{sphinxVerbatim}

\sphinxstepscope


\chapter{Advanced Configuration}
\label{\detokenize{advanced-config:advanced-configuration}}\label{\detokenize{advanced-config::doc}}
\sphinxAtStartPar
This guide covers advanced configuration features and patterns for Bansuri.


\section{Timeout Management}
\label{\detokenize{advanced-config:timeout-management}}

\subsection{Understanding Timeouts}
\label{\detokenize{advanced-config:understanding-timeouts}}
\sphinxAtStartPar
The \sphinxcode{\sphinxupquote{timeout}} parameter controls the maximum execution time for a task. If the task exceeds this time, the process is terminated.


\subsection{Timeout Format}
\label{\detokenize{advanced-config:timeout-format}}
\sphinxAtStartPar
Timeouts can be specified as:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Seconds}: \sphinxcode{\sphinxupquote{"300"}} or \sphinxcode{\sphinxupquote{300}} (5 minutes)

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Human\sphinxhyphen{}readable format}:
\sphinxhyphen{} Seconds: \sphinxcode{\sphinxupquote{"30s"}} \(\rightarrow\) 30 seconds
\sphinxhyphen{} Minutes: \sphinxcode{\sphinxupquote{"5m"}} \(\rightarrow\) 5 minutes (300 seconds)
\sphinxhyphen{} Hours: \sphinxcode{\sphinxupquote{"2h"}} \(\rightarrow\) 2 hours (7200 seconds)

\end{itemize}


\subsection{Examples}
\label{\detokenize{advanced-config:examples}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}scripts\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{p}{[}
\PYG{+w}{    }\PYG{p}{\PYGZob{}}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}quick\PYGZhy{}task\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}echo \PYGZsq{}Hello\PYGZsq{}\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}timeout\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}10s\PYGZdq{}}
\PYG{+w}{    }\PYG{p}{\PYGZcb{},}
\PYG{+w}{    }\PYG{p}{\PYGZob{}}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}medium\PYGZhy{}task\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}/usr/bin/backup.sh\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}timeout\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}30m\PYGZdq{}}
\PYG{+w}{    }\PYG{p}{\PYGZcb{},}
\PYG{+w}{    }\PYG{p}{\PYGZob{}}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}long\PYGZhy{}task\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}/opt/process/heavy\PYGZhy{}computation.py\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}timeout\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}1h\PYGZdq{}}
\PYG{+w}{    }\PYG{p}{\PYGZcb{},}
\PYG{+w}{    }\PYG{p}{\PYGZob{}}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}very\PYGZhy{}long\PYGZhy{}task\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}mysqldump production | gzip\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}timeout\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}3600\PYGZdq{}}
\PYG{+w}{    }\PYG{p}{\PYGZcb{}}
\PYG{+w}{  }\PYG{p}{]}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\section{Failure Control}
\label{\detokenize{advanced-config:failure-control}}

\subsection{Restart Policies}
\label{\detokenize{advanced-config:restart-policies}}
\sphinxAtStartPar
The \sphinxcode{\sphinxupquote{on\sphinxhyphen{}fail}} and \sphinxcode{\sphinxupquote{times}} parameters control task retry behavior:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{on\sphinxhyphen{}fail: ‚Äústop‚Äù} (default): Stop the task immediately on failure

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{on\sphinxhyphen{}fail: ‚Äúrestart‚Äù}: Restart the task up to \sphinxcode{\sphinxupquote{times}} attempts

\end{itemize}

\sphinxAtStartPar
The \sphinxcode{\sphinxupquote{success\sphinxhyphen{}codes}} parameter specifies which exit codes are considered success (default: \sphinxcode{\sphinxupquote{{[}0{]}}}).


\subsection{Example Configurations}
\label{\detokenize{advanced-config:example-configurations}}
\sphinxAtStartPar
\sphinxstylestrong{Single attempt, stop on failure:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}critical\PYGZhy{}task\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}deploy.sh\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}on\PYGZhy{}fail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}stop\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}times\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{1}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstylestrong{Three retry attempts:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}resilient\PYGZhy{}task\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}api\PYGZhy{}call.sh\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}on\PYGZhy{}fail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}restart\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}times\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{3}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstylestrong{Custom success codes:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}task\PYGZhy{}with\PYGZhy{}warnings\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}./checker.sh\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}success\PYGZhy{}codes\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{+w}{ }\PYG{l+m+mi}{2}\PYG{p}{],}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}on\PYGZhy{}fail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}restart\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}times\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{2}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\section{Output Redirection}
\label{\detokenize{advanced-config:output-redirection}}

\subsection{Log File Management}
\label{\detokenize{advanced-config:log-file-management}}
\sphinxAtStartPar
Control where task output goes with \sphinxcode{\sphinxupquote{stdout}} and \sphinxcode{\sphinxupquote{stderr}}:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{stderr: ‚Äúcombined‚Äù} (default): Merge stderr into stdout

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{stderr: ‚Äú/path/to/file‚Äù}: Redirect to a specific file

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{stdout: ‚Äú/path/to/file‚Äù}: Redirect stdout separately

\end{itemize}


\subsection{Examples}
\label{\detokenize{advanced-config:id1}}
\sphinxAtStartPar
\sphinxstylestrong{Combined output to single file:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}task\PYGZhy{}with\PYGZhy{}logs\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}backup.sh\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}stdout\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}/var/log/backup.log\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}stderr\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}combined\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstylestrong{Separate log files:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}task\PYGZhy{}separate\PYGZhy{}logs\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}process.py\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}stdout\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}/var/log/process.out\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}stderr\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}/var/log/process.err\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstylestrong{Log rotation pattern:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}task\PYGZhy{}with\PYGZhy{}rotation\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}data\PYGZhy{}sync.sh\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}stdout\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}/var/log/sync/\PYGZdl{}(date +\PYGZpc{}Y\PYGZhy{}\PYGZpc{}m\PYGZhy{}\PYGZpc{}d).log\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}stderr\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}combined\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\section{Working Directory}
\label{\detokenize{advanced-config:working-directory}}
\sphinxAtStartPar
The \sphinxcode{\sphinxupquote{working\sphinxhyphen{}directory}} parameter sets the directory where the command is executed:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}repo\PYGZhy{}task\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}git pull \PYGZam{}\PYGZam{} npm test\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}working\PYGZhy{}directory\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}/home/deploy/myapp\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
This is useful for:
\begin{itemize}
\item {} 
\sphinxAtStartPar
Scripts that use relative paths

\item {} 
\sphinxAtStartPar
Repository operations

\item {} 
\sphinxAtStartPar
Docker container workloads

\end{itemize}


\section{Task Descriptions}
\label{\detokenize{advanced-config:task-descriptions}}
\sphinxAtStartPar
Add \sphinxcode{\sphinxupquote{description}} field for documentation:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}backup\PYGZhy{}daily\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}pg\PYGZus{}dump production \PYGZgt{} backup.sql\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}timer\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}86400\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}description\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Daily PostgreSQL backup at midnight UTC\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\section{Combining Features}
\label{\detokenize{advanced-config:combining-features}}
\sphinxAtStartPar
Here‚Äôs a comprehensive example using multiple advanced features:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}version\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}1.0\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}notify\PYGZus{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}mail \PYGZhy{}s \PYGZsq{}[Bansuri] Alert\PYGZsq{} ops@company.com\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}scripts\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{p}{[}
\PYG{+w}{    }\PYG{p}{\PYGZob{}}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}critical\PYGZhy{}api\PYGZhy{}health\PYGZhy{}check\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}/opt/healthcheck/api\PYGZhy{}check.py\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}timer\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}60\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}timeout\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}30s\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}working\PYGZhy{}directory\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}/opt/healthcheck\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}on\PYGZhy{}fail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}restart\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}times\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{3}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}notify\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}mail\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}stdout\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}/var/log/healthcheck.log\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}stderr\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}combined\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}success\PYGZhy{}codes\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{+w}{ }\PYG{l+m+mi}{1}\PYG{p}{],}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}description\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}API health check every minute with retries\PYGZdq{}}
\PYG{+w}{    }\PYG{p}{\PYGZcb{},}
\PYG{+w}{    }\PYG{p}{\PYGZob{}}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}nightly\PYGZhy{}database\PYGZhy{}backup\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}/usr/local/bin/backup\PYGZhy{}db.sh\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}timer\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}86400\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}timeout\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}2h\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}working\PYGZhy{}directory\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}/backups\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}on\PYGZhy{}fail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}restart\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}times\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{2}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}notify\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}mail\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}stdout\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}/var/log/backup\PYGZhy{}\PYGZdl{}(date +\PYGZpc{}Y\PYGZhy{}\PYGZpc{}m\PYGZhy{}\PYGZpc{}d).log\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}stderr\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}combined\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}description\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Nightly full database backup with retry\PYGZdq{}}
\PYG{+w}{    }\PYG{p}{\PYGZcb{}}
\PYG{+w}{  }\PYG{p}{]}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\section{Performance Tuning}
\label{\detokenize{advanced-config:performance-tuning}}

\subsection{Task Concurrency}
\label{\detokenize{advanced-config:task-concurrency}}
\sphinxAtStartPar
Each task runs in its own thread. The system can handle multiple concurrent tasks:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{I/O\sphinxhyphen{}bound tasks}: Run many concurrently (network calls, file operations)

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{CPU\sphinxhyphen{}bound tasks}: Consider limiting concurrency and using appropriate timeouts

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Resource\sphinxhyphen{}intensive tasks}: Monitor system resources

\end{itemize}


\subsection{Timer\sphinxhyphen{}based Execution}
\label{\detokenize{advanced-config:timer-based-execution}}
\sphinxAtStartPar
The \sphinxcode{\sphinxupquote{timer}} parameter defines fixed\sphinxhyphen{}interval execution:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}frequent\PYGZhy{}task\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}check.sh\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}timer\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}5\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}description\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Runs every 5 seconds\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}hourly\PYGZhy{}task\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}hourly\PYGZhy{}job.sh\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}timer\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}3600\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}description\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Runs every hour\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\section{Error Handling Patterns}
\label{\detokenize{advanced-config:error-handling-patterns}}
\sphinxAtStartPar
\sphinxstylestrong{Pattern 1: Fail\sphinxhyphen{}fast}

\sphinxAtStartPar
For critical tasks that should stop immediately:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}deploy\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}deploy.sh\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}on\PYGZhy{}fail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}stop\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}times\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{1}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstylestrong{Pattern 2: Resilient with retries}

\sphinxAtStartPar
For tasks that might have transient failures:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}api\PYGZhy{}call\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}api\PYGZhy{}client.py\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}on\PYGZhy{}fail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}restart\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}times\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{5}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}timeout\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}30s\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstylestrong{Pattern 3: Partial success acceptance}

\sphinxAtStartPar
For tasks where certain exit codes are acceptable:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}data\PYGZhy{}check\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}validator.py\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}success\PYGZhy{}codes\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{+w}{ }\PYG{l+m+mi}{2}\PYG{p}{],}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}notify\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}mail\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstylestrong{Pattern 4: Monitored execution with notification}

\sphinxAtStartPar
For important tasks that need monitoring:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}critical\PYGZhy{}job\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}critical.sh\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}timer\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}3600\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}timeout\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}30m\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}on\PYGZhy{}fail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}restart\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}times\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{3}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}notify\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}mail\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}stdout\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}/var/log/critical.log\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}stderr\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}combined\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\section{Common Mistakes to Avoid}
\label{\detokenize{advanced-config:common-mistakes-to-avoid}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Setting timeout too short}: Leave enough time for normal execution

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Ignoring failure modes}: Test on\sphinxhyphen{}fail behavior

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Not managing logs}: Use log rotation or separate log directories

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Forgetting working\sphinxhyphen{}directory}: Relative paths may fail

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Ignoring resource limits}: Monitor CPU and memory usage

\end{enumerate}


\section{Debugging Configuration Issues}
\label{\detokenize{advanced-config:debugging-configuration-issues}}
\sphinxAtStartPar
Enable debug output:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nb}{export}\PYG{+w}{ }\PYG{n+nv}{BANSURI\PYGZus{}LOG\PYGZus{}LEVEL}\PYG{o}{=}DEBUG
bansuri\PYG{+w}{ }\PYGZhy{}\PYGZhy{}config\PYG{+w}{ }scripts.json
\end{sphinxVerbatim}

\sphinxAtStartPar
Check configuration syntax:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
python\PYG{+w}{ }\PYGZhy{}c\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}}
\PYG{l+s+s2}{from bansuri.base.config\PYGZus{}manager import BansuriConfig}
\PYG{l+s+s2}{config = BansuriConfig.load\PYGZus{}from\PYGZus{}file(\PYGZsq{}scripts.json\PYGZsq{})}
\PYG{l+s+s2}{for script in config.scripts:}
\PYG{l+s+s2}{    print(f\PYGZsq{}\PYGZob{}script.name\PYGZcb{}: OK\PYGZsq{})}
\PYG{l+s+s2}{\PYGZdq{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
Test command execution:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
bash\PYG{+w}{ }\PYGZhy{}c\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}cd /working/dir \PYGZam{}\PYGZam{} /path/to/command\PYGZdq{}}
\end{sphinxVerbatim}

\sphinxstepscope


\chapter{Usage}
\label{\detokenize{usage:usage}}\label{\detokenize{usage::doc}}

\section{Basic Usage}
\label{\detokenize{usage:basic-usage}}
\sphinxAtStartPar
To start the orchestration system from the command line:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
bansuri
\end{sphinxVerbatim}

\sphinxAtStartPar
This will load \sphinxcode{\sphinxupquote{scripts.json}} from the current working directory and start monitoring tasks according to the configuration.

\sphinxAtStartPar
To specify a different configuration file:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
bansuri\PYG{+w}{ }\PYGZhy{}\PYGZhy{}config\PYG{+w}{ }/path/to/scripts.json
\end{sphinxVerbatim}


\subsection{Programmatic Usage}
\label{\detokenize{usage:programmatic-usage}}
\sphinxAtStartPar
You can also use Bansuri as a library:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k+kn}{from}\PYG{+w}{ }\PYG{n+nn}{bansuri}\PYG{n+nn}{.}\PYG{n+nn}{master}\PYG{+w}{ }\PYG{k+kn}{import} \PYG{n}{Orchestrator}
\PYG{k+kn}{from}\PYG{+w}{ }\PYG{n+nn}{bansuri}\PYG{n+nn}{.}\PYG{n+nn}{base}\PYG{n+nn}{.}\PYG{n+nn}{config\PYGZus{}manager}\PYG{+w}{ }\PYG{k+kn}{import} \PYG{n}{BansuriConfig}

\PYG{c+c1}{\PYGZsh{} Load configuration}
\PYG{n}{config} \PYG{o}{=} \PYG{n}{BansuriConfig}\PYG{o}{.}\PYG{n}{load\PYGZus{}from\PYGZus{}file}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{scripts.json}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}

\PYG{c+c1}{\PYGZsh{} Create and start orchestrator}
\PYG{n}{orchestrator} \PYG{o}{=} \PYG{n}{Orchestrator}\PYG{p}{(}\PYG{n}{config\PYGZus{}file}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{scripts.json}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{orchestrator}\PYG{o}{.}\PYG{n}{start}\PYG{p}{(}\PYG{p}{)}
\end{sphinxVerbatim}


\section{Configuration}
\label{\detokenize{usage:configuration}}
\sphinxAtStartPar
Bansuri is configured primarily through the \sphinxcode{\sphinxupquote{scripts.json}} file.

\sphinxAtStartPar
For a detailed guide on how to add new scripts or modify existing parameters, please refer to the {\hyperref[\detokenize{configuration::doc}]{\sphinxcrossref{\DUrole{doc}{Configuration}}}} guide.

\sphinxstepscope


\chapter{Notifications}
\label{\detokenize{notifications:notifications}}\label{\detokenize{notifications::doc}}
\sphinxAtStartPar
Bansuri includes a built\sphinxhyphen{}in notification system to alert you when tasks fail. This allows you to respond quickly to issues in your orchestrated tasks.


\section{Overview}
\label{\detokenize{notifications:overview}}
\sphinxAtStartPar
The notification system is triggered when a task fails (returns a non\sphinxhyphen{}zero exit code) and the \sphinxcode{\sphinxupquote{notify}} configuration option is set to \sphinxcode{\sphinxupquote{"mail"}}. Notifications are sent using a command\sphinxhyphen{}based system, allowing integration with any notification service (email, Slack, webhooks, etc.).


\section{Configuration}
\label{\detokenize{notifications:configuration}}
\sphinxAtStartPar
To enable notifications, you need to:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Set the \sphinxcode{\sphinxupquote{notify}} field in your task configuration to \sphinxcode{\sphinxupquote{"mail"}}

\item {} 
\sphinxAtStartPar
Configure a global \sphinxcode{\sphinxupquote{notify\_command}} in your \sphinxcode{\sphinxupquote{scripts.json}}

\end{enumerate}


\subsection{Example Configuration}
\label{\detokenize{notifications:example-configuration}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}version\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}1.0\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}notify\PYGZus{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}mail \PYGZhy{}s \PYGZsq{}[Bansuri] Task Failed\PYGZsq{} your\PYGZhy{}email@example.com\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}scripts\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{p}{[}
\PYG{+w}{    }\PYG{p}{\PYGZob{}}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}critical\PYGZhy{}backup\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}/usr/local/bin/backup.sh\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}timer\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}3600\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}notify\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}mail\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}on\PYGZhy{}fail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}restart\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}times\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{3}
\PYG{+w}{    }\PYG{p}{\PYGZcb{}}
\PYG{+w}{  }\PYG{p}{]}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\subsection{Configuration Parameters}
\label{\detokenize{notifications:configuration-parameters}}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{notify\_command} (global): Shell command to execute for sending notifications. The command receives the failure message as input.

\sphinxAtStartPar
Examples:
\begin{itemize}
\item {} 
\sphinxAtStartPar
Email: \sphinxcode{\sphinxupquote{"mail \sphinxhyphen{}s \textquotesingle{}{[}Bansuri{]} Task Failed\textquotesingle{} admin@example.com"}}

\item {} 
\sphinxAtStartPar
Slack: \sphinxcode{\sphinxupquote{"curl \sphinxhyphen{}X POST \sphinxhyphen{}d @\sphinxhyphen{} https://hooks.slack.com/services/YOUR/WEBHOOK/URL"}}

\item {} 
\sphinxAtStartPar
Webhook: \sphinxcode{\sphinxupquote{"curl \sphinxhyphen{}X POST \sphinxhyphen{}H \textquotesingle{}Content\sphinxhyphen{}Type: application/json\textquotesingle{} \sphinxhyphen{}d @\sphinxhyphen{} https://your\sphinxhyphen{}api.example.com/notify"}}

\end{itemize}

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{notify} (per\sphinxhyphen{}task): Set to \sphinxcode{\sphinxupquote{"mail"}} to enable notifications for this task, or \sphinxcode{\sphinxupquote{"none"}} to disable.

\end{itemize}


\section{Failure Information}
\label{\detokenize{notifications:failure-information}}
\sphinxAtStartPar
When a task fails, Bansuri sends the following information in the notification:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Task Name}: Unique identifier of the failed task

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Command}: The command that was executed

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Working Directory}: The directory where the command ran

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Return Code}: Exit code of the failed process

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Attempt}: Which attempt this was (e.g., ‚Äú2/3‚Äù)

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Timestamp}: When the failure occurred

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Description}: Task description (if provided)

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Stdout}: Standard output captured from the failed task

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Stderr}: Standard error output captured from the failed task

\end{itemize}


\subsection{Notification Message Format}
\label{\detokenize{notifications:notification-message-format}}
\sphinxAtStartPar
The notification is formatted as follows:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
=== [Bansuri] Task Failure ===

Task \PYGZsq{}task\PYGZhy{}name\PYGZsq{} has failed.

\PYGZhy{}\PYGZhy{}\PYGZhy{} Task Details \PYGZhy{}\PYGZhy{}\PYGZhy{}
Name:              task\PYGZhy{}name
Command:           /path/to/command
Working Directory: /working/dir
Return Code:       1
Attempt:           2/3
Timestamp:         2026\PYGZhy{}01\PYGZhy{}19 14:30:45
Description:       Optional task description

\PYGZhy{}\PYGZhy{}\PYGZhy{} Output \PYGZhy{}\PYGZhy{}\PYGZhy{}
(stdout from task)

\PYGZhy{}\PYGZhy{}\PYGZhy{} Error \PYGZhy{}\PYGZhy{}\PYGZhy{}
(stderr from task)

\PYGZhy{}\PYGZhy{}\PYGZhy{}
This is an automated message from Bansuri Orchestrator.
\end{sphinxVerbatim}


\section{API Reference}
\label{\detokenize{notifications:api-reference}}

\subsection{Notifier Base Class}
\label{\detokenize{notifications:notifier-base-class}}\index{Notifier (class in bansuri.alerts.notifier)@\spxentry{Notifier}\spxextra{class in bansuri.alerts.notifier}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{notifications:bansuri.alerts.notifier.Notifier}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{\DUrole{k}{class}\DUrole{w}{ }}}\sphinxcode{\sphinxupquote{bansuri.alerts.notifier.}}\sphinxbfcode{\sphinxupquote{Notifier}}}
\pysigstopsignatures
\sphinxAtStartPar
Bases: \sphinxcode{\sphinxupquote{ABC}}

\sphinxAtStartPar
Base class for notification handlers.
\index{notify() (bansuri.alerts.notifier.Notifier method)@\spxentry{notify()}\spxextra{bansuri.alerts.notifier.Notifier method}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{notifications:bansuri.alerts.notifier.Notifier.notify}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxbfcode{\sphinxupquote{\DUrole{k}{abstractmethod}\DUrole{w}{ }}}\sphinxbfcode{\sphinxupquote{notify}}}
{\sphinxparam{\DUrole{n}{failure\_info}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{{\hyperref[\detokenize{notifications:bansuri.alerts.notifier.FailureInfo}]{\sphinxcrossref{FailureInfo}}}}}}
{{ $\rightarrow$ bool}}
\pysigstopsignatures
\sphinxAtStartPar
Abstract method that handles on failure notifications

\end{fulllineitems}


\end{fulllineitems}



\subsection{FailureInfo Data Class}
\label{\detokenize{notifications:failureinfo-data-class}}\index{FailureInfo (class in bansuri.alerts.notifier)@\spxentry{FailureInfo}\spxextra{class in bansuri.alerts.notifier}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{notifications:bansuri.alerts.notifier.FailureInfo}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxbfcode{\sphinxupquote{\DUrole{k}{class}\DUrole{w}{ }}}\sphinxcode{\sphinxupquote{bansuri.alerts.notifier.}}\sphinxbfcode{\sphinxupquote{FailureInfo}}}
{\sphinxparam{\DUrole{n}{task\_name}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{str}}\sphinxparamcomma \sphinxparam{\DUrole{n}{command}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{str}}\sphinxparamcomma \sphinxparam{\DUrole{n}{working\_directory}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{str\DUrole{w}{ }\DUrole{p}{|}\DUrole{w}{ }None}}\sphinxparamcomma \sphinxparam{\DUrole{n}{return\_code}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{int}}\sphinxparamcomma \sphinxparam{\DUrole{n}{attempt}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{int}}\sphinxparamcomma \sphinxparam{\DUrole{n}{max\_attempts}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{int}}\sphinxparamcomma \sphinxparam{\DUrole{n}{timestamp}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{datetime.datetime}}\sphinxparamcomma \sphinxparam{\DUrole{n}{description}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{str}}\sphinxparamcomma \sphinxparam{\DUrole{n}{stdout}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{str}}\sphinxparamcomma \sphinxparam{\DUrole{n}{stderr}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{str}}}
{}
\pysigstopsignatures\index{attempt (bansuri.alerts.notifier.FailureInfo attribute)@\spxentry{attempt}\spxextra{bansuri.alerts.notifier.FailureInfo attribute}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{notifications:bansuri.alerts.notifier.FailureInfo.attempt}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{attempt}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }int}}}
\pysigstopsignatures
\end{fulllineitems}

\index{command (bansuri.alerts.notifier.FailureInfo attribute)@\spxentry{command}\spxextra{bansuri.alerts.notifier.FailureInfo attribute}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{notifications:bansuri.alerts.notifier.FailureInfo.command}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{command}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }str}}}
\pysigstopsignatures
\end{fulllineitems}

\index{description (bansuri.alerts.notifier.FailureInfo attribute)@\spxentry{description}\spxextra{bansuri.alerts.notifier.FailureInfo attribute}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{notifications:bansuri.alerts.notifier.FailureInfo.description}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{description}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }str}}}
\pysigstopsignatures
\end{fulllineitems}

\index{max\_attempts (bansuri.alerts.notifier.FailureInfo attribute)@\spxentry{max\_attempts}\spxextra{bansuri.alerts.notifier.FailureInfo attribute}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{notifications:bansuri.alerts.notifier.FailureInfo.max_attempts}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{max\_attempts}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }int}}}
\pysigstopsignatures
\end{fulllineitems}

\index{return\_code (bansuri.alerts.notifier.FailureInfo attribute)@\spxentry{return\_code}\spxextra{bansuri.alerts.notifier.FailureInfo attribute}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{notifications:bansuri.alerts.notifier.FailureInfo.return_code}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{return\_code}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }int}}}
\pysigstopsignatures
\end{fulllineitems}

\index{stderr (bansuri.alerts.notifier.FailureInfo attribute)@\spxentry{stderr}\spxextra{bansuri.alerts.notifier.FailureInfo attribute}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{notifications:bansuri.alerts.notifier.FailureInfo.stderr}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{stderr}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }str}}}
\pysigstopsignatures
\end{fulllineitems}

\index{stdout (bansuri.alerts.notifier.FailureInfo attribute)@\spxentry{stdout}\spxextra{bansuri.alerts.notifier.FailureInfo attribute}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{notifications:bansuri.alerts.notifier.FailureInfo.stdout}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{stdout}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }str}}}
\pysigstopsignatures
\end{fulllineitems}

\index{task\_name (bansuri.alerts.notifier.FailureInfo attribute)@\spxentry{task\_name}\spxextra{bansuri.alerts.notifier.FailureInfo attribute}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{notifications:bansuri.alerts.notifier.FailureInfo.task_name}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{task\_name}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }str}}}
\pysigstopsignatures
\end{fulllineitems}

\index{timestamp (bansuri.alerts.notifier.FailureInfo attribute)@\spxentry{timestamp}\spxextra{bansuri.alerts.notifier.FailureInfo attribute}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{notifications:bansuri.alerts.notifier.FailureInfo.timestamp}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{timestamp}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }datetime}}}
\pysigstopsignatures
\end{fulllineitems}

\index{working\_directory (bansuri.alerts.notifier.FailureInfo attribute)@\spxentry{working\_directory}\spxextra{bansuri.alerts.notifier.FailureInfo attribute}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{notifications:bansuri.alerts.notifier.FailureInfo.working_directory}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{working\_directory}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }str\DUrole{w}{ }\DUrole{p}{|}\DUrole{w}{ }None}}}
\pysigstopsignatures
\end{fulllineitems}


\end{fulllineitems}



\subsection{CommandNotifier Implementation}
\label{\detokenize{notifications:commandnotifier-implementation}}\index{CommandNotifier (class in bansuri.alerts.cmd\_notifier)@\spxentry{CommandNotifier}\spxextra{class in bansuri.alerts.cmd\_notifier}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{notifications:bansuri.alerts.cmd_notifier.CommandNotifier}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxbfcode{\sphinxupquote{\DUrole{k}{class}\DUrole{w}{ }}}\sphinxcode{\sphinxupquote{bansuri.alerts.cmd\_notifier.}}\sphinxbfcode{\sphinxupquote{CommandNotifier}}}
{\sphinxparam{\DUrole{n}{notify\_command}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{str}}\sphinxparamcomma \sphinxparam{\DUrole{n}{timeout}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{int}\DUrole{w}{ }\DUrole{o}{=}\DUrole{w}{ }\DUrole{default_value}{30}}}
{}
\pysigstopsignatures
\sphinxAtStartPar
Bases: {\hyperref[\detokenize{notifications:bansuri.alerts.notifier.Notifier}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{Notifier}}}}}

\sphinxAtStartPar
Notify via shell command execution.
\index{notify() (bansuri.alerts.cmd\_notifier.CommandNotifier method)@\spxentry{notify()}\spxextra{bansuri.alerts.cmd\_notifier.CommandNotifier method}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{notifications:bansuri.alerts.cmd_notifier.CommandNotifier.notify}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxbfcode{\sphinxupquote{notify}}}
{\sphinxparam{\DUrole{n}{failure\_info}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{{\hyperref[\detokenize{notifications:bansuri.alerts.notifier.FailureInfo}]{\sphinxcrossref{FailureInfo}}}}}}
{{ $\rightarrow$ bool}}
\pysigstopsignatures
\sphinxAtStartPar
Abstract method that handles on failure notifications

\end{fulllineitems}


\end{fulllineitems}



\section{Examples}
\label{\detokenize{notifications:examples}}

\subsection{Email Notifications}
\label{\detokenize{notifications:email-notifications}}
\sphinxAtStartPar
Send notifications via email using the \sphinxcode{\sphinxupquote{mail}} command:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}notify\PYGZus{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}mail \PYGZhy{}s \PYGZsq{}[Bansuri Alert] Task Failed\PYGZsq{} ops\PYGZhy{}team@company.com\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}scripts\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{p}{[}
\PYG{+w}{    }\PYG{p}{\PYGZob{}}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}database\PYGZhy{}backup\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}pg\PYGZus{}dump production \PYGZgt{} /backups/db.sql\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}timer\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}86400\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}notify\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}mail\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}on\PYGZhy{}fail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}restart\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}times\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{2}
\PYG{+w}{    }\PYG{p}{\PYGZcb{}}
\PYG{+w}{  }\PYG{p}{]}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\subsection{Slack Notifications}
\label{\detokenize{notifications:slack-notifications}}
\sphinxAtStartPar
Send notifications to a Slack channel:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}notify\PYGZus{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}curl \PYGZhy{}X POST \PYGZhy{}d @\PYGZhy{} https://hooks.slack.com/services/YOUR/WEBHOOK/URL\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}scripts\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{p}{[}
\PYG{+w}{    }\PYG{p}{\PYGZob{}}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}critical\PYGZhy{}service\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}systemctl restart myservice\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}timer\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}300\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}notify\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}mail\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}on\PYGZhy{}fail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}stop\PYGZdq{}}
\PYG{+w}{    }\PYG{p}{\PYGZcb{}}
\PYG{+w}{  }\PYG{p}{]}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\subsection{Custom Webhook}
\label{\detokenize{notifications:custom-webhook}}
\sphinxAtStartPar
Send notifications to a custom API endpoint:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}notify\PYGZus{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}curl \PYGZhy{}X POST \PYGZhy{}H \PYGZsq{}Content\PYGZhy{}Type: application/json\PYGZsq{} \PYGZhy{}d @\PYGZhy{} https://monitoring.company.com/api/alerts\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}scripts\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{p}{[}
\PYG{+w}{    }\PYG{p}{\PYGZob{}}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}health\PYGZhy{}check\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}/opt/health\PYGZhy{}check.py\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}timer\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}600\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}notify\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}mail\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}on\PYGZhy{}fail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}restart\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}times\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{3}
\PYG{+w}{    }\PYG{p}{\PYGZcb{}}
\PYG{+w}{  }\PYG{p}{]}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\section{Extending the Notification System}
\label{\detokenize{notifications:extending-the-notification-system}}
\sphinxAtStartPar
You can create custom notifier implementations by subclassing the \sphinxcode{\sphinxupquote{Notifier}} base class:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k+kn}{from}\PYG{+w}{ }\PYG{n+nn}{bansuri}\PYG{n+nn}{.}\PYG{n+nn}{alerts}\PYG{n+nn}{.}\PYG{n+nn}{notifier}\PYG{+w}{ }\PYG{k+kn}{import} \PYG{n}{Notifier}\PYG{p}{,} \PYG{n}{FailureInfo}

\PYG{k}{class}\PYG{+w}{ }\PYG{n+nc}{SlackNotifier}\PYG{p}{(}\PYG{n}{Notifier}\PYG{p}{)}\PYG{p}{:}
    \PYG{k}{def}\PYG{+w}{ }\PYG{n+nf+fm}{\PYGZus{}\PYGZus{}init\PYGZus{}\PYGZus{}}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{webhook\PYGZus{}url}\PYG{p}{:} \PYG{n+nb}{str}\PYG{p}{)}\PYG{p}{:}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{webhook\PYGZus{}url} \PYG{o}{=} \PYG{n}{webhook\PYGZus{}url}

    \PYG{k}{def}\PYG{+w}{ }\PYG{n+nf}{notify}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{failure\PYGZus{}info}\PYG{p}{:} \PYG{n}{FailureInfo}\PYG{p}{)} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZgt{}} \PYG{n+nb}{bool}\PYG{p}{:}
        \PYG{c+c1}{\PYGZsh{} Your implementation to send to Slack}
        \PYG{n}{message} \PYG{o}{=} \PYG{l+s+sa}{f}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Task }\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+si}{\PYGZob{}}\PYG{n}{failure\PYGZus{}info}\PYG{o}{.}\PYG{n}{task\PYGZus{}name}\PYG{l+s+si}{\PYGZcb{}}\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{ failed with code }\PYG{l+s+si}{\PYGZob{}}\PYG{n}{failure\PYGZus{}info}\PYG{o}{.}\PYG{n}{return\PYGZus{}code}\PYG{l+s+si}{\PYGZcb{}}\PYG{l+s+s2}{\PYGZdq{}}
        \PYG{c+c1}{\PYGZsh{} ... send to Slack ...}
        \PYG{k}{return} \PYG{k+kc}{True}
\end{sphinxVerbatim}

\sphinxAtStartPar
Then modify the \sphinxcode{\sphinxupquote{TaskRunner.\_create\_notifier()}} method to use your custom notifier.


\section{Troubleshooting}
\label{\detokenize{notifications:troubleshooting}}

\subsection{Notifications not being sent}
\label{\detokenize{notifications:notifications-not-being-sent}}
\sphinxAtStartPar
\sphinxstylestrong{Issue}: Tasks are failing but no notifications are received.

\sphinxAtStartPar
\sphinxstylestrong{Solutions}:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Verify the \sphinxcode{\sphinxupquote{notify}} field is set to \sphinxcode{\sphinxupquote{"mail"}} in the task configuration

\item {} 
\sphinxAtStartPar
Check that \sphinxcode{\sphinxupquote{notify\_command}} is defined at the global level in \sphinxcode{\sphinxupquote{scripts.json}}

\item {} 
\sphinxAtStartPar
Test the notify command manually:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nb}{echo}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Test message\PYGZdq{}}\PYG{+w}{ }\PYG{p}{|}\PYG{+w}{ }mail\PYG{+w}{ }\PYGZhy{}s\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Test\PYGZdq{}}\PYG{+w}{ }your\PYGZhy{}email@example.com
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
Check Bansuri logs for error messages related to notification sending

\end{enumerate}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{3}
\item {} 
\sphinxAtStartPar
Ensure the user running Bansuri has permissions to execute the notify command

\end{enumerate}


\subsection{Notification timeout}
\label{\detokenize{notifications:notification-timeout}}
\sphinxAtStartPar
\sphinxstylestrong{Issue}: Notifications are causing tasks to hang or slow down.

\sphinxAtStartPar
\sphinxstylestrong{Solution}: The \sphinxcode{\sphinxupquote{CommandNotifier}} has a default 30\sphinxhyphen{}second timeout. To increase it, modify the timeout in \sphinxcode{\sphinxupquote{TaskRunner.\_create\_notifier()}}:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{return} \PYG{n}{CommandNotifier}\PYG{p}{(}\PYG{n}{notify\PYGZus{}cmd}\PYG{p}{,} \PYG{n}{timeout}\PYG{o}{=}\PYG{l+m+mi}{60}\PYG{p}{)}  \PYG{c+c1}{\PYGZsh{} 60 seconds}
\end{sphinxVerbatim}


\section{Integration Notes}
\label{\detokenize{notifications:integration-notes}}\begin{itemize}
\item {} 
\sphinxAtStartPar
Notifications are sent \sphinxstylestrong{asynchronously} within the task execution thread, so they won‚Äôt block task execution.

\item {} 
\sphinxAtStartPar
If a notification fails, it‚Äôs logged but doesn‚Äôt affect the task execution flow.

\item {} 
\sphinxAtStartPar
The notification message is formatted with escaped newlines (\sphinxcode{\sphinxupquote{\textbackslash{}\textbackslash{}n}}) for compatibility with shell commands.

\end{itemize}

\sphinxstepscope


\chapter{Creating Custom Tasks}
\label{\detokenize{custom-tasks:creating-custom-tasks}}\label{\detokenize{custom-tasks::doc}}
\sphinxAtStartPar
Bansuri provides a powerful extension system that allows you to create custom task implementations beyond simple shell commands. This is perfect for complex business logic, Python scripts with special requirements, or integrations with other systems.


\section{Overview}
\label{\detokenize{custom-tasks:overview}}
\sphinxAtStartPar
The base class \sphinxcode{\sphinxupquote{AbstractTask}} defines the interface for all executable tasks in Bansuri. By inheriting from this class and implementing the required methods, you can create sophisticated task handlers.


\subsection{Abstract Base Class}
\label{\detokenize{custom-tasks:abstract-base-class}}\index{AbstractTask (class in bansuri.base.task\_base)@\spxentry{AbstractTask}\spxextra{class in bansuri.base.task\_base}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{custom-tasks:bansuri.base.task_base.AbstractTask}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxbfcode{\sphinxupquote{\DUrole{k}{class}\DUrole{w}{ }}}\sphinxcode{\sphinxupquote{bansuri.base.task\_base.}}\sphinxbfcode{\sphinxupquote{AbstractTask}}}
{\sphinxparam{\DUrole{n}{config}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{TaskConfig}}}
{}
\pysigstopsignatures
\sphinxAtStartPar
Bases: \sphinxcode{\sphinxupquote{ABC}}

\sphinxAtStartPar
Abstract base class for tasks.
Uses a modular TaskConfig for properties and as execution interface.
\index{run() (bansuri.base.task\_base.AbstractTask method)@\spxentry{run()}\spxextra{bansuri.base.task\_base.AbstractTask method}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{custom-tasks:bansuri.base.task_base.AbstractTask.run}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxbfcode{\sphinxupquote{\DUrole{k}{abstractmethod}\DUrole{w}{ }}}\sphinxbfcode{\sphinxupquote{run}}}
{}
{{ $\rightarrow$ int}}
\pysigstopsignatures
\sphinxAtStartPar
Execute the task.
:returns: The exit code of the command.
:rtype: int

\end{fulllineitems}

\index{stop() (bansuri.base.task\_base.AbstractTask method)@\spxentry{stop()}\spxextra{bansuri.base.task\_base.AbstractTask method}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{custom-tasks:bansuri.base.task_base.AbstractTask.stop}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxbfcode{\sphinxupquote{\DUrole{k}{abstractmethod}\DUrole{w}{ }}}\sphinxbfcode{\sphinxupquote{stop}}}
{}
{{ $\rightarrow$ None}}
\pysigstopsignatures
\sphinxAtStartPar
Terminate the task if it is running.

\end{fulllineitems}


\end{fulllineitems}



\section{Basic Example: Logging Task}
\label{\detokenize{custom-tasks:basic-example-logging-task}}
\sphinxAtStartPar
Here‚Äôs a simple custom task that logs messages to a file:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k+kn}{from}\PYG{+w}{ }\PYG{n+nn}{bansuri}\PYG{n+nn}{.}\PYG{n+nn}{base}\PYG{n+nn}{.}\PYG{n+nn}{task\PYGZus{}base}\PYG{+w}{ }\PYG{k+kn}{import} \PYG{n}{AbstractTask}
\PYG{k+kn}{from}\PYG{+w}{ }\PYG{n+nn}{bansuri}\PYG{n+nn}{.}\PYG{n+nn}{base}\PYG{n+nn}{.}\PYG{n+nn}{config}\PYG{n+nn}{.}\PYG{n+nn}{task\PYGZus{}config}\PYG{+w}{ }\PYG{k+kn}{import} \PYG{n}{TaskConfig}
\PYG{k+kn}{from}\PYG{+w}{ }\PYG{n+nn}{datetime}\PYG{+w}{ }\PYG{k+kn}{import} \PYG{n}{datetime}

\PYG{k}{class}\PYG{+w}{ }\PYG{n+nc}{LoggingTask}\PYG{p}{(}\PYG{n}{AbstractTask}\PYG{p}{)}\PYG{p}{:}
\PYG{+w}{    }\PYG{l+s+sd}{\PYGZdq{}\PYGZdq{}\PYGZdq{}A simple task that logs to a file.\PYGZdq{}\PYGZdq{}\PYGZdq{}}

    \PYG{k}{def}\PYG{+w}{ }\PYG{n+nf+fm}{\PYGZus{}\PYGZus{}init\PYGZus{}\PYGZus{}}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{config}\PYG{p}{:} \PYG{n}{TaskConfig}\PYG{p}{)}\PYG{p}{:}
        \PYG{n+nb}{super}\PYG{p}{(}\PYG{p}{)}\PYG{o}{.}\PYG{n+nf+fm}{\PYGZus{}\PYGZus{}init\PYGZus{}\PYGZus{}}\PYG{p}{(}\PYG{n}{config}\PYG{p}{)}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{running} \PYG{o}{=} \PYG{k+kc}{False}

    \PYG{k}{def}\PYG{+w}{ }\PYG{n+nf}{run}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{)} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZgt{}} \PYG{n+nb}{int}\PYG{p}{:}
\PYG{+w}{        }\PYG{l+s+sd}{\PYGZdq{}\PYGZdq{}\PYGZdq{}Execute the logging task.\PYGZdq{}\PYGZdq{}\PYGZdq{}}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{running} \PYG{o}{=} \PYG{k+kc}{True}
        \PYG{k}{try}\PYG{p}{:}
            \PYG{n}{log\PYGZus{}file} \PYG{o}{=} \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{config}\PYG{o}{.}\PYG{n}{logging}\PYG{o}{.}\PYG{n}{stdout\PYGZus{}path} \PYG{o+ow}{or} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{/tmp/task.log}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{message} \PYG{o}{=} \PYG{l+s+sa}{f}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{[}\PYG{l+s+si}{\PYGZob{}}\PYG{n}{datetime}\PYG{o}{.}\PYG{n}{now}\PYG{p}{(}\PYG{p}{)}\PYG{l+s+si}{\PYGZcb{}}\PYG{l+s+s2}{] Task executed: }\PYG{l+s+si}{\PYGZob{}}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{config}\PYG{o}{.}\PYG{n}{identification}\PYG{o}{.}\PYG{n}{name}\PYG{l+s+si}{\PYGZcb{}}\PYG{l+s+s2}{\PYGZdq{}}

            \PYG{k}{with} \PYG{n+nb}{open}\PYG{p}{(}\PYG{n}{log\PYGZus{}file}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{a}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)} \PYG{k}{as} \PYG{n}{f}\PYG{p}{:}
                \PYG{n}{f}\PYG{o}{.}\PYG{n}{write}\PYG{p}{(}\PYG{n}{message} \PYG{o}{+} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}

            \PYG{k}{return} \PYG{l+m+mi}{0}  \PYG{c+c1}{\PYGZsh{} Success}
        \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{e}\PYG{p}{:}
            \PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+sa}{f}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Error: }\PYG{l+s+si}{\PYGZob{}}\PYG{n}{e}\PYG{l+s+si}{\PYGZcb{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
            \PYG{k}{return} \PYG{l+m+mi}{1}  \PYG{c+c1}{\PYGZsh{} Failure}
        \PYG{k}{finally}\PYG{p}{:}
            \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{running} \PYG{o}{=} \PYG{k+kc}{False}

    \PYG{k}{def}\PYG{+w}{ }\PYG{n+nf}{stop}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{)} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZgt{}} \PYG{k+kc}{None}\PYG{p}{:}
\PYG{+w}{        }\PYG{l+s+sd}{\PYGZdq{}\PYGZdq{}\PYGZdq{}Stop the task if running.\PYGZdq{}\PYGZdq{}\PYGZdq{}}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{running} \PYG{o}{=} \PYG{k+kc}{False}
\end{sphinxVerbatim}


\section{Advanced Example: Database Backup Task}
\label{\detokenize{custom-tasks:advanced-example-database-backup-task}}
\sphinxAtStartPar
A more realistic example that backs up a PostgreSQL database:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k+kn}{import}\PYG{+w}{ }\PYG{n+nn}{subprocess}
\PYG{k+kn}{import}\PYG{+w}{ }\PYG{n+nn}{os}
\PYG{k+kn}{from}\PYG{+w}{ }\PYG{n+nn}{datetime}\PYG{+w}{ }\PYG{k+kn}{import} \PYG{n}{datetime}
\PYG{k+kn}{from}\PYG{+w}{ }\PYG{n+nn}{bansuri}\PYG{n+nn}{.}\PYG{n+nn}{base}\PYG{n+nn}{.}\PYG{n+nn}{task\PYGZus{}base}\PYG{+w}{ }\PYG{k+kn}{import} \PYG{n}{AbstractTask}
\PYG{k+kn}{from}\PYG{+w}{ }\PYG{n+nn}{bansuri}\PYG{n+nn}{.}\PYG{n+nn}{base}\PYG{n+nn}{.}\PYG{n+nn}{config}\PYG{n+nn}{.}\PYG{n+nn}{task\PYGZus{}config}\PYG{+w}{ }\PYG{k+kn}{import} \PYG{n}{TaskConfig}

\PYG{k}{class}\PYG{+w}{ }\PYG{n+nc}{PostgresBackupTask}\PYG{p}{(}\PYG{n}{AbstractTask}\PYG{p}{)}\PYG{p}{:}
\PYG{+w}{    }\PYG{l+s+sd}{\PYGZdq{}\PYGZdq{}\PYGZdq{}Backs up a PostgreSQL database with compression.\PYGZdq{}\PYGZdq{}\PYGZdq{}}

    \PYG{k}{def}\PYG{+w}{ }\PYG{n+nf+fm}{\PYGZus{}\PYGZus{}init\PYGZus{}\PYGZus{}}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{config}\PYG{p}{:} \PYG{n}{TaskConfig}\PYG{p}{)}\PYG{p}{:}
        \PYG{n+nb}{super}\PYG{p}{(}\PYG{p}{)}\PYG{o}{.}\PYG{n+nf+fm}{\PYGZus{}\PYGZus{}init\PYGZus{}\PYGZus{}}\PYG{p}{(}\PYG{n}{config}\PYG{p}{)}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{process} \PYG{o}{=} \PYG{k+kc}{None}

    \PYG{k}{def}\PYG{+w}{ }\PYG{n+nf}{run}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{)} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZgt{}} \PYG{n+nb}{int}\PYG{p}{:}
\PYG{+w}{        }\PYG{l+s+sd}{\PYGZdq{}\PYGZdq{}\PYGZdq{}Execute the backup.\PYGZdq{}\PYGZdq{}\PYGZdq{}}
        \PYG{k}{try}\PYG{p}{:}
            \PYG{c+c1}{\PYGZsh{} Get configuration from task config}
            \PYG{n}{db\PYGZus{}name} \PYG{o}{=} \PYG{n}{os}\PYG{o}{.}\PYG{n}{environ}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{DB\PYGZus{}NAME}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{production}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
            \PYG{n}{backup\PYGZus{}dir} \PYG{o}{=} \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{config}\PYG{o}{.}\PYG{n}{logging}\PYG{o}{.}\PYG{n}{stdout\PYGZus{}path} \PYG{o+ow}{or} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{/backups}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{timestamp} \PYG{o}{=} \PYG{n}{datetime}\PYG{o}{.}\PYG{n}{now}\PYG{p}{(}\PYG{p}{)}\PYG{o}{.}\PYG{n}{strftime}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZpc{}}\PYG{l+s+s2}{Y}\PYG{l+s+s2}{\PYGZpc{}}\PYG{l+s+s2}{m}\PYG{l+s+si}{\PYGZpc{}d}\PYG{l+s+s2}{\PYGZus{}}\PYG{l+s+s2}{\PYGZpc{}}\PYG{l+s+s2}{H}\PYG{l+s+s2}{\PYGZpc{}}\PYG{l+s+s2}{M}\PYG{l+s+s2}{\PYGZpc{}}\PYG{l+s+s2}{S}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
            \PYG{n}{backup\PYGZus{}file} \PYG{o}{=} \PYG{l+s+sa}{f}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+si}{\PYGZob{}}\PYG{n}{backup\PYGZus{}dir}\PYG{l+s+si}{\PYGZcb{}}\PYG{l+s+s2}{/}\PYG{l+s+si}{\PYGZob{}}\PYG{n}{db\PYGZus{}name}\PYG{l+s+si}{\PYGZcb{}}\PYG{l+s+s2}{\PYGZus{}}\PYG{l+s+si}{\PYGZob{}}\PYG{n}{timestamp}\PYG{l+s+si}{\PYGZcb{}}\PYG{l+s+s2}{.sql.gz}\PYG{l+s+s2}{\PYGZdq{}}

            \PYG{c+c1}{\PYGZsh{} Create backup command}
            \PYG{n}{cmd} \PYG{o}{=} \PYG{l+s+sa}{f}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{pg\PYGZus{}dump }\PYG{l+s+si}{\PYGZob{}}\PYG{n}{db\PYGZus{}name}\PYG{l+s+si}{\PYGZcb{}}\PYG{l+s+s2}{ | gzip \PYGZgt{} }\PYG{l+s+si}{\PYGZob{}}\PYG{n}{backup\PYGZus{}file}\PYG{l+s+si}{\PYGZcb{}}\PYG{l+s+s2}{\PYGZdq{}}

            \PYG{c+c1}{\PYGZsh{} Execute with timeout}
            \PYG{n}{timeout} \PYG{o}{=} \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{\PYGZus{}parse\PYGZus{}timeout}\PYG{p}{(}\PYG{p}{)}
            \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{process} \PYG{o}{=} \PYG{n}{subprocess}\PYG{o}{.}\PYG{n}{Popen}\PYG{p}{(}
                \PYG{n}{cmd}\PYG{p}{,}
                \PYG{n}{shell}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,}
                \PYG{n}{stdout}\PYG{o}{=}\PYG{n}{subprocess}\PYG{o}{.}\PYG{n}{PIPE}\PYG{p}{,}
                \PYG{n}{stderr}\PYG{o}{=}\PYG{n}{subprocess}\PYG{o}{.}\PYG{n}{PIPE}\PYG{p}{,}
                \PYG{n}{cwd}\PYG{o}{=}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{config}\PYG{o}{.}\PYG{n}{identification}\PYG{o}{.}\PYG{n}{working\PYGZus{}directory}
            \PYG{p}{)}

            \PYG{k}{try}\PYG{p}{:}
                \PYG{n}{stdout}\PYG{p}{,} \PYG{n}{stderr} \PYG{o}{=} \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{process}\PYG{o}{.}\PYG{n}{communicate}\PYG{p}{(}\PYG{n}{timeout}\PYG{o}{=}\PYG{n}{timeout}\PYG{p}{)}
                \PYG{k}{return} \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{process}\PYG{o}{.}\PYG{n}{returncode}
            \PYG{k}{except} \PYG{n}{subprocess}\PYG{o}{.}\PYG{n}{TimeoutExpired}\PYG{p}{:}
                \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{process}\PYG{o}{.}\PYG{n}{kill}\PYG{p}{(}\PYG{p}{)}
                \PYG{k}{return} \PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}  \PYG{c+c1}{\PYGZsh{} Timeout}

        \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{e}\PYG{p}{:}
            \PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+sa}{f}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Backup failed: }\PYG{l+s+si}{\PYGZob{}}\PYG{n}{e}\PYG{l+s+si}{\PYGZcb{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
            \PYG{k}{return} \PYG{l+m+mi}{1}

    \PYG{k}{def}\PYG{+w}{ }\PYG{n+nf}{stop}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{)} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZgt{}} \PYG{k+kc}{None}\PYG{p}{:}
\PYG{+w}{        }\PYG{l+s+sd}{\PYGZdq{}\PYGZdq{}\PYGZdq{}Terminate the backup process.\PYGZdq{}\PYGZdq{}\PYGZdq{}}
        \PYG{k}{if} \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{process} \PYG{o+ow}{and} \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{process}\PYG{o}{.}\PYG{n}{poll}\PYG{p}{(}\PYG{p}{)} \PYG{o+ow}{is} \PYG{k+kc}{None}\PYG{p}{:}
            \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{process}\PYG{o}{.}\PYG{n}{terminate}\PYG{p}{(}\PYG{p}{)}
            \PYG{k}{try}\PYG{p}{:}
                \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{process}\PYG{o}{.}\PYG{n}{wait}\PYG{p}{(}\PYG{n}{timeout}\PYG{o}{=}\PYG{l+m+mi}{5}\PYG{p}{)}
            \PYG{k}{except} \PYG{n}{subprocess}\PYG{o}{.}\PYG{n}{TimeoutExpired}\PYG{p}{:}
                \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{process}\PYG{o}{.}\PYG{n}{kill}\PYG{p}{(}\PYG{p}{)}

    \PYG{k}{def}\PYG{+w}{ }\PYG{n+nf}{\PYGZus{}parse\PYGZus{}timeout}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{)} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZgt{}} \PYG{n+nb}{int}\PYG{p}{:}
\PYG{+w}{        }\PYG{l+s+sd}{\PYGZdq{}\PYGZdq{}\PYGZdq{}Parse timeout from config.\PYGZdq{}\PYGZdq{}\PYGZdq{}}
        \PYG{n}{timeout\PYGZus{}str} \PYG{o}{=} \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{config}\PYG{o}{.}\PYG{n}{scheduling}\PYG{o}{.}\PYG{n}{timeout}
        \PYG{k}{if} \PYG{o+ow}{not} \PYG{n}{timeout\PYGZus{}str}\PYG{p}{:}
            \PYG{k}{return} \PYG{l+m+mi}{3600}  \PYG{c+c1}{\PYGZsh{} Default 1 hour}

        \PYG{k}{if} \PYG{n+nb}{isinstance}\PYG{p}{(}\PYG{n}{timeout\PYGZus{}str}\PYG{p}{,} \PYG{n+nb}{int}\PYG{p}{)}\PYG{p}{:}
            \PYG{k}{return} \PYG{n}{timeout\PYGZus{}str}

        \PYG{c+c1}{\PYGZsh{} Parse formats like \PYGZdq{}30s\PYGZdq{}, \PYGZdq{}5m\PYGZdq{}, \PYGZdq{}1h\PYGZdq{}}
        \PYG{n}{timeout\PYGZus{}str} \PYG{o}{=} \PYG{n+nb}{str}\PYG{p}{(}\PYG{n}{timeout\PYGZus{}str}\PYG{p}{)}\PYG{o}{.}\PYG{n}{lower}\PYG{p}{(}\PYG{p}{)}
        \PYG{k}{if} \PYG{n}{timeout\PYGZus{}str}\PYG{o}{.}\PYG{n}{endswith}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{s}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{:}
            \PYG{k}{return} \PYG{n+nb}{int}\PYG{p}{(}\PYG{n}{timeout\PYGZus{}str}\PYG{p}{[}\PYG{p}{:}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{p}{)}
        \PYG{k}{elif} \PYG{n}{timeout\PYGZus{}str}\PYG{o}{.}\PYG{n}{endswith}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{m}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{:}
            \PYG{k}{return} \PYG{n+nb}{int}\PYG{p}{(}\PYG{n}{timeout\PYGZus{}str}\PYG{p}{[}\PYG{p}{:}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{p}{)} \PYG{o}{*} \PYG{l+m+mi}{60}
        \PYG{k}{elif} \PYG{n}{timeout\PYGZus{}str}\PYG{o}{.}\PYG{n}{endswith}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{h}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{:}
            \PYG{k}{return} \PYG{n+nb}{int}\PYG{p}{(}\PYG{n}{timeout\PYGZus{}str}\PYG{p}{[}\PYG{p}{:}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{p}{)} \PYG{o}{*} \PYG{l+m+mi}{3600}
        \PYG{k}{else}\PYG{p}{:}
            \PYG{k}{return} \PYG{n+nb}{int}\PYG{p}{(}\PYG{n}{timeout\PYGZus{}str}\PYG{p}{)}
\end{sphinxVerbatim}


\section{Advanced Example: Health Check Task}
\label{\detokenize{custom-tasks:advanced-example-health-check-task}}
\sphinxAtStartPar
A task that performs system health checks and reports metrics:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k+kn}{import}\PYG{+w}{ }\PYG{n+nn}{json}
\PYG{k+kn}{import}\PYG{+w}{ }\PYG{n+nn}{subprocess}
\PYG{k+kn}{from}\PYG{+w}{ }\PYG{n+nn}{datetime}\PYG{+w}{ }\PYG{k+kn}{import} \PYG{n}{datetime}
\PYG{k+kn}{from}\PYG{+w}{ }\PYG{n+nn}{bansuri}\PYG{n+nn}{.}\PYG{n+nn}{base}\PYG{n+nn}{.}\PYG{n+nn}{task\PYGZus{}base}\PYG{+w}{ }\PYG{k+kn}{import} \PYG{n}{AbstractTask}
\PYG{k+kn}{from}\PYG{+w}{ }\PYG{n+nn}{bansuri}\PYG{n+nn}{.}\PYG{n+nn}{base}\PYG{n+nn}{.}\PYG{n+nn}{config}\PYG{n+nn}{.}\PYG{n+nn}{task\PYGZus{}config}\PYG{+w}{ }\PYG{k+kn}{import} \PYG{n}{TaskConfig}

\PYG{k}{class}\PYG{+w}{ }\PYG{n+nc}{HealthCheckTask}\PYG{p}{(}\PYG{n}{AbstractTask}\PYG{p}{)}\PYG{p}{:}
\PYG{+w}{    }\PYG{l+s+sd}{\PYGZdq{}\PYGZdq{}\PYGZdq{}Performs system health checks and sends metrics.\PYGZdq{}\PYGZdq{}\PYGZdq{}}

    \PYG{k}{def}\PYG{+w}{ }\PYG{n+nf+fm}{\PYGZus{}\PYGZus{}init\PYGZus{}\PYGZus{}}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{config}\PYG{p}{:} \PYG{n}{TaskConfig}\PYG{p}{)}\PYG{p}{:}
        \PYG{n+nb}{super}\PYG{p}{(}\PYG{p}{)}\PYG{o}{.}\PYG{n+nf+fm}{\PYGZus{}\PYGZus{}init\PYGZus{}\PYGZus{}}\PYG{p}{(}\PYG{n}{config}\PYG{p}{)}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{metrics} \PYG{o}{=} \PYG{p}{\PYGZob{}}\PYG{p}{\PYGZcb{}}

    \PYG{k}{def}\PYG{+w}{ }\PYG{n+nf}{run}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{)} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZgt{}} \PYG{n+nb}{int}\PYG{p}{:}
\PYG{+w}{        }\PYG{l+s+sd}{\PYGZdq{}\PYGZdq{}\PYGZdq{}Execute health checks.\PYGZdq{}\PYGZdq{}\PYGZdq{}}
        \PYG{k}{try}\PYG{p}{:}
            \PYG{c+c1}{\PYGZsh{} CPU usage}
            \PYG{n}{cpu\PYGZus{}result} \PYG{o}{=} \PYG{n}{subprocess}\PYG{o}{.}\PYG{n}{run}\PYG{p}{(}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{grep }\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{cpu }\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{ /proc/stat}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
                \PYG{n}{shell}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,}
                \PYG{n}{capture\PYGZus{}output}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,}
                \PYG{n}{text}\PYG{o}{=}\PYG{k+kc}{True}
            \PYG{p}{)}

            \PYG{c+c1}{\PYGZsh{} Memory usage}
            \PYG{n}{mem\PYGZus{}result} \PYG{o}{=} \PYG{n}{subprocess}\PYG{o}{.}\PYG{n}{run}\PYG{p}{(}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{free \PYGZhy{}b | grep Mem}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
                \PYG{n}{shell}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,}
                \PYG{n}{capture\PYGZus{}output}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,}
                \PYG{n}{text}\PYG{o}{=}\PYG{k+kc}{True}
            \PYG{p}{)}

            \PYG{c+c1}{\PYGZsh{} Disk usage}
            \PYG{n}{disk\PYGZus{}result} \PYG{o}{=} \PYG{n}{subprocess}\PYG{o}{.}\PYG{n}{run}\PYG{p}{(}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{df \PYGZhy{}B1 /}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
                \PYG{n}{shell}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,}
                \PYG{n}{capture\PYGZus{}output}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,}
                \PYG{n}{text}\PYG{o}{=}\PYG{k+kc}{True}
            \PYG{p}{)}

            \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{metrics} \PYG{o}{=} \PYG{p}{\PYGZob{}}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{timestamp}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{datetime}\PYG{o}{.}\PYG{n}{now}\PYG{p}{(}\PYG{p}{)}\PYG{o}{.}\PYG{n}{isoformat}\PYG{p}{(}\PYG{p}{)}\PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{cpu}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{cpu\PYGZus{}result}\PYG{o}{.}\PYG{n}{stdout}\PYG{o}{.}\PYG{n}{strip}\PYG{p}{(}\PYG{p}{)}\PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{memory}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{mem\PYGZus{}result}\PYG{o}{.}\PYG{n}{stdout}\PYG{o}{.}\PYG{n}{strip}\PYG{p}{(}\PYG{p}{)}\PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{disk}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{disk\PYGZus{}result}\PYG{o}{.}\PYG{n}{stdout}\PYG{o}{.}\PYG{n}{strip}\PYG{p}{(}\PYG{p}{)}
            \PYG{p}{\PYGZcb{}}

            \PYG{c+c1}{\PYGZsh{} Send metrics to monitoring system}
            \PYG{k}{return} \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{\PYGZus{}send\PYGZus{}metrics}\PYG{p}{(}\PYG{p}{)}

        \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{e}\PYG{p}{:}
            \PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+sa}{f}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Health check failed: }\PYG{l+s+si}{\PYGZob{}}\PYG{n}{e}\PYG{l+s+si}{\PYGZcb{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
            \PYG{k}{return} \PYG{l+m+mi}{1}

    \PYG{k}{def}\PYG{+w}{ }\PYG{n+nf}{stop}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{)} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZgt{}} \PYG{k+kc}{None}\PYG{p}{:}
\PYG{+w}{        }\PYG{l+s+sd}{\PYGZdq{}\PYGZdq{}\PYGZdq{}Clean up health check task.\PYGZdq{}\PYGZdq{}\PYGZdq{}}
        \PYG{k}{pass}

    \PYG{k}{def}\PYG{+w}{ }\PYG{n+nf}{\PYGZus{}send\PYGZus{}metrics}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{)} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZgt{}} \PYG{n+nb}{int}\PYG{p}{:}
\PYG{+w}{        }\PYG{l+s+sd}{\PYGZdq{}\PYGZdq{}\PYGZdq{}Send metrics to a monitoring backend.\PYGZdq{}\PYGZdq{}\PYGZdq{}}
        \PYG{c+c1}{\PYGZsh{} This would integrate with your monitoring system}
        \PYG{c+c1}{\PYGZsh{} (Prometheus, Grafana, InfluxDB, etc.)}
        \PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{json}\PYG{o}{.}\PYG{n}{dumps}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{metrics}\PYG{p}{)}\PYG{p}{)}
        \PYG{k}{return} \PYG{l+m+mi}{0}
\end{sphinxVerbatim}


\section{Configuration for Custom Tasks}
\label{\detokenize{custom-tasks:configuration-for-custom-tasks}}
\sphinxAtStartPar
When using custom tasks, you need to:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Set \textasciigrave{}\textasciigrave{}no\sphinxhyphen{}interface\textasciigrave{}\textasciigrave{} to \textasciigrave{}\textasciigrave{}true\textasciigrave{}\textasciigrave{}} in the task configuration

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Reference the module path} in the command field (Python import path)

\end{enumerate}


\subsection{Example Configuration}
\label{\detokenize{custom-tasks:example-configuration}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}version\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}1.0\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}scripts\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{p}{[}
\PYG{+w}{    }\PYG{p}{\PYGZob{}}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}custom\PYGZhy{}logging\PYGZhy{}task\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}myapp.tasks:LoggingTask\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}no\PYGZhy{}interface\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{k+kc}{true}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}timer\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}3600\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}description\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Runs custom logging task every hour\PYGZdq{}}
\PYG{+w}{    }\PYG{p}{\PYGZcb{},}
\PYG{+w}{    }\PYG{p}{\PYGZob{}}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}postgres\PYGZhy{}backup\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}myapp.tasks:PostgresBackupTask\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}no\PYGZhy{}interface\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{k+kc}{true}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}timer\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}86400\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}timeout\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}2h\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}on\PYGZhy{}fail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}restart\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}times\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{2}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}description\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Daily PostgreSQL backup with retry\PYGZdq{}}
\PYG{+w}{    }\PYG{p}{\PYGZcb{}}
\PYG{+w}{  }\PYG{p}{]}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\section{Best Practices}
\label{\detokenize{custom-tasks:best-practices}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Exception Handling}: Always wrap your logic in try\sphinxhyphen{}except blocks

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Return Codes}: Use 0 for success, non\sphinxhyphen{}zero for failure

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Graceful Shutdown}: Implement proper cleanup in the \sphinxcode{\sphinxupquote{stop()}} method

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Logging}: Use standard logging for debugging and error tracking

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Timeout Support}: Parse and respect the timeout configuration

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Resource Cleanup}: Close files, connections, and processes properly

\end{enumerate}


\subsection{Example with Logging}
\label{\detokenize{custom-tasks:example-with-logging}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k+kn}{import}\PYG{+w}{ }\PYG{n+nn}{logging}
\PYG{k+kn}{from}\PYG{+w}{ }\PYG{n+nn}{bansuri}\PYG{n+nn}{.}\PYG{n+nn}{base}\PYG{n+nn}{.}\PYG{n+nn}{task\PYGZus{}base}\PYG{+w}{ }\PYG{k+kn}{import} \PYG{n}{AbstractTask}

\PYG{k}{class}\PYG{+w}{ }\PYG{n+nc}{BestPracticeTask}\PYG{p}{(}\PYG{n}{AbstractTask}\PYG{p}{)}\PYG{p}{:}
    \PYG{k}{def}\PYG{+w}{ }\PYG{n+nf+fm}{\PYGZus{}\PYGZus{}init\PYGZus{}\PYGZus{}}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{config}\PYG{p}{)}\PYG{p}{:}
        \PYG{n+nb}{super}\PYG{p}{(}\PYG{p}{)}\PYG{o}{.}\PYG{n+nf+fm}{\PYGZus{}\PYGZus{}init\PYGZus{}\PYGZus{}}\PYG{p}{(}\PYG{n}{config}\PYG{p}{)}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{logger} \PYG{o}{=} \PYG{n}{logging}\PYG{o}{.}\PYG{n}{getLogger}\PYG{p}{(}\PYG{n}{config}\PYG{o}{.}\PYG{n}{identification}\PYG{o}{.}\PYG{n}{name}\PYG{p}{)}

    \PYG{k}{def}\PYG{+w}{ }\PYG{n+nf}{run}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{)} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZgt{}} \PYG{n+nb}{int}\PYG{p}{:}
        \PYG{k}{try}\PYG{p}{:}
            \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{logger}\PYG{o}{.}\PYG{n}{info}\PYG{p}{(}\PYG{l+s+sa}{f}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Starting task: }\PYG{l+s+si}{\PYGZob{}}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{config}\PYG{o}{.}\PYG{n}{identification}\PYG{o}{.}\PYG{n}{name}\PYG{l+s+si}{\PYGZcb{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
            \PYG{c+c1}{\PYGZsh{} Do work}
            \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{logger}\PYG{o}{.}\PYG{n}{info}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Task completed successfully}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
            \PYG{k}{return} \PYG{l+m+mi}{0}
        \PYG{k}{except} \PYG{n+ne}{Exception} \PYG{k}{as} \PYG{n}{e}\PYG{p}{:}
            \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{logger}\PYG{o}{.}\PYG{n}{error}\PYG{p}{(}\PYG{l+s+sa}{f}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Task failed: }\PYG{l+s+si}{\PYGZob{}}\PYG{n}{e}\PYG{l+s+si}{\PYGZcb{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{exc\PYGZus{}info}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}
            \PYG{k}{return} \PYG{l+m+mi}{1}

    \PYG{k}{def}\PYG{+w}{ }\PYG{n+nf}{stop}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{)} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZgt{}} \PYG{k+kc}{None}\PYG{p}{:}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{logger}\PYG{o}{.}\PYG{n}{info}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Stopping task}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}


\section{Testing Custom Tasks}
\label{\detokenize{custom-tasks:testing-custom-tasks}}
\sphinxAtStartPar
Example test for a custom task:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k+kn}{import}\PYG{+w}{ }\PYG{n+nn}{unittest}
\PYG{k+kn}{from}\PYG{+w}{ }\PYG{n+nn}{myapp}\PYG{n+nn}{.}\PYG{n+nn}{tasks}\PYG{+w}{ }\PYG{k+kn}{import} \PYG{n}{LoggingTask}
\PYG{k+kn}{from}\PYG{+w}{ }\PYG{n+nn}{bansuri}\PYG{n+nn}{.}\PYG{n+nn}{base}\PYG{n+nn}{.}\PYG{n+nn}{config}\PYG{n+nn}{.}\PYG{n+nn}{task\PYGZus{}config}\PYG{+w}{ }\PYG{k+kn}{import} \PYG{n}{TaskConfig}
\PYG{k+kn}{from}\PYG{+w}{ }\PYG{n+nn}{bansuri}\PYG{n+nn}{.}\PYG{n+nn}{base}\PYG{n+nn}{.}\PYG{n+nn}{config}\PYG{n+nn}{.}\PYG{n+nn}{proc\PYGZus{}id\PYGZus{}config}\PYG{+w}{ }\PYG{k+kn}{import} \PYG{n}{IdentificationConfig}

\PYG{k}{class}\PYG{+w}{ }\PYG{n+nc}{TestLoggingTask}\PYG{p}{(}\PYG{n}{unittest}\PYG{o}{.}\PYG{n}{TestCase}\PYG{p}{)}\PYG{p}{:}
    \PYG{k}{def}\PYG{+w}{ }\PYG{n+nf}{setUp}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{)}\PYG{p}{:}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{config} \PYG{o}{=} \PYG{n}{TaskConfig}\PYG{p}{(}
            \PYG{n}{identification}\PYG{o}{=}\PYG{n}{IdentificationConfig}\PYG{p}{(}
                \PYG{n}{name}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{test\PYGZhy{}task}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
                \PYG{n}{command}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{test}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{p}{)}
        \PYG{p}{)}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{task} \PYG{o}{=} \PYG{n}{LoggingTask}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{config}\PYG{p}{)}

    \PYG{k}{def}\PYG{+w}{ }\PYG{n+nf}{test\PYGZus{}run\PYGZus{}success}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{)}\PYG{p}{:}
        \PYG{n}{result} \PYG{o}{=} \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{task}\PYG{o}{.}\PYG{n}{run}\PYG{p}{(}\PYG{p}{)}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{assertEqual}\PYG{p}{(}\PYG{n}{result}\PYG{p}{,} \PYG{l+m+mi}{0}\PYG{p}{)}

    \PYG{k}{def}\PYG{+w}{ }\PYG{n+nf}{test\PYGZus{}stop}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{)}\PYG{p}{:}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{task}\PYG{o}{.}\PYG{n}{stop}\PYG{p}{(}\PYG{p}{)}  \PYG{c+c1}{\PYGZsh{} Should not raise}

\PYG{k}{if} \PYG{n+nv+vm}{\PYGZus{}\PYGZus{}name\PYGZus{}\PYGZus{}} \PYG{o}{==} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZus{}\PYGZus{}main\PYGZus{}\PYGZus{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}
    \PYG{n}{unittest}\PYG{o}{.}\PYG{n}{main}\PYG{p}{(}\PYG{p}{)}
\end{sphinxVerbatim}


\section{Integration with Bansuri}
\label{\detokenize{custom-tasks:integration-with-bansuri}}
\sphinxAtStartPar
Custom tasks are automatically detected and loaded by the \sphinxcode{\sphinxupquote{TaskRunner}} when:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{no\sphinxhyphen{}interface}} is set to \sphinxcode{\sphinxupquote{true}}

\item {} 
\sphinxAtStartPar
The \sphinxcode{\sphinxupquote{command}} field contains a valid Python module path and class name (format: \sphinxcode{\sphinxupquote{module.path:ClassName}})

\end{enumerate}

\sphinxAtStartPar
The system will:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Import the module

\item {} 
\sphinxAtStartPar
Instantiate the class with the \sphinxcode{\sphinxupquote{TaskConfig}}

\item {} 
\sphinxAtStartPar
Call \sphinxcode{\sphinxupquote{run()}} in a thread

\item {} 
\sphinxAtStartPar
Call \sphinxcode{\sphinxupquote{stop()}} when the orchestrator shuts down or the task is removed

\end{enumerate}

\sphinxAtStartPar
See {\hyperref[\detokenize{notifications::doc}]{\sphinxcrossref{\DUrole{doc}{Notifications}}}} for how failures are handled and notifications are sent.

\sphinxstepscope


\chapter{Deployment Guide}
\label{\detokenize{deployment:deployment-guide}}\label{\detokenize{deployment::doc}}
\sphinxAtStartPar
This guide covers deployment strategies for production use of Bansuri.


\section{Systemd Service Setup}
\label{\detokenize{deployment:systemd-service-setup}}

\subsection{Running as a Systemd Service}
\label{\detokenize{deployment:running-as-a-systemd-service}}
\sphinxAtStartPar
Create a systemd unit file at \sphinxcode{\sphinxupquote{/etc/systemd/system/bansuri.service}}:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{[Unit]}
\PYG{n+na}{Description}\PYG{o}{=}\PYG{l+s}{Bansuri Task Orchestrator}
\PYG{n+na}{After}\PYG{o}{=}\PYG{l+s}{network.target}
\PYG{n+na}{Wants}\PYG{o}{=}\PYG{l+s}{network\PYGZhy{}online.target}

\PYG{k}{[Service]}
\PYG{n+na}{Type}\PYG{o}{=}\PYG{l+s}{simple}
\PYG{n+na}{User}\PYG{o}{=}\PYG{l+s}{bansuri}
\PYG{n+na}{Group}\PYG{o}{=}\PYG{l+s}{bansuri}
\PYG{n+na}{WorkingDirectory}\PYG{o}{=}\PYG{l+s}{/opt/bansuri}
\PYG{n+na}{ExecStart}\PYG{o}{=}\PYG{l+s}{/opt/bansuri/venv/bin/python \PYGZhy{}m bansuri}

\PYG{c+c1}{\PYGZsh{} Restart policy}
\PYG{n+na}{Restart}\PYG{o}{=}\PYG{l+s}{on\PYGZhy{}failure}
\PYG{n+na}{RestartSec}\PYG{o}{=}\PYG{l+s}{10}

\PYG{c+c1}{\PYGZsh{} Resource limits}
\PYG{n+na}{MemoryLimit}\PYG{o}{=}\PYG{l+s}{1G}
\PYG{n+na}{CPUQuota}\PYG{o}{=}\PYG{l+s}{80\PYGZpc{}}

\PYG{c+c1}{\PYGZsh{} Logging}
\PYG{n+na}{StandardOutput}\PYG{o}{=}\PYG{l+s}{journal}
\PYG{n+na}{StandardError}\PYG{o}{=}\PYG{l+s}{journal}
\PYG{n+na}{SyslogIdentifier}\PYG{o}{=}\PYG{l+s}{bansuri}

\PYG{c+c1}{\PYGZsh{} Environment}
\PYG{n+na}{Environment}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{BANSURI\PYGZus{}ENV=production}\PYG{l+s}{\PYGZdq{}}
\PYG{n+na}{Environment}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{BANSURI\PYGZus{}LOG\PYGZus{}LEVEL=INFO}\PYG{l+s}{\PYGZdq{}}

\PYG{k}{[Install]}
\PYG{n+na}{WantedBy}\PYG{o}{=}\PYG{l+s}{multi\PYGZhy{}user.target}
\end{sphinxVerbatim}

\sphinxAtStartPar
Enable and start the service:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
sudo\PYG{+w}{ }systemctl\PYG{+w}{ }daemon\PYGZhy{}reload
sudo\PYG{+w}{ }systemctl\PYG{+w}{ }\PYG{n+nb}{enable}\PYG{+w}{ }bansuri
sudo\PYG{+w}{ }systemctl\PYG{+w}{ }start\PYG{+w}{ }bansuri
sudo\PYG{+w}{ }systemctl\PYG{+w}{ }status\PYG{+w}{ }bansuri
\end{sphinxVerbatim}

\sphinxAtStartPar
View logs:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
journalctl\PYG{+w}{ }\PYGZhy{}u\PYG{+w}{ }bansuri\PYG{+w}{ }\PYGZhy{}f
\end{sphinxVerbatim}


\section{Docker Deployment}
\label{\detokenize{deployment:docker-deployment}}

\subsection{Dockerfile}
\label{\detokenize{deployment:dockerfile}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{FROM}\PYG{+w}{ }\PYG{l+s}{python:3.11\PYGZhy{}slim}

\PYG{c}{\PYGZsh{} Create bansuri user}
\PYG{k}{RUN}\PYG{+w}{ }useradd\PYG{+w}{ }\PYGZhy{}m\PYG{+w}{ }\PYGZhy{}u\PYG{+w}{ }\PYG{l+m}{1000}\PYG{+w}{ }bansuri

\PYG{c}{\PYGZsh{} Install dependencies}
\PYG{k}{RUN}\PYG{+w}{ }apt\PYGZhy{}get\PYG{+w}{ }update\PYG{+w}{ }\PYG{o}{\PYGZam{}\PYGZam{}}\PYG{+w}{ }apt\PYGZhy{}get\PYG{+w}{ }install\PYG{+w}{ }\PYGZhy{}y\PYG{+w}{ }\PYG{l+s+se}{\PYGZbs{}}
\PYG{+w}{    }git\PYG{+w}{ }\PYG{l+s+se}{\PYGZbs{}}
\PYG{+w}{    }curl\PYG{+w}{ }\PYG{l+s+se}{\PYGZbs{}}
\PYG{+w}{    }\PYG{o}{\PYGZam{}\PYGZam{}}\PYG{+w}{ }rm\PYG{+w}{ }\PYGZhy{}rf\PYG{+w}{ }/var/lib/apt/lists/*

\PYG{c}{\PYGZsh{} Install Bansuri}
\PYG{k}{RUN}\PYG{+w}{ }mkdir\PYG{+w}{ }\PYGZhy{}p\PYG{+w}{ }/opt/bansuri\PYG{+w}{ }\PYG{o}{\PYGZam{}\PYGZam{}}\PYG{+w}{ }chown\PYG{+w}{ }bansuri:bansuri\PYG{+w}{ }/opt/bansuri
\PYG{k}{WORKDIR}\PYG{+w}{ }\PYG{l+s}{/opt/bansuri}

\PYG{k}{COPY}\PYG{+w}{ }\PYGZhy{}\PYGZhy{}chown\PYG{o}{=}bansuri:bansuri\PYG{+w}{ }.\PYG{+w}{ }.
\PYG{k}{RUN}\PYG{+w}{ }pip\PYG{+w}{ }install\PYG{+w}{ }\PYGZhy{}\PYGZhy{}no\PYGZhy{}cache\PYGZhy{}dir\PYG{+w}{ }\PYGZhy{}e\PYG{+w}{ }.

\PYG{c}{\PYGZsh{} Create log directory}
\PYG{k}{RUN}\PYG{+w}{ }mkdir\PYG{+w}{ }\PYGZhy{}p\PYG{+w}{ }/var/log/bansuri\PYG{+w}{ }\PYG{o}{\PYGZam{}\PYGZam{}}\PYG{+w}{ }chown\PYG{+w}{ }bansuri:bansuri\PYG{+w}{ }/var/log/bansuri

\PYG{k}{USER}\PYG{+w}{ }\PYG{l+s}{bansuri}

\PYG{c}{\PYGZsh{} Health check}
\PYG{k}{HEALTHCHECK}\PYG{+w}{ }\PYGZhy{}\PYGZhy{}interval\PYG{o}{=}30s\PYG{+w}{ }\PYGZhy{}\PYGZhy{}timeout\PYG{o}{=}10s\PYG{+w}{ }\PYGZhy{}\PYGZhy{}start\PYGZhy{}period\PYG{o}{=}40s\PYG{+w}{ }\PYGZhy{}\PYGZhy{}retries\PYG{o}{=}\PYG{l+m}{3}\PYG{+w}{ }\PYG{l+s+se}{\PYGZbs{}}
\PYG{+w}{    }CMD\PYG{+w}{ }python\PYG{+w}{ }\PYGZhy{}c\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}import sys; sys.exit(0)\PYGZdq{}}\PYG{+w}{ }\PYG{o}{||}\PYG{+w}{ }\PYG{n+nb}{exit}\PYG{+w}{ }\PYG{l+m}{1}

\PYG{k}{CMD}\PYG{+w}{ }\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}python\PYGZdq{}}\PYG{p}{,}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}\PYGZhy{}m\PYGZdq{}}\PYG{p}{,}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}bansuri\PYGZdq{}}\PYG{p}{]}
\end{sphinxVerbatim}


\subsection{Docker Compose}
\label{\detokenize{deployment:docker-compose}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nt}{version}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s}{\PYGZsq{}}\PYG{l+s}{3.8}\PYG{l+s}{\PYGZsq{}}

\PYG{n+nt}{services}\PYG{p}{:}
\PYG{+w}{  }\PYG{n+nt}{bansuri}\PYG{p}{:}
\PYG{+w}{    }\PYG{n+nt}{build}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{.}
\PYG{+w}{    }\PYG{n+nt}{container\PYGZus{}name}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{bansuri}
\PYG{+w}{    }\PYG{n+nt}{user}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{bansuri}
\PYG{+w}{    }\PYG{n+nt}{volumes}\PYG{p}{:}
\PYG{+w}{      }\PYG{p+pIndicator}{\PYGZhy{}}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{./scripts.json:/opt/bansuri/scripts.json:ro}
\PYG{+w}{      }\PYG{p+pIndicator}{\PYGZhy{}}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{./logs:/var/log/bansuri}
\PYG{+w}{      }\PYG{p+pIndicator}{\PYGZhy{}}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{/var/run/docker.sock:/var/run/docker.sock:ro}
\PYG{+w}{    }\PYG{n+nt}{environment}\PYG{p}{:}
\PYG{+w}{      }\PYG{p+pIndicator}{\PYGZhy{}}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{BANSURI\PYGZus{}ENV=production}
\PYG{+w}{      }\PYG{p+pIndicator}{\PYGZhy{}}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{BANSURI\PYGZus{}LOG\PYGZus{}LEVEL=INFO}
\PYG{+w}{    }\PYG{n+nt}{restart}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{unless\PYGZhy{}stopped}
\PYG{+w}{    }\PYG{n+nt}{logging}\PYG{p}{:}
\PYG{+w}{      }\PYG{n+nt}{driver}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{json\PYGZhy{}file}\PYG{l+s}{\PYGZdq{}}
\PYG{+w}{      }\PYG{n+nt}{options}\PYG{p}{:}
\PYG{+w}{        }\PYG{n+nt}{max\PYGZhy{}size}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{10m}\PYG{l+s}{\PYGZdq{}}
\PYG{+w}{        }\PYG{n+nt}{max\PYGZhy{}file}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{3}\PYG{l+s}{\PYGZdq{}}
\end{sphinxVerbatim}


\section{Kubernetes Deployment}
\label{\detokenize{deployment:kubernetes-deployment}}

\subsection{ConfigMap for Configuration}
\label{\detokenize{deployment:configmap-for-configuration}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nt}{apiVersion}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{v1}
\PYG{n+nt}{kind}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{ConfigMap}
\PYG{n+nt}{metadata}\PYG{p}{:}
\PYG{+w}{  }\PYG{n+nt}{name}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{bansuri\PYGZhy{}config}
\PYG{+w}{  }\PYG{n+nt}{namespace}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{default}
\PYG{n+nt}{data}\PYG{p}{:}
\PYG{+w}{  }\PYG{n+nt}{scripts.json}\PYG{p}{:}\PYG{+w}{ }\PYG{p+pIndicator}{|}
\PYG{+w}{    }\PYG{n+no}{\PYGZob{}}
\PYG{+w}{      }\PYG{n+no}{\PYGZdq{}version\PYGZdq{}: \PYGZdq{}1.0\PYGZdq{},}
\PYG{+w}{      }\PYG{n+no}{\PYGZdq{}notify\PYGZus{}command\PYGZdq{}: \PYGZdq{}curl \PYGZhy{}X POST https://alerts.example.com/notify\PYGZdq{},}
\PYG{+w}{      }\PYG{n+no}{\PYGZdq{}scripts\PYGZdq{}: [}
\PYG{+w}{        }\PYG{n+no}{\PYGZob{}}
\PYG{+w}{          }\PYG{n+no}{\PYGZdq{}name\PYGZdq{}: \PYGZdq{}health\PYGZhy{}check\PYGZdq{},}
\PYG{+w}{          }\PYG{n+no}{\PYGZdq{}command\PYGZdq{}: \PYGZdq{}/usr/local/bin/health\PYGZhy{}check.sh\PYGZdq{},}
\PYG{+w}{          }\PYG{n+no}{\PYGZdq{}timer\PYGZdq{}: \PYGZdq{}60\PYGZdq{},}
\PYG{+w}{          }\PYG{n+no}{\PYGZdq{}timeout\PYGZdq{}: \PYGZdq{}30s\PYGZdq{}}
\PYG{+w}{        }\PYG{n+no}{\PYGZcb{}}
\PYG{+w}{      }\PYG{n+no}{]}
\PYG{+w}{    }\PYG{n+no}{\PYGZcb{}}
\end{sphinxVerbatim}


\subsection{Deployment}
\label{\detokenize{deployment:deployment}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nt}{apiVersion}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{apps/v1}
\PYG{n+nt}{kind}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{Deployment}
\PYG{n+nt}{metadata}\PYG{p}{:}
\PYG{+w}{  }\PYG{n+nt}{name}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{bansuri}
\PYG{+w}{  }\PYG{n+nt}{namespace}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{default}
\PYG{n+nt}{spec}\PYG{p}{:}
\PYG{+w}{  }\PYG{n+nt}{replicas}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{1}
\PYG{+w}{  }\PYG{n+nt}{selector}\PYG{p}{:}
\PYG{+w}{    }\PYG{n+nt}{matchLabels}\PYG{p}{:}
\PYG{+w}{      }\PYG{n+nt}{app}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{bansuri}
\PYG{+w}{  }\PYG{n+nt}{template}\PYG{p}{:}
\PYG{+w}{    }\PYG{n+nt}{metadata}\PYG{p}{:}
\PYG{+w}{      }\PYG{n+nt}{labels}\PYG{p}{:}
\PYG{+w}{        }\PYG{n+nt}{app}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{bansuri}
\PYG{+w}{    }\PYG{n+nt}{spec}\PYG{p}{:}
\PYG{+w}{      }\PYG{n+nt}{containers}\PYG{p}{:}
\PYG{+w}{      }\PYG{p+pIndicator}{\PYGZhy{}}\PYG{+w}{ }\PYG{n+nt}{name}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{bansuri}
\PYG{+w}{        }\PYG{n+nt}{image}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{myregistry.azurecr.io/bansuri:latest}
\PYG{+w}{        }\PYG{n+nt}{imagePullPolicy}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{Always}
\PYG{+w}{        }\PYG{n+nt}{resources}\PYG{p}{:}
\PYG{+w}{          }\PYG{n+nt}{limits}\PYG{p}{:}
\PYG{+w}{            }\PYG{n+nt}{memory}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{1Gi}\PYG{l+s}{\PYGZdq{}}
\PYG{+w}{            }\PYG{n+nt}{cpu}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{500m}\PYG{l+s}{\PYGZdq{}}
\PYG{+w}{          }\PYG{n+nt}{requests}\PYG{p}{:}
\PYG{+w}{            }\PYG{n+nt}{memory}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{512Mi}\PYG{l+s}{\PYGZdq{}}
\PYG{+w}{            }\PYG{n+nt}{cpu}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{250m}\PYG{l+s}{\PYGZdq{}}
\PYG{+w}{        }\PYG{n+nt}{env}\PYG{p}{:}
\PYG{+w}{        }\PYG{p+pIndicator}{\PYGZhy{}}\PYG{+w}{ }\PYG{n+nt}{name}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{BANSURI\PYGZus{}ENV}
\PYG{+w}{          }\PYG{n+nt}{value}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{production}\PYG{l+s}{\PYGZdq{}}
\PYG{+w}{        }\PYG{p+pIndicator}{\PYGZhy{}}\PYG{+w}{ }\PYG{n+nt}{name}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{BANSURI\PYGZus{}LOG\PYGZus{}LEVEL}
\PYG{+w}{          }\PYG{n+nt}{value}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{INFO}\PYG{l+s}{\PYGZdq{}}
\PYG{+w}{        }\PYG{n+nt}{volumeMounts}\PYG{p}{:}
\PYG{+w}{        }\PYG{p+pIndicator}{\PYGZhy{}}\PYG{+w}{ }\PYG{n+nt}{name}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{config}
\PYG{+w}{          }\PYG{n+nt}{mountPath}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{/opt/bansuri/scripts.json}
\PYG{+w}{          }\PYG{n+nt}{subPath}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{scripts.json}
\PYG{+w}{        }\PYG{p+pIndicator}{\PYGZhy{}}\PYG{+w}{ }\PYG{n+nt}{name}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{logs}
\PYG{+w}{          }\PYG{n+nt}{mountPath}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{/var/log/bansuri}
\PYG{+w}{        }\PYG{n+nt}{livenessProbe}\PYG{p}{:}
\PYG{+w}{          }\PYG{n+nt}{exec}\PYG{p}{:}
\PYG{+w}{            }\PYG{n+nt}{command}\PYG{p}{:}
\PYG{+w}{            }\PYG{p+pIndicator}{\PYGZhy{}}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{python}
\PYG{+w}{            }\PYG{p+pIndicator}{\PYGZhy{}}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZhy{}c}
\PYG{+w}{            }\PYG{p+pIndicator}{\PYGZhy{}}\PYG{+w}{ }\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{import}\PYG{n+nv}{ }\PYG{l+s}{sys;}\PYG{n+nv}{ }\PYG{l+s}{sys.exit(0)}\PYG{l+s}{\PYGZdq{}}
\PYG{+w}{          }\PYG{n+nt}{initialDelaySeconds}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{30}
\PYG{+w}{          }\PYG{n+nt}{periodSeconds}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{10}
\PYG{+w}{      }\PYG{n+nt}{volumes}\PYG{p}{:}
\PYG{+w}{      }\PYG{p+pIndicator}{\PYGZhy{}}\PYG{+w}{ }\PYG{n+nt}{name}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{config}
\PYG{+w}{        }\PYG{n+nt}{configMap}\PYG{p}{:}
\PYG{+w}{          }\PYG{n+nt}{name}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{bansuri\PYGZhy{}config}
\PYG{+w}{      }\PYG{p+pIndicator}{\PYGZhy{}}\PYG{+w}{ }\PYG{n+nt}{name}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{logs}
\PYG{+w}{        }\PYG{n+nt}{emptyDir}\PYG{p}{:}\PYG{+w}{ }\PYG{p+pIndicator}{\PYGZob{}}\PYG{p+pIndicator}{\PYGZcb{}}
\PYG{+w}{      }\PYG{n+nt}{serviceAccountName}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{bansuri}
\end{sphinxVerbatim}


\subsection{ServiceAccount}
\label{\detokenize{deployment:serviceaccount}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nt}{apiVersion}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{v1}
\PYG{n+nt}{kind}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{ServiceAccount}
\PYG{n+nt}{metadata}\PYG{p}{:}
\PYG{+w}{  }\PYG{n+nt}{name}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{bansuri}
\PYG{+w}{  }\PYG{n+nt}{namespace}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{default}
\end{sphinxVerbatim}


\section{Production Checklist}
\label{\detokenize{deployment:production-checklist}}
\sphinxAtStartPar
Before deploying to production, verify:

\sphinxAtStartPar
\sphinxstylestrong{Configuration}
\begin{itemize}
\item {} 
\sphinxAtStartPar
‚òê All task commands are absolute paths

\item {} 
\sphinxAtStartPar
‚òê Working directories are correctly specified

\item {} 
\sphinxAtStartPar
‚òê Timeouts are realistic for your infrastructure

\item {} 
\sphinxAtStartPar
‚òê Notification endpoints are configured and tested

\item {} 
\sphinxAtStartPar
‚òê Log directories exist and are writable

\end{itemize}

\sphinxAtStartPar
\sphinxstylestrong{Security}
\begin{itemize}
\item {} 
\sphinxAtStartPar
‚òê Run as non\sphinxhyphen{}root user

\item {} 
\sphinxAtStartPar
‚òê Use restrictive file permissions (600\sphinxhyphen{}755)

\item {} 
\sphinxAtStartPar
‚òê Verify all scripts are from trusted sources

\item {} 
\sphinxAtStartPar
‚òê Use secrets management for credentials

\item {} 
\sphinxAtStartPar
‚òê Enable audit logging

\end{itemize}

\sphinxAtStartPar
\sphinxstylestrong{Monitoring}
\begin{itemize}
\item {} 
\sphinxAtStartPar
‚òê Set up log aggregation (ELK, Splunk, etc.)

\item {} 
\sphinxAtStartPar
‚òê Configure alerting for task failures

\item {} 
\sphinxAtStartPar
‚òê Monitor system resources (CPU, memory, disk)

\item {} 
\sphinxAtStartPar
‚òê Set up health checks for Bansuri itself

\item {} 
\sphinxAtStartPar
‚òê Create dashboards for task execution metrics

\end{itemize}

\sphinxAtStartPar
\sphinxstylestrong{Resilience}
\begin{itemize}
\item {} 
\sphinxAtStartPar
‚òê Test failure scenarios (network, timeout, out of memory)

\item {} 
\sphinxAtStartPar
‚òê Verify restart policies

\item {} 
\sphinxAtStartPar
‚òê Test graceful shutdown (SIGTERM handling)

\item {} 
\sphinxAtStartPar
‚òê Ensure log rotation is working

\item {} 
\sphinxAtStartPar
‚òê Validate recovery time objectives

\end{itemize}

\sphinxAtStartPar
\sphinxstylestrong{Documentation}
\begin{itemize}
\item {} 
\sphinxAtStartPar
‚òê Document all tasks and their purpose

\item {} 
\sphinxAtStartPar
‚òê Document task dependencies

\item {} 
\sphinxAtStartPar
‚òê Maintain runbooks for common issues

\item {} 
\sphinxAtStartPar
‚òê Document escalation procedures

\item {} 
\sphinxAtStartPar
‚òê Keep version history of configurations

\end{itemize}


\section{Backup and Recovery}
\label{\detokenize{deployment:backup-and-recovery}}

\subsection{Configuration Backup}
\label{\detokenize{deployment:configuration-backup}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Backup scripts.json with timestamp}
cp\PYG{+w}{ }scripts.json\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{scripts.json.backup.}\PYG{k}{\PYGZdl{}(}date\PYG{+w}{ }+\PYGZpc{}Y\PYGZpc{}m\PYGZpc{}d\PYGZus{}\PYGZpc{}H\PYGZpc{}M\PYGZpc{}S\PYG{k}{)}\PYG{l+s+s2}{\PYGZdq{}}

\PYG{c+c1}{\PYGZsh{} Keep last 30 days of backups}
find\PYG{+w}{ }.\PYG{+w}{ }\PYGZhy{}name\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}scripts.json.backup.*\PYGZdq{}}\PYG{+w}{ }\PYGZhy{}mtime\PYG{+w}{ }+30\PYG{+w}{ }\PYGZhy{}delete
\end{sphinxVerbatim}


\subsection{Log Backup}
\label{\detokenize{deployment:log-backup}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Archive logs older than 7 days}
find\PYG{+w}{ }/var/log/bansuri\PYG{+w}{ }\PYGZhy{}name\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}*.log\PYGZdq{}}\PYG{+w}{ }\PYGZhy{}mtime\PYG{+w}{ }+7\PYG{+w}{ }\PYGZhy{}exec\PYG{+w}{ }gzip\PYG{+w}{ }\PYG{o}{\PYGZob{}}\PYG{o}{\PYGZcb{}}\PYG{+w}{ }\PYG{l+s+se}{\PYGZbs{};}
find\PYG{+w}{ }/var/log/bansuri\PYG{+w}{ }\PYGZhy{}name\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}*.log.gz\PYGZdq{}}\PYG{+w}{ }\PYGZhy{}mtime\PYG{+w}{ }+30\PYG{+w}{ }\PYGZhy{}delete
\end{sphinxVerbatim}


\subsection{Recovery Procedure}
\label{\detokenize{deployment:recovery-procedure}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Stop Bansuri: \sphinxcode{\sphinxupquote{systemctl stop bansuri}}

\item {} 
\sphinxAtStartPar
Restore configuration: \sphinxcode{\sphinxupquote{cp scripts.json.backup.* scripts.json}}

\item {} 
\sphinxAtStartPar
Verify configuration: {\color{red}\bfseries{}\textasciigrave{}\textasciigrave{}}python \sphinxhyphen{}c ‚Äúfrom bansuri.base.config\_manager import BansuriConfig; BansuriConfig.load\_from\_file(‚Äòscripts.json‚Äô)‚Äù\textasciigrave{}

\item {} 
\sphinxAtStartPar
Start Bansuri: \sphinxcode{\sphinxupquote{systemctl start bansuri}}

\item {} 
\sphinxAtStartPar
Verify status: \sphinxcode{\sphinxupquote{systemctl status bansuri}}

\end{enumerate}


\section{Scaling Considerations}
\label{\detokenize{deployment:scaling-considerations}}

\subsection{Single Instance}
\label{\detokenize{deployment:single-instance}}\begin{itemize}
\item {} 
\sphinxAtStartPar
Suitable for \textless{} 100 concurrent tasks

\item {} 
\sphinxAtStartPar
Sufficient for \textless{} 1000 events per minute

\item {} 
\sphinxAtStartPar
Simple deployment and management

\end{itemize}


\subsection{Multiple Instances}
\label{\detokenize{deployment:multiple-instances}}
\sphinxAtStartPar
For larger deployments:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Task Distribution}: Partition tasks across instances

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Configuration Sync}: Use centralized config storage (Git, S3, etc.)

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Log Aggregation}: Send logs to centralized location

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Health Monitoring}: Monitor all instances

\end{enumerate}

\sphinxAtStartPar
Example multi\sphinxhyphen{}instance setup:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Instance 1: High\PYGZhy{}priority critical tasks}
bansuri\PYG{+w}{ }\PYGZhy{}\PYGZhy{}config\PYG{+w}{ }scripts\PYGZhy{}critical.json

\PYG{c+c1}{\PYGZsh{} Instance 2: Background/batch tasks}
bansuri\PYG{+w}{ }\PYGZhy{}\PYGZhy{}config\PYG{+w}{ }scripts\PYGZhy{}batch.json

\PYG{c+c1}{\PYGZsh{} Instance 3: Monitoring/health\PYGZhy{}check tasks}
bansuri\PYG{+w}{ }\PYGZhy{}\PYGZhy{}config\PYG{+w}{ }scripts\PYGZhy{}monitoring.json
\end{sphinxVerbatim}


\section{Performance Tuning}
\label{\detokenize{deployment:performance-tuning}}

\subsection{Memory Management}
\label{\detokenize{deployment:memory-management}}
\sphinxAtStartPar
Monitor memory usage:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Monitor Bansuri process}
watch\PYG{+w}{ }\PYGZhy{}n\PYG{+w}{ }\PYG{l+m}{1}\PYG{+w}{ }\PYG{l+s+s1}{\PYGZsq{}ps aux | grep bansuri\PYGZsq{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
Set limits in systemd:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{[Service]}
\PYG{n+na}{MemoryLimit}\PYG{o}{=}\PYG{l+s}{2G}
\PYG{n+na}{MemoryAccounting}\PYG{o}{=}\PYG{l+s}{yes}
\end{sphinxVerbatim}


\subsection{CPU Affinity}
\label{\detokenize{deployment:cpu-affinity}}
\sphinxAtStartPar
Bind Bansuri to specific CPU cores:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{[Service]}
\PYG{n+na}{CPUAffinity}\PYG{o}{=}\PYG{l+s}{0\PYGZhy{}3}
\end{sphinxVerbatim}

\sphinxAtStartPar
For systemd systems with taskset:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
taskset\PYG{+w}{ }\PYGZhy{}cp\PYG{+w}{ }\PYG{l+m}{0}\PYGZhy{}3\PYG{+w}{ }\PYG{k}{\PYGZdl{}(}pgrep\PYG{+w}{ }\PYGZhy{}f\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}python \PYGZhy{}m bansuri\PYGZdq{}}\PYG{k}{)}
\end{sphinxVerbatim}


\section{Troubleshooting Deployment Issues}
\label{\detokenize{deployment:troubleshooting-deployment-issues}}

\subsection{Service won‚Äôt start}
\label{\detokenize{deployment:service-won-t-start}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Check syntax}
systemctl\PYG{+w}{ }status\PYG{+w}{ }bansuri
journalctl\PYG{+w}{ }\PYGZhy{}u\PYG{+w}{ }bansuri\PYG{+w}{ }\PYGZhy{}n\PYG{+w}{ }\PYG{l+m}{50}

\PYG{c+c1}{\PYGZsh{} Verify permissions}
ls\PYG{+w}{ }\PYGZhy{}la\PYG{+w}{ }/opt/bansuri
sudo\PYG{+w}{ }\PYGZhy{}u\PYG{+w}{ }bansuri\PYG{+w}{ }python\PYG{+w}{ }\PYGZhy{}m\PYG{+w}{ }bansuri\PYG{+w}{ }\PYGZhy{}\PYGZhy{}help
\end{sphinxVerbatim}


\subsection{High memory usage}
\label{\detokenize{deployment:high-memory-usage}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Check for zombie processes}
ps\PYG{+w}{ }aux\PYG{+w}{ }\PYG{p}{|}\PYG{+w}{ }grep\PYG{+w}{ }defunct

\PYG{c+c1}{\PYGZsh{} Monitor task output}
tail\PYG{+w}{ }\PYGZhy{}f\PYG{+w}{ }/var/log/bansuri/task.log

\PYG{c+c1}{\PYGZsh{} Reduce concurrency}
\PYG{c+c1}{\PYGZsh{} Modify scripts.json to reduce number of concurrent tasks}
\end{sphinxVerbatim}


\subsection{Tasks not running}
\label{\detokenize{deployment:tasks-not-running}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Verify configuration}
python\PYG{+w}{ }\PYGZhy{}m\PYG{+w}{ }bansuri\PYG{+w}{ }\PYGZhy{}\PYGZhy{}validate\PYGZhy{}config

\PYG{c+c1}{\PYGZsh{} Check file permissions on log directories}
ls\PYG{+w}{ }\PYGZhy{}la\PYG{+w}{ }/var/log/bansuri

\PYG{c+c1}{\PYGZsh{} Check if user has execute permissions}
sudo\PYG{+w}{ }\PYGZhy{}u\PYG{+w}{ }bansuri\PYG{+w}{ }which\PYG{+w}{ }/path/to/command
\end{sphinxVerbatim}

\sphinxstepscope


\chapter{Troubleshooting}
\label{\detokenize{troubleshooting:troubleshooting}}\label{\detokenize{troubleshooting::doc}}
\sphinxAtStartPar
Common problems and solutions.


\section{Task Issues}
\label{\detokenize{troubleshooting:task-issues}}

\subsection{Task Won‚Äôt Start}
\label{\detokenize{troubleshooting:task-won-t-start}}
\sphinxAtStartPar
\sphinxstylestrong{Symptom}: Task stays \sphinxcode{\sphinxupquote{PENDING}} or immediately fails

\sphinxAtStartPar
\sphinxstylestrong{Checklist}:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Does \sphinxcode{\sphinxupquote{scripts.json}} have valid JSON syntax?

\begin{sphinxVerbatim}[commandchars=\\\{\}]
python\PYG{+w}{ }\PYGZhy{}m\PYG{+w}{ }json.tool\PYG{+w}{ }scripts.json
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
Is the \sphinxcode{\sphinxupquote{command}} executable?

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Test the command directly}
bash\PYG{+w}{ }\PYGZhy{}x\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}your\PYGZhy{}command\PYGZdq{}}
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
Does the file exist and have permissions?

\begin{sphinxVerbatim}[commandchars=\\\{\}]
ls\PYG{+w}{ }\PYGZhy{}l\PYG{+w}{ }/path/to/script.sh
chmod\PYG{+w}{ }+x\PYG{+w}{ }/path/to/script.sh
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
Are you using an absolute path?

\sphinxAtStartPar
‚úÖ Good:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}/usr/local/bin/backup.sh\PYGZdq{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
‚ùå Bad:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}backup.sh\PYGZdq{}}
\end{sphinxVerbatim}

\end{enumerate}

\sphinxAtStartPar
‚Äî


\subsection{Task Runs But Fails}
\label{\detokenize{troubleshooting:task-runs-but-fails}}
\sphinxAtStartPar
\sphinxstylestrong{Symptom}: Task exits with non\sphinxhyphen{}zero code

\sphinxAtStartPar
\sphinxstylestrong{Checklist}:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Check exit code in logs

\begin{sphinxVerbatim}[commandchars=\\\{\}]
[task] Process finished with code 127   \PYGZsh{} Command not found
[task] Process finished with code 1     \PYGZsh{} General error
[task] Process finished with code 126   \PYGZsh{} Permission denied
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
Run command manually to see error:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
bash\PYG{+w}{ }\PYGZhy{}x\PYG{+w}{ }/path/to/script.sh
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
Check for missing environment variables:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nt}{\PYGZdq{}working\PYGZhy{}directory\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}/app\PYGZdq{}}\PYG{p}{,}
\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}python main.py\PYGZdq{}}
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
Consider adding to \sphinxcode{\sphinxupquote{success\sphinxhyphen{}codes}} if non\sphinxhyphen{}zero is acceptable:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nt}{\PYGZdq{}success\PYGZhy{}codes\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{+w}{ }\PYG{l+m+mi}{1}\PYG{p}{]}
\end{sphinxVerbatim}

\end{enumerate}

\sphinxAtStartPar
‚Äî


\subsection{Task Runs Forever}
\label{\detokenize{troubleshooting:task-runs-forever}}
\sphinxAtStartPar
\sphinxstylestrong{Symptom}: Task completes but \sphinxcode{\sphinxupquote{RUNNING}} status persists

\sphinxAtStartPar
\sphinxstylestrong{Fix}: Set a \sphinxcode{\sphinxupquote{timeout}}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}hanging\PYGZhy{}task\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}python task.py\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}timeout\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}30s\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
‚Äî


\subsection{High Memory Usage}
\label{\detokenize{troubleshooting:high-memory-usage}}
\sphinxAtStartPar
\sphinxstylestrong{Symptom}: Bansuri process grows in memory

\sphinxAtStartPar
\sphinxstylestrong{Causes}:
\begin{itemize}
\item {} 
\sphinxAtStartPar
Task produces huge output

\item {} 
\sphinxAtStartPar
Many tasks logging to memory

\end{itemize}

\sphinxAtStartPar
\sphinxstylestrong{Solutions}:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Redirect output to files:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nt}{\PYGZdq{}stdout\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}/var/log/task.log\PYGZdq{}}\PYG{p}{,}
\PYG{n+nt}{\PYGZdq{}stderr\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}combined\PYGZdq{}}
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
Or in the command itself:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}python task.py \PYGZgt{} /tmp/output.log 2\PYGZgt{}\PYGZam{}1\PYGZdq{}}
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
Limit number of tasks

\end{enumerate}

\sphinxAtStartPar
‚Äî


\section{Configuration Issues}
\label{\detokenize{troubleshooting:configuration-issues}}

\subsection{‚Äúcroniter not found‚Äù Error}
\label{\detokenize{troubleshooting:croniter-not-found-error}}
\sphinxAtStartPar
\sphinxstylestrong{Symptom}: When using \sphinxcode{\sphinxupquote{schedule\sphinxhyphen{}cron}}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
ERROR: \PYGZsq{}croniter\PYGZsq{} library is missing
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstylestrong{Fix}:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
pip\PYG{+w}{ }install\PYG{+w}{ }croniter
\end{sphinxVerbatim}

\sphinxAtStartPar
‚Äî


\subsection{Notification Not Sending}
\label{\detokenize{troubleshooting:notification-not-sending}}
\sphinxAtStartPar
\sphinxstylestrong{Symptom}: Task fails but no email arrives

\sphinxAtStartPar
\sphinxstylestrong{Checklist}:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Is \sphinxcode{\sphinxupquote{notify}} set to \sphinxcode{\sphinxupquote{"mail"}}?

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nt}{\PYGZdq{}notify\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}mail\PYGZdq{}}
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
Is \sphinxcode{\sphinxupquote{notify\_command}} configured?

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nt}{\PYGZdq{}notify\PYGZus{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}mail \PYGZhy{}s \PYGZsq{}Alert: \PYGZob{}task\PYGZcb{}\PYGZsq{} admin@example.com\PYGZdq{}}
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
Is \sphinxcode{\sphinxupquote{mail}} command available?

\begin{sphinxVerbatim}[commandchars=\\\{\}]
which\PYG{+w}{ }mail
\PYG{c+c1}{\PYGZsh{} If missing:}
sudo\PYG{+w}{ }apt\PYGZhy{}get\PYG{+w}{ }install\PYG{+w}{ }mailutils\PYG{+w}{   }\PYG{c+c1}{\PYGZsh{} Ubuntu}
sudo\PYG{+w}{ }yum\PYG{+w}{ }install\PYG{+w}{ }mailx\PYG{+w}{            }\PYG{c+c1}{\PYGZsh{} CentOS}
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
Test mail manually:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nb}{echo}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}test\PYGZdq{}}\PYG{+w}{ }\PYG{p}{|}\PYG{+w}{ }mail\PYG{+w}{ }\PYGZhy{}s\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Test\PYGZdq{}}\PYG{+w}{ }admin@example.com
\end{sphinxVerbatim}

\end{enumerate}

\sphinxAtStartPar
‚Äî


\subsection{Invalid Configuration}
\label{\detokenize{troubleshooting:invalid-configuration}}
\sphinxAtStartPar
\sphinxstylestrong{Symptom}: Tasks ignored, no error messages

\sphinxAtStartPar
\sphinxstylestrong{Check}:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
JSON syntax:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
python\PYG{+w}{ }\PYGZhy{}m\PYG{+w}{ }json.tool\PYG{+w}{ }scripts.json
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
Required fields:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}...\PYGZdq{}}\PYG{p}{,}\PYG{+w}{       }\PYG{c+c1}{// REQUIRED}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}command\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}...\PYGZdq{}}\PYG{p}{,}\PYG{+w}{    }\PYG{c+c1}{// REQUIRED}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}version\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}1.0\PYGZdq{}}\PYG{+w}{     }\PYG{c+c1}{// Recommended}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
Validate with Python:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k+kn}{from}\PYG{+w}{ }\PYG{n+nn}{bansuri}\PYG{n+nn}{.}\PYG{n+nn}{base}\PYG{n+nn}{.}\PYG{n+nn}{config\PYGZus{}manager}\PYG{+w}{ }\PYG{k+kn}{import} \PYG{n}{BansuriConfig}
\PYG{n}{config} \PYG{o}{=} \PYG{n}{BansuriConfig}\PYG{o}{.}\PYG{n}{load\PYGZus{}from\PYGZus{}file}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{scripts.json}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\end{sphinxVerbatim}

\end{enumerate}

\sphinxAtStartPar
‚Äî


\subsection{Cron Not Working}
\label{\detokenize{troubleshooting:cron-not-working}}
\sphinxAtStartPar
\sphinxstylestrong{Symptom}: \sphinxcode{\sphinxupquote{schedule\sphinxhyphen{}cron}} doesn‚Äôt trigger

\sphinxAtStartPar
\sphinxstylestrong{Check cron expression}:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k+kn}{from}\PYG{+w}{ }\PYG{n+nn}{croniter}\PYG{+w}{ }\PYG{k+kn}{import} \PYG{n}{croniter}
\PYG{k+kn}{from}\PYG{+w}{ }\PYG{n+nn}{datetime}\PYG{+w}{ }\PYG{k+kn}{import} \PYG{n}{datetime}

\PYG{n}{cron} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{0 2 * * *}\PYG{l+s+s2}{\PYGZdq{}}  \PYG{c+c1}{\PYGZsh{} Your expression}
\PYG{k}{if} \PYG{n}{croniter}\PYG{o}{.}\PYG{n}{is\PYGZus{}valid}\PYG{p}{(}\PYG{n}{cron}\PYG{p}{)}\PYG{p}{:}
    \PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Valid}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
    \PYG{n}{c} \PYG{o}{=} \PYG{n}{croniter}\PYG{p}{(}\PYG{n}{cron}\PYG{p}{)}
    \PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+sa}{f}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Next run: }\PYG{l+s+si}{\PYGZob{}}\PYG{n}{c}\PYG{o}{.}\PYG{n}{get\PYGZus{}next}\PYG{p}{(}\PYG{n}{datetime}\PYG{p}{)}\PYG{l+s+si}{\PYGZcb{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{k}{else}\PYG{p}{:}
    \PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Invalid cron expression}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstylestrong{Common cron patterns}:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdq{}0 2 * * *\PYGZdq{}      \(\rightarrow\) Daily at 2 AM
\PYGZdq{}*/5 * * * *\PYGZdq{}    \(\rightarrow\) Every 5 minutes
\PYGZdq{}0 */6 * * *\PYGZdq{}    \(\rightarrow\) Every 6 hours
\PYGZdq{}0 0 1 * *\PYGZdq{}      \(\rightarrow\) Monthly on 1st
\end{sphinxVerbatim}

\sphinxAtStartPar
‚Äî


\section{Restart / Recovery}
\label{\detokenize{troubleshooting:restart-recovery}}

\subsection{Restart Bansuri}
\label{\detokenize{troubleshooting:restart-bansuri}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} If running systemd}
sudo\PYG{+w}{ }systemctl\PYG{+w}{ }restart\PYG{+w}{ }bansuri

\PYG{c+c1}{\PYGZsh{} If running manually}
Ctrl+C\PYG{+w}{  }\PYG{c+c1}{\PYGZsh{} Stop}
bansuri\PYG{+w}{ }\PYG{c+c1}{\PYGZsh{} Restart}
\end{sphinxVerbatim}

\sphinxAtStartPar
‚Äî


\subsection{Force Stop Hung Task}
\label{\detokenize{troubleshooting:force-stop-hung-task}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Find process}
ps\PYG{+w}{ }aux\PYG{+w}{ }\PYG{p}{|}\PYG{+w}{ }grep\PYG{+w}{ }bansuri

\PYG{c+c1}{\PYGZsh{} Send signal}
\PYG{n+nb}{kill}\PYG{+w}{ }\PYGZhy{}15\PYG{+w}{ }\PYGZlt{}PID\PYGZgt{}\PYG{+w}{       }\PYG{c+c1}{\PYGZsh{} Graceful}
\PYG{n+nb}{kill}\PYG{+w}{ }\PYGZhy{}9\PYG{+w}{ }\PYGZlt{}PID\PYGZgt{}\PYG{+w}{        }\PYG{c+c1}{\PYGZsh{} Force}
\end{sphinxVerbatim}

\sphinxAtStartPar
‚Äî


\subsection{Reset All Tasks}
\label{\detokenize{troubleshooting:reset-all-tasks}}
\sphinxAtStartPar
Stop Bansuri and remove any state files:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Stop Bansuri}
bansuri\PYG{+w}{ }stop

\PYG{c+c1}{\PYGZsh{} Optional: Clean logs}
rm\PYG{+w}{ }/var/log/bansuri.log*

\PYG{c+c1}{\PYGZsh{} Restart}
bansuri
\end{sphinxVerbatim}

\sphinxAtStartPar
‚Äî


\section{Getting Help}
\label{\detokenize{troubleshooting:getting-help}}

\subsection{Enable Debug Logging}
\label{\detokenize{troubleshooting:enable-debug-logging}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Check current logs (follow mode)}
tail\PYG{+w}{ }\PYGZhy{}f\PYG{+w}{ }/var/log/bansuri.log\PYG{+w}{ }\PYG{p}{|}\PYG{+w}{ }grep\PYG{+w}{ }ERROR

\PYG{c+c1}{\PYGZsh{} Look for specific task}
grep\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}task\PYGZhy{}name\PYGZdq{}}\PYG{+w}{ }/var/log/bansuri.log
\end{sphinxVerbatim}


\subsection{Check Bansuri Status}
\label{\detokenize{troubleshooting:check-bansuri-status}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Show running processes}
ps\PYG{+w}{ }aux\PYG{+w}{ }\PYG{p}{|}\PYG{+w}{ }grep\PYG{+w}{ }bansuri

\PYG{c+c1}{\PYGZsh{} Check ports (if applicable)}
netstat\PYG{+w}{ }\PYGZhy{}tlnp\PYG{+w}{ }\PYG{p}{|}\PYG{+w}{ }grep\PYG{+w}{ }bansuri

\PYG{c+c1}{\PYGZsh{} Show config being used}
cat\PYG{+w}{ }scripts.json\PYG{+w}{ }\PYG{p}{|}\PYG{+w}{ }python\PYG{+w}{ }\PYGZhy{}m\PYG{+w}{ }json.tool
\end{sphinxVerbatim}


\subsection{Need More Help?}
\label{\detokenize{troubleshooting:need-more-help}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Check \DUrole{xref}{\DUrole{std}{\DUrole{std-doc}{../NOT\_IMPLEMENTED.md}}} for known limitations

\item {} 
\sphinxAtStartPar
Review {\hyperref[\detokenize{configuration::doc}]{\sphinxcrossref{\DUrole{doc}{Configuration}}}} for correct parameter format

\item {} 
\sphinxAtStartPar
See {\hyperref[\detokenize{reference::doc}]{\sphinxcrossref{\DUrole{doc}{Reference}}}} for examples

\item {} 
\sphinxAtStartPar
Visit GitHub issues: \sphinxurl{https://github.com/aziabatz/bansuri/issues}

\end{enumerate}

\sphinxstepscope


\chapter{Contributing to Bansuri}
\label{\detokenize{contributing:contributing-to-bansuri}}\label{\detokenize{contributing::doc}}
\sphinxAtStartPar
Thank you for your interest in contributing! We welcome pull requests from developers of all skill levels.


\section{Setting up the Development Environment}
\label{\detokenize{contributing:setting-up-the-development-environment}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Clone the repository}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
git\PYG{+w}{ }clone\PYG{+w}{ }https://github.com/aziabatz/bansuri.git
\PYG{n+nb}{cd}\PYG{+w}{ }bansuri
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Create a virtual environment}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
python\PYG{+w}{ }\PYGZhy{}m\PYG{+w}{ }venv\PYG{+w}{ }venv
\PYG{n+nb}{source}\PYG{+w}{ }venv/bin/activate
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Install the package in editable mode}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
pip\PYG{+w}{ }install\PYG{+w}{ }\PYGZhy{}e\PYG{+w}{ }.
\end{sphinxVerbatim}

\end{enumerate}


\section{Project Structure}
\label{\detokenize{contributing:project-structure}}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{bansuri/}}: Main package source code.
* \sphinxcode{\sphinxupquote{master.py}}: Orchestrator \sphinxhyphen{} main orchestration logic and task coordination.
* \sphinxcode{\sphinxupquote{task\_runner.py}}: TaskRunner \sphinxhyphen{} task execution and subprocess management.
* \sphinxcode{\sphinxupquote{base/}}: Base classes and configuration management.
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{task\_base.py}}: AbstractTask \sphinxhyphen{} base class for custom task implementations.

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{config\_manager.py}}: BansuriConfig and ScriptConfig \sphinxhyphen{} configuration data structures.

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{config/}}: Configuration component classes (Identification, Scheduling, Failure Control, etc.).

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{misc/}}: Miscellaneous utilities (header, help).

\end{itemize}
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{alerts/}}: Notification system.
* \sphinxcode{\sphinxupquote{notifier.py}}: Base notifier interface.
* \sphinxcode{\sphinxupquote{cmd\_notifier.py}}: Command\sphinxhyphen{}based notifications.

\end{itemize}

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{tests/}}: Unit and integration tests.

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{doc/}}: Sphinx documentation source.

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{examples/}}: Example scripts and configurations.

\end{itemize}


\section{Running Tests}
\label{\detokenize{contributing:running-tests}}
\sphinxAtStartPar
We use \sphinxcode{\sphinxupquote{pytest}} for testing. Ensure all tests pass before submitting a PR:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
pytest\PYG{+w}{ }test\PYGZus{}scripts.py
pytest\PYG{+w}{ }test\PYGZus{}notify.py
\end{sphinxVerbatim}


\section{Documentation}
\label{\detokenize{contributing:documentation}}
\sphinxAtStartPar
If you modify the code, please update the docstrings and regenerate the documentation to ensure consistency.


\subsection{Building Documentation}
\label{\detokenize{contributing:building-documentation}}
\sphinxAtStartPar
To build the Sphinx documentation:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nb}{cd}\PYG{+w}{ }doc
make\PYG{+w}{ }html
\end{sphinxVerbatim}

\sphinxAtStartPar
The generated documentation will be in \sphinxcode{\sphinxupquote{doc/\_build/html/}}.

\sphinxstepscope


\chapter{API Reference}
\label{\detokenize{api:api-reference}}\label{\detokenize{api::doc}}

\section{Core Components}
\label{\detokenize{api:core-components}}

\subsection{Orchestrator}
\label{\detokenize{api:orchestrator}}\index{Orchestrator (class in bansuri.master)@\spxentry{Orchestrator}\spxextra{class in bansuri.master}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:bansuri.master.Orchestrator}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxbfcode{\sphinxupquote{\DUrole{k}{class}\DUrole{w}{ }}}\sphinxcode{\sphinxupquote{bansuri.master.}}\sphinxbfcode{\sphinxupquote{Orchestrator}}}
{\sphinxparam{\DUrole{n}{config\_file}\DUrole{o}{=}\DUrole{default_value}{\textquotesingle{}scripts.json\textquotesingle{}}}\sphinxparamcomma \sphinxparam{\DUrole{n}{check\_interval}\DUrole{o}{=}\DUrole{default_value}{30}}}
{}
\pysigstopsignatures
\sphinxAtStartPar
Bases: \sphinxcode{\sphinxupquote{object}}
\index{run() (bansuri.master.Orchestrator method)@\spxentry{run()}\spxextra{bansuri.master.Orchestrator method}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:bansuri.master.Orchestrator.run}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxbfcode{\sphinxupquote{run}}}
{}
{}
\pysigstopsignatures
\end{fulllineitems}

\index{signal\_handler() (bansuri.master.Orchestrator method)@\spxentry{signal\_handler()}\spxextra{bansuri.master.Orchestrator method}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:bansuri.master.Orchestrator.signal_handler}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxbfcode{\sphinxupquote{signal\_handler}}}
{\sphinxparam{\DUrole{n}{signum}}\sphinxparamcomma \sphinxparam{\DUrole{n}{frame}}}
{}
\pysigstopsignatures
\sphinxAtStartPar
POSIX signal handling
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{signum}} \textendash{} Signal identifier

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{frame}} \textendash{} Unused

\end{itemize}

\end{description}\end{quote}

\end{fulllineitems}

\index{stop\_all() (bansuri.master.Orchestrator method)@\spxentry{stop\_all()}\spxextra{bansuri.master.Orchestrator method}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:bansuri.master.Orchestrator.stop_all}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxbfcode{\sphinxupquote{stop\_all}}}
{}
{}
\pysigstopsignatures
\end{fulllineitems}

\index{sync\_tasks() (bansuri.master.Orchestrator method)@\spxentry{sync\_tasks()}\spxextra{bansuri.master.Orchestrator method}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:bansuri.master.Orchestrator.sync_tasks}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxbfcode{\sphinxupquote{sync\_tasks}}}
{}
{}
\pysigstopsignatures
\sphinxAtStartPar
Synchronize tasks from config file.

\end{fulllineitems}


\end{fulllineitems}



\subsection{TaskRunner}
\label{\detokenize{api:taskrunner}}\index{TaskRunner (class in bansuri.task\_runner)@\spxentry{TaskRunner}\spxextra{class in bansuri.task\_runner}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:bansuri.task_runner.TaskRunner}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxbfcode{\sphinxupquote{\DUrole{k}{class}\DUrole{w}{ }}}\sphinxcode{\sphinxupquote{bansuri.task\_runner.}}\sphinxbfcode{\sphinxupquote{TaskRunner}}}
{\sphinxparam{\DUrole{n}{config}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{{\hyperref[\detokenize{api:bansuri.base.config_manager.ScriptConfig}]{\sphinxcrossref{ScriptConfig}}}}}\sphinxparamcomma \sphinxparam{\DUrole{n}{bansuri\_config}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{{\hyperref[\detokenize{api:bansuri.base.config_manager.BansuriConfig}]{\sphinxcrossref{BansuriConfig}}}}}}
{}
\pysigstopsignatures
\sphinxAtStartPar
Bases: \sphinxcode{\sphinxupquote{object}}

\sphinxAtStartPar
This class manages the lifecycle of a single task.
It handles process execution, log redirection, and other policies.
\index{log() (bansuri.task\_runner.TaskRunner method)@\spxentry{log()}\spxextra{bansuri.task\_runner.TaskRunner method}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:bansuri.task_runner.TaskRunner.log}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxbfcode{\sphinxupquote{log}}}
{\sphinxparam{\DUrole{n}{message}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{str}}}
{}
\pysigstopsignatures
\sphinxAtStartPar
Fallback formatted log output

\end{fulllineitems}

\index{start() (bansuri.task\_runner.TaskRunner method)@\spxentry{start()}\spxextra{bansuri.task\_runner.TaskRunner method}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:bansuri.task_runner.TaskRunner.start}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxbfcode{\sphinxupquote{start}}}
{}
{}
\pysigstopsignatures
\sphinxAtStartPar
Starts the control thread if it is stopped

\end{fulllineitems}

\index{stop() (bansuri.task\_runner.TaskRunner method)@\spxentry{stop()}\spxextra{bansuri.task\_runner.TaskRunner method}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:bansuri.task_runner.TaskRunner.stop}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxbfcode{\sphinxupquote{stop}}}
{}
{}
\pysigstopsignatures
\sphinxAtStartPar
Sends the termination signal

\end{fulllineitems}


\end{fulllineitems}



\subsection{Configuration}
\label{\detokenize{api:configuration}}\index{BansuriConfig (class in bansuri.base.config\_manager)@\spxentry{BansuriConfig}\spxextra{class in bansuri.base.config\_manager}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:bansuri.base.config_manager.BansuriConfig}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxbfcode{\sphinxupquote{\DUrole{k}{class}\DUrole{w}{ }}}\sphinxcode{\sphinxupquote{bansuri.base.config\_manager.}}\sphinxbfcode{\sphinxupquote{BansuriConfig}}}
{\sphinxparam{\DUrole{n}{version}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{str}}\sphinxparamcomma \sphinxparam{\DUrole{n}{scripts}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{List\DUrole{p}{{[}}{\hyperref[\detokenize{api:bansuri.base.config_manager.ScriptConfig}]{\sphinxcrossref{ScriptConfig}}}\DUrole{p}{{]}}}}\sphinxparamcomma \sphinxparam{\DUrole{n}{notify\_command}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{str\DUrole{w}{ }\DUrole{p}{|}\DUrole{w}{ }None}\DUrole{w}{ }\DUrole{o}{=}\DUrole{w}{ }\DUrole{default_value}{None}}}
{}
\pysigstopsignatures
\sphinxAtStartPar
Bases: \sphinxcode{\sphinxupquote{object}}

\sphinxAtStartPar
Represents the current loaded definitions for Bansuri
\index{load\_from\_file() (bansuri.base.config\_manager.BansuriConfig class method)@\spxentry{load\_from\_file()}\spxextra{bansuri.base.config\_manager.BansuriConfig class method}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:bansuri.base.config_manager.BansuriConfig.load_from_file}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxbfcode{\sphinxupquote{\DUrole{k}{classmethod}\DUrole{w}{ }}}\sphinxbfcode{\sphinxupquote{load\_from\_file}}}
{\sphinxparam{\DUrole{n}{file\_path}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{str}}}
{{ $\rightarrow$ {\hyperref[\detokenize{api:bansuri.base.config_manager.BansuriConfig}]{\sphinxcrossref{BansuriConfig}}}}}
\pysigstopsignatures
\end{fulllineitems}

\index{notify\_command (bansuri.base.config\_manager.BansuriConfig attribute)@\spxentry{notify\_command}\spxextra{bansuri.base.config\_manager.BansuriConfig attribute}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:bansuri.base.config_manager.BansuriConfig.notify_command}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{notify\_command}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }str\DUrole{w}{ }\DUrole{p}{|}\DUrole{w}{ }None}}\sphinxbfcode{\sphinxupquote{\DUrole{w}{ }\DUrole{p}{=}\DUrole{w}{ }None}}}
\pysigstopsignatures
\end{fulllineitems}

\index{scripts (bansuri.base.config\_manager.BansuriConfig attribute)@\spxentry{scripts}\spxextra{bansuri.base.config\_manager.BansuriConfig attribute}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:bansuri.base.config_manager.BansuriConfig.scripts}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{scripts}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }List\DUrole{p}{{[}}{\hyperref[\detokenize{api:bansuri.base.config_manager.ScriptConfig}]{\sphinxcrossref{ScriptConfig}}}\DUrole{p}{{]}}}}}
\pysigstopsignatures
\end{fulllineitems}

\index{version (bansuri.base.config\_manager.BansuriConfig attribute)@\spxentry{version}\spxextra{bansuri.base.config\_manager.BansuriConfig attribute}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:bansuri.base.config_manager.BansuriConfig.version}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{version}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }str}}}
\pysigstopsignatures
\end{fulllineitems}


\end{fulllineitems}

\index{ScriptConfig (class in bansuri.base.config\_manager)@\spxentry{ScriptConfig}\spxextra{class in bansuri.base.config\_manager}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:bansuri.base.config_manager.ScriptConfig}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxbfcode{\sphinxupquote{\DUrole{k}{class}\DUrole{w}{ }}}\sphinxcode{\sphinxupquote{bansuri.base.config\_manager.}}\sphinxbfcode{\sphinxupquote{ScriptConfig}}}
{\sphinxparam{\DUrole{n}{name}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{str}}\sphinxparamcomma \sphinxparam{\DUrole{n}{command}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{str}}\sphinxparamcomma \sphinxparam{\DUrole{n}{user}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{str\DUrole{w}{ }\DUrole{p}{|}\DUrole{w}{ }None}\DUrole{w}{ }\DUrole{o}{=}\DUrole{w}{ }\DUrole{default_value}{None}}\sphinxparamcomma \sphinxparam{\DUrole{n}{working\_directory}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{str\DUrole{w}{ }\DUrole{p}{|}\DUrole{w}{ }None}\DUrole{w}{ }\DUrole{o}{=}\DUrole{w}{ }\DUrole{default_value}{None}}\sphinxparamcomma \sphinxparam{\DUrole{n}{no\_interface}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{bool}\DUrole{w}{ }\DUrole{o}{=}\DUrole{w}{ }\DUrole{default_value}{False}}\sphinxparamcomma \sphinxparam{\DUrole{n}{schedule\_cron}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{str\DUrole{w}{ }\DUrole{p}{|}\DUrole{w}{ }None}\DUrole{w}{ }\DUrole{o}{=}\DUrole{w}{ }\DUrole{default_value}{None}}\sphinxparamcomma \sphinxparam{\DUrole{n}{timer}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{str\DUrole{w}{ }\DUrole{p}{|}\DUrole{w}{ }None}\DUrole{w}{ }\DUrole{o}{=}\DUrole{w}{ }\DUrole{default_value}{None}}\sphinxparamcomma \sphinxparam{\DUrole{n}{timeout}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{str\DUrole{w}{ }\DUrole{p}{|}\DUrole{w}{ }None}\DUrole{w}{ }\DUrole{o}{=}\DUrole{w}{ }\DUrole{default_value}{None}}\sphinxparamcomma \sphinxparam{\DUrole{n}{times}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{int}\DUrole{w}{ }\DUrole{o}{=}\DUrole{w}{ }\DUrole{default_value}{1}}\sphinxparamcomma \sphinxparam{\DUrole{n}{on\_fail}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{str}\DUrole{w}{ }\DUrole{o}{=}\DUrole{w}{ }\DUrole{default_value}{\textquotesingle{}stop\textquotesingle{}}}\sphinxparamcomma \sphinxparam{\DUrole{n}{depends\_on}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{List\DUrole{p}{{[}}str\DUrole{p}{{]}}}\DUrole{w}{ }\DUrole{o}{=}\DUrole{w}{ }\DUrole{default_value}{\textless{}factory\textgreater{}}}\sphinxparamcomma \sphinxparam{\DUrole{n}{success\_codes}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{List\DUrole{p}{{[}}int\DUrole{p}{{]}}}\DUrole{w}{ }\DUrole{o}{=}\DUrole{w}{ }\DUrole{default_value}{\textless{}factory\textgreater{}}}\sphinxparamcomma \sphinxparam{\DUrole{n}{environment\_file}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{str\DUrole{w}{ }\DUrole{p}{|}\DUrole{w}{ }None}\DUrole{w}{ }\DUrole{o}{=}\DUrole{w}{ }\DUrole{default_value}{None}}\sphinxparamcomma \sphinxparam{\DUrole{n}{priority}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{int}\DUrole{w}{ }\DUrole{o}{=}\DUrole{w}{ }\DUrole{default_value}{0}}\sphinxparamcomma \sphinxparam{\DUrole{n}{stdout}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{str\DUrole{w}{ }\DUrole{p}{|}\DUrole{w}{ }None}\DUrole{w}{ }\DUrole{o}{=}\DUrole{w}{ }\DUrole{default_value}{None}}\sphinxparamcomma \sphinxparam{\DUrole{n}{stderr}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{str\DUrole{w}{ }\DUrole{p}{|}\DUrole{w}{ }None}\DUrole{w}{ }\DUrole{o}{=}\DUrole{w}{ }\DUrole{default_value}{\textquotesingle{}combined\textquotesingle{}}}\sphinxparamcomma \sphinxparam{\DUrole{n}{notify}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{str}\DUrole{w}{ }\DUrole{o}{=}\DUrole{w}{ }\DUrole{default_value}{\textquotesingle{}none\textquotesingle{}}}\sphinxparamcomma \sphinxparam{\DUrole{n}{description}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{str}\DUrole{w}{ }\DUrole{o}{=}\DUrole{w}{ }\DUrole{default_value}{\textquotesingle{}\textquotesingle{}}}}
{}
\pysigstopsignatures
\sphinxAtStartPar
Bases: \sphinxcode{\sphinxupquote{object}}

\sphinxAtStartPar
Represents the configuration of a task
\index{command (bansuri.base.config\_manager.ScriptConfig attribute)@\spxentry{command}\spxextra{bansuri.base.config\_manager.ScriptConfig attribute}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:bansuri.base.config_manager.ScriptConfig.command}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{command}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }str}}}
\pysigstopsignatures
\end{fulllineitems}

\index{depends\_on (bansuri.base.config\_manager.ScriptConfig attribute)@\spxentry{depends\_on}\spxextra{bansuri.base.config\_manager.ScriptConfig attribute}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:bansuri.base.config_manager.ScriptConfig.depends_on}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{depends\_on}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }List\DUrole{p}{{[}}str\DUrole{p}{{]}}}}}
\pysigstopsignatures
\end{fulllineitems}

\index{description (bansuri.base.config\_manager.ScriptConfig attribute)@\spxentry{description}\spxextra{bansuri.base.config\_manager.ScriptConfig attribute}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:bansuri.base.config_manager.ScriptConfig.description}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{description}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }str}}\sphinxbfcode{\sphinxupquote{\DUrole{w}{ }\DUrole{p}{=}\DUrole{w}{ }\textquotesingle{}\textquotesingle{}}}}
\pysigstopsignatures
\end{fulllineitems}

\index{environment\_file (bansuri.base.config\_manager.ScriptConfig attribute)@\spxentry{environment\_file}\spxextra{bansuri.base.config\_manager.ScriptConfig attribute}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:bansuri.base.config_manager.ScriptConfig.environment_file}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{environment\_file}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }str\DUrole{w}{ }\DUrole{p}{|}\DUrole{w}{ }None}}\sphinxbfcode{\sphinxupquote{\DUrole{w}{ }\DUrole{p}{=}\DUrole{w}{ }None}}}
\pysigstopsignatures
\end{fulllineitems}

\index{is\_smart\_script (bansuri.base.config\_manager.ScriptConfig property)@\spxentry{is\_smart\_script}\spxextra{bansuri.base.config\_manager.ScriptConfig property}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:bansuri.base.config_manager.ScriptConfig.is_smart_script}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{\DUrole{k}{property}\DUrole{w}{ }}}\sphinxbfcode{\sphinxupquote{is\_smart\_script}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }bool}}}
\pysigstopsignatures
\end{fulllineitems}

\index{name (bansuri.base.config\_manager.ScriptConfig attribute)@\spxentry{name}\spxextra{bansuri.base.config\_manager.ScriptConfig attribute}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:bansuri.base.config_manager.ScriptConfig.name}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{name}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }str}}}
\pysigstopsignatures
\end{fulllineitems}

\index{no\_interface (bansuri.base.config\_manager.ScriptConfig attribute)@\spxentry{no\_interface}\spxextra{bansuri.base.config\_manager.ScriptConfig attribute}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:bansuri.base.config_manager.ScriptConfig.no_interface}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{no\_interface}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }bool}}\sphinxbfcode{\sphinxupquote{\DUrole{w}{ }\DUrole{p}{=}\DUrole{w}{ }False}}}
\pysigstopsignatures
\end{fulllineitems}

\index{notify (bansuri.base.config\_manager.ScriptConfig attribute)@\spxentry{notify}\spxextra{bansuri.base.config\_manager.ScriptConfig attribute}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:bansuri.base.config_manager.ScriptConfig.notify}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{notify}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }str}}\sphinxbfcode{\sphinxupquote{\DUrole{w}{ }\DUrole{p}{=}\DUrole{w}{ }\textquotesingle{}none\textquotesingle{}}}}
\pysigstopsignatures
\end{fulllineitems}

\index{on\_fail (bansuri.base.config\_manager.ScriptConfig attribute)@\spxentry{on\_fail}\spxextra{bansuri.base.config\_manager.ScriptConfig attribute}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:bansuri.base.config_manager.ScriptConfig.on_fail}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{on\_fail}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }str}}\sphinxbfcode{\sphinxupquote{\DUrole{w}{ }\DUrole{p}{=}\DUrole{w}{ }\textquotesingle{}stop\textquotesingle{}}}}
\pysigstopsignatures
\end{fulllineitems}

\index{priority (bansuri.base.config\_manager.ScriptConfig attribute)@\spxentry{priority}\spxextra{bansuri.base.config\_manager.ScriptConfig attribute}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:bansuri.base.config_manager.ScriptConfig.priority}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{priority}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }int}}\sphinxbfcode{\sphinxupquote{\DUrole{w}{ }\DUrole{p}{=}\DUrole{w}{ }0}}}
\pysigstopsignatures
\end{fulllineitems}

\index{schedule\_cron (bansuri.base.config\_manager.ScriptConfig attribute)@\spxentry{schedule\_cron}\spxextra{bansuri.base.config\_manager.ScriptConfig attribute}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:bansuri.base.config_manager.ScriptConfig.schedule_cron}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{schedule\_cron}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }str\DUrole{w}{ }\DUrole{p}{|}\DUrole{w}{ }None}}\sphinxbfcode{\sphinxupquote{\DUrole{w}{ }\DUrole{p}{=}\DUrole{w}{ }None}}}
\pysigstopsignatures
\end{fulllineitems}

\index{stderr (bansuri.base.config\_manager.ScriptConfig attribute)@\spxentry{stderr}\spxextra{bansuri.base.config\_manager.ScriptConfig attribute}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:bansuri.base.config_manager.ScriptConfig.stderr}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{stderr}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }str\DUrole{w}{ }\DUrole{p}{|}\DUrole{w}{ }None}}\sphinxbfcode{\sphinxupquote{\DUrole{w}{ }\DUrole{p}{=}\DUrole{w}{ }\textquotesingle{}combined\textquotesingle{}}}}
\pysigstopsignatures
\end{fulllineitems}

\index{stdout (bansuri.base.config\_manager.ScriptConfig attribute)@\spxentry{stdout}\spxextra{bansuri.base.config\_manager.ScriptConfig attribute}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:bansuri.base.config_manager.ScriptConfig.stdout}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{stdout}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }str\DUrole{w}{ }\DUrole{p}{|}\DUrole{w}{ }None}}\sphinxbfcode{\sphinxupquote{\DUrole{w}{ }\DUrole{p}{=}\DUrole{w}{ }None}}}
\pysigstopsignatures
\end{fulllineitems}

\index{success\_codes (bansuri.base.config\_manager.ScriptConfig attribute)@\spxentry{success\_codes}\spxextra{bansuri.base.config\_manager.ScriptConfig attribute}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:bansuri.base.config_manager.ScriptConfig.success_codes}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{success\_codes}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }List\DUrole{p}{{[}}int\DUrole{p}{{]}}}}}
\pysigstopsignatures
\end{fulllineitems}

\index{timeout (bansuri.base.config\_manager.ScriptConfig attribute)@\spxentry{timeout}\spxextra{bansuri.base.config\_manager.ScriptConfig attribute}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:bansuri.base.config_manager.ScriptConfig.timeout}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{timeout}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }str\DUrole{w}{ }\DUrole{p}{|}\DUrole{w}{ }None}}\sphinxbfcode{\sphinxupquote{\DUrole{w}{ }\DUrole{p}{=}\DUrole{w}{ }None}}}
\pysigstopsignatures
\end{fulllineitems}

\index{timer (bansuri.base.config\_manager.ScriptConfig attribute)@\spxentry{timer}\spxextra{bansuri.base.config\_manager.ScriptConfig attribute}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:bansuri.base.config_manager.ScriptConfig.timer}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{timer}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }str\DUrole{w}{ }\DUrole{p}{|}\DUrole{w}{ }None}}\sphinxbfcode{\sphinxupquote{\DUrole{w}{ }\DUrole{p}{=}\DUrole{w}{ }None}}}
\pysigstopsignatures
\end{fulllineitems}

\index{times (bansuri.base.config\_manager.ScriptConfig attribute)@\spxentry{times}\spxextra{bansuri.base.config\_manager.ScriptConfig attribute}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:bansuri.base.config_manager.ScriptConfig.times}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{times}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }int}}\sphinxbfcode{\sphinxupquote{\DUrole{w}{ }\DUrole{p}{=}\DUrole{w}{ }1}}}
\pysigstopsignatures
\end{fulllineitems}

\index{user (bansuri.base.config\_manager.ScriptConfig attribute)@\spxentry{user}\spxextra{bansuri.base.config\_manager.ScriptConfig attribute}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:bansuri.base.config_manager.ScriptConfig.user}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{user}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }str\DUrole{w}{ }\DUrole{p}{|}\DUrole{w}{ }None}}\sphinxbfcode{\sphinxupquote{\DUrole{w}{ }\DUrole{p}{=}\DUrole{w}{ }None}}}
\pysigstopsignatures
\end{fulllineitems}

\index{validate() (bansuri.base.config\_manager.ScriptConfig method)@\spxentry{validate()}\spxextra{bansuri.base.config\_manager.ScriptConfig method}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:bansuri.base.config_manager.ScriptConfig.validate}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxbfcode{\sphinxupquote{validate}}}
{}
{}
\pysigstopsignatures
\sphinxAtStartPar
Applies differentiated validation rules depending on the script type.

\end{fulllineitems}

\index{working\_directory (bansuri.base.config\_manager.ScriptConfig attribute)@\spxentry{working\_directory}\spxextra{bansuri.base.config\_manager.ScriptConfig attribute}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:bansuri.base.config_manager.ScriptConfig.working_directory}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{working\_directory}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }str\DUrole{w}{ }\DUrole{p}{|}\DUrole{w}{ }None}}\sphinxbfcode{\sphinxupquote{\DUrole{w}{ }\DUrole{p}{=}\DUrole{w}{ }None}}}
\pysigstopsignatures
\end{fulllineitems}


\end{fulllineitems}



\section{Base Classes for Extensions}
\label{\detokenize{api:base-classes-for-extensions}}

\subsection{AbstractTask}
\label{\detokenize{api:abstracttask}}\index{AbstractTask (class in bansuri.base.task\_base)@\spxentry{AbstractTask}\spxextra{class in bansuri.base.task\_base}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:bansuri.base.task_base.AbstractTask}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxbfcode{\sphinxupquote{\DUrole{k}{class}\DUrole{w}{ }}}\sphinxcode{\sphinxupquote{bansuri.base.task\_base.}}\sphinxbfcode{\sphinxupquote{AbstractTask}}}
{\sphinxparam{\DUrole{n}{config}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{TaskConfig}}}
{}
\pysigstopsignatures
\sphinxAtStartPar
Bases: \sphinxcode{\sphinxupquote{ABC}}

\sphinxAtStartPar
Abstract base class for tasks.
Uses a modular TaskConfig for properties and as execution interface.
\index{run() (bansuri.base.task\_base.AbstractTask method)@\spxentry{run()}\spxextra{bansuri.base.task\_base.AbstractTask method}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:bansuri.base.task_base.AbstractTask.run}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxbfcode{\sphinxupquote{\DUrole{k}{abstractmethod}\DUrole{w}{ }}}\sphinxbfcode{\sphinxupquote{run}}}
{}
{{ $\rightarrow$ int}}
\pysigstopsignatures
\sphinxAtStartPar
Execute the task.
:returns: The exit code of the command.
:rtype: int

\end{fulllineitems}

\index{stop() (bansuri.base.task\_base.AbstractTask method)@\spxentry{stop()}\spxextra{bansuri.base.task\_base.AbstractTask method}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:bansuri.base.task_base.AbstractTask.stop}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxbfcode{\sphinxupquote{\DUrole{k}{abstractmethod}\DUrole{w}{ }}}\sphinxbfcode{\sphinxupquote{stop}}}
{}
{{ $\rightarrow$ None}}
\pysigstopsignatures
\sphinxAtStartPar
Terminate the task if it is running.

\end{fulllineitems}


\end{fulllineitems}



\subsection{Notification System}
\label{\detokenize{api:notification-system}}\index{Notifier (class in bansuri.alerts.notifier)@\spxentry{Notifier}\spxextra{class in bansuri.alerts.notifier}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:bansuri.alerts.notifier.Notifier}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{\DUrole{k}{class}\DUrole{w}{ }}}\sphinxcode{\sphinxupquote{bansuri.alerts.notifier.}}\sphinxbfcode{\sphinxupquote{Notifier}}}
\pysigstopsignatures
\sphinxAtStartPar
Bases: \sphinxcode{\sphinxupquote{ABC}}

\sphinxAtStartPar
Base class for notification handlers.
\index{notify() (bansuri.alerts.notifier.Notifier method)@\spxentry{notify()}\spxextra{bansuri.alerts.notifier.Notifier method}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:bansuri.alerts.notifier.Notifier.notify}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxbfcode{\sphinxupquote{\DUrole{k}{abstractmethod}\DUrole{w}{ }}}\sphinxbfcode{\sphinxupquote{notify}}}
{\sphinxparam{\DUrole{n}{failure\_info}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{{\hyperref[\detokenize{notifications:bansuri.alerts.notifier.FailureInfo}]{\sphinxcrossref{FailureInfo}}}}}}
{{ $\rightarrow$ bool}}
\pysigstopsignatures
\sphinxAtStartPar
Abstract method that handles on failure notifications

\end{fulllineitems}


\end{fulllineitems}

\index{CommandNotifier (class in bansuri.alerts.cmd\_notifier)@\spxentry{CommandNotifier}\spxextra{class in bansuri.alerts.cmd\_notifier}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:bansuri.alerts.cmd_notifier.CommandNotifier}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxbfcode{\sphinxupquote{\DUrole{k}{class}\DUrole{w}{ }}}\sphinxcode{\sphinxupquote{bansuri.alerts.cmd\_notifier.}}\sphinxbfcode{\sphinxupquote{CommandNotifier}}}
{\sphinxparam{\DUrole{n}{notify\_command}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{str}}\sphinxparamcomma \sphinxparam{\DUrole{n}{timeout}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{int}\DUrole{w}{ }\DUrole{o}{=}\DUrole{w}{ }\DUrole{default_value}{30}}}
{}
\pysigstopsignatures
\sphinxAtStartPar
Bases: {\hyperref[\detokenize{notifications:bansuri.alerts.notifier.Notifier}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{Notifier}}}}}

\sphinxAtStartPar
Notify via shell command execution.
\index{notify() (bansuri.alerts.cmd\_notifier.CommandNotifier method)@\spxentry{notify()}\spxextra{bansuri.alerts.cmd\_notifier.CommandNotifier method}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:bansuri.alerts.cmd_notifier.CommandNotifier.notify}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxbfcode{\sphinxupquote{notify}}}
{\sphinxparam{\DUrole{n}{failure\_info}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{{\hyperref[\detokenize{notifications:bansuri.alerts.notifier.FailureInfo}]{\sphinxcrossref{FailureInfo}}}}}}
{{ $\rightarrow$ bool}}
\pysigstopsignatures
\sphinxAtStartPar
Abstract method that handles on failure notifications

\end{fulllineitems}


\end{fulllineitems}


\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
Check \DUrole{xref}{\DUrole{std}{\DUrole{std-doc}{NOT\_IMPLEMENTED.md}}} for feature status and workarounds.
\end{sphinxadmonition}


\chapter{Indices and tables}
\label{\detokenize{index:indices-and-tables}}\begin{itemize}
\item {} 
\sphinxAtStartPar
\DUrole{xref}{\DUrole{std}{\DUrole{std-ref}{genindex}}}

\item {} 
\sphinxAtStartPar
\DUrole{xref}{\DUrole{std}{\DUrole{std-ref}{modindex}}}

\item {} 
\sphinxAtStartPar
\DUrole{xref}{\DUrole{std}{\DUrole{std-ref}{search}}}

\end{itemize}



\renewcommand{\indexname}{Index}
\printindex
\end{document}