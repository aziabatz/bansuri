

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Concepts and Terminology &mdash; Bansuri 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=9edc463e" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=f2a433a1"></script>
      <script src="_static/doctools.js?v=fd6eb6e6"></script>
      <script src="_static/sphinx_highlight.js?v=6ffebe34"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="System Architecture" href="architecture.html" />
    <link rel="prev" title="Usage" href="usage.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Bansuri
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Understanding Bansuri</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Concepts and Terminology</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#core-concepts">Core Concepts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#task">Task</a></li>
<li class="toctree-l3"><a class="reference internal" href="#orchestrator">Orchestrator</a></li>
<li class="toctree-l3"><a class="reference internal" href="#taskrunner">TaskRunner</a></li>
<li class="toctree-l3"><a class="reference internal" href="#execution-models">Execution Models</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#configuration-hierarchy">Configuration Hierarchy</a></li>
<li class="toctree-l2"><a class="reference internal" href="#task-lifecycle">Task Lifecycle</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#state-transitions">State Transitions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#failure-policies">Failure Policies</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#timeout-behavior">Timeout Behavior</a></li>
<li class="toctree-l3"><a class="reference internal" href="#success-codes">Success Codes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#output-management">Output Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="#resource-management">Resource Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="#notification-system">Notification System</a></li>
<li class="toctree-l2"><a class="reference internal" href="#abstract-tasks">Abstract Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configuration-management">Configuration Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="#performance-concepts">Performance Concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="#observability-concepts">Observability Concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="#security-concepts">Security Concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="#high-availability-concepts">High Availability Concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="#scaling-concepts">Scaling Concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="#related-concepts">Related Concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="#terminology-reference">Terminology Reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">System Architecture</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced-config.html">Advanced Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">Reference</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Features</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="notifications.html">Notifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom-tasks.html">Creating Custom Tasks</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Deployment &amp; Operations</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="deployment.html">Deployment Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting-detailed.html">Troubleshooting Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Project Info</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing to Bansuri</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Bansuri</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Concepts and Terminology</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/concepts.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="concepts-and-terminology">
<h1>Concepts and Terminology<a class="headerlink" href="#concepts-and-terminology" title="Link to this heading"></a></h1>
<p>Understanding key concepts in Bansuri.</p>
<section id="core-concepts">
<h2>Core Concepts<a class="headerlink" href="#core-concepts" title="Link to this heading"></a></h2>
<section id="task">
<h3>Task<a class="headerlink" href="#task" title="Link to this heading"></a></h3>
<p>A <strong>task</strong> is a single unit of work to be executed by Bansuri. Tasks can be:</p>
<ul class="simple">
<li><p><strong>Shell commands</strong>: Simple bash/shell scripts</p></li>
<li><p><strong>Python scripts</strong>: Python files or modules</p></li>
<li><p><strong>Custom implementations</strong>: Classes inheriting from <code class="docutils literal notranslate"><span class="pre">AbstractTask</span></code></p></li>
</ul>
<p>Each task has:</p>
<ul class="simple">
<li><p>Unique identifier (name)</p></li>
<li><p>Command to execute</p></li>
<li><p>Configuration for execution behavior</p></li>
<li><p>Optional timeout and retry policies</p></li>
</ul>
<p>Example task:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;backup-database&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;command&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;pg_dump production | gzip&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;timer&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;86400&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;timeout&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2h&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="orchestrator">
<h3>Orchestrator<a class="headerlink" href="#orchestrator" title="Link to this heading"></a></h3>
<p>The <strong>Orchestrator</strong> is the central coordinator of Bansuri. It:</p>
<ul class="simple">
<li><p>Reads and parses configuration</p></li>
<li><p>Spawns <code class="docutils literal notranslate"><span class="pre">TaskRunner</span></code> instances for each task</p></li>
<li><p>Monitors task health and restarts</p></li>
<li><p>Coordinates task lifecycle</p></li>
<li><p>Synchronizes configuration changes</p></li>
</ul>
<p>The Orchestrator runs continuously and manages all tasks in a single process.</p>
</section>
<section id="taskrunner">
<h3>TaskRunner<a class="headerlink" href="#taskrunner" title="Link to this heading"></a></h3>
<p>A <strong>TaskRunner</strong> is responsible for managing the execution of a single task. Each task gets its own <code class="docutils literal notranslate"><span class="pre">TaskRunner</span></code> instance that:</p>
<ul class="simple">
<li><p>Runs in a dedicated thread</p></li>
<li><p>Spawns and manages the task process</p></li>
<li><p>Handles timeouts</p></li>
<li><p>Captures output</p></li>
<li><p>Implements retry policies</p></li>
<li><p>Sends notifications on failure</p></li>
</ul>
</section>
<section id="execution-models">
<h3>Execution Models<a class="headerlink" href="#execution-models" title="Link to this heading"></a></h3>
<p>Bansuri supports different execution models:</p>
<p><strong>One-shot Execution</strong></p>
<p>Task runs once:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;setup&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;command&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;init.sh&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Timer-based Execution</strong></p>
<p>Task runs at fixed intervals:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;monitor&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;command&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;check.sh&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;timer&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;300&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Cron-based Execution (NOT IMPLEMENTED)</strong></p>
<p>Task runs on cron schedule:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;nightly-job&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;command&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;backup.sh&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;schedule-cron&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0 2 * * *&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="configuration-hierarchy">
<h2>Configuration Hierarchy<a class="headerlink" href="#configuration-hierarchy" title="Link to this heading"></a></h2>
<p><strong>Global Configuration</strong> (scripts.json root level)</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;notify_command&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;mail ...&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Per-task Configuration</strong> (scripts[].* level)</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;task-name&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;command&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;...&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;timer&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;300&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;timeout&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;30s&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;on-fail&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;restart&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="err">...</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="task-lifecycle">
<h2>Task Lifecycle<a class="headerlink" href="#task-lifecycle" title="Link to this heading"></a></h2>
<p>A task progresses through these states:</p>
<ol class="arabic simple">
<li><p><strong>PENDING</strong>: Registered in config, waiting to run</p></li>
<li><p><strong>RUNNING</strong>: Process spawned with active PID</p></li>
<li><p><strong>SUCCESS</strong>: Completed with success code (default: 0)</p></li>
<li><p><strong>FAILED</strong>: Exited with non-zero code</p></li>
<li><p><strong>TIMEOUT</strong>: Killed due to exceeding timeout</p></li>
<li><p><strong>RESTARTING</strong>: Retrying after failure (if on-fail=restart)</p></li>
<li><p><strong>STOPPED</strong>: Removed from config or shutdown</p></li>
</ol>
<section id="state-transitions">
<h3>State Transitions<a class="headerlink" href="#state-transitions" title="Link to this heading"></a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>PENDING
  ↓
RUNNING → SUCCESS (end)
  ↓
FAILED
  ↓
on-fail=stop? → STOPPED (end)
      │
      ↓ on-fail=restart?
RESTARTING
  ↓
(back to RUNNING)
</pre></div>
</div>
</section>
</section>
<section id="failure-policies">
<h2>Failure Policies<a class="headerlink" href="#failure-policies" title="Link to this heading"></a></h2>
<p><strong>on-fail: “stop”</strong> (default)</p>
<p>Task stops immediately on failure:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>RUNNING → FAILED → STOPPED
</pre></div>
</div>
<p><strong>on-fail: “restart”</strong></p>
<p>Task restarts up to <code class="docutils literal notranslate"><span class="pre">times</span></code> attempts:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>RUNNING → FAILED → RESTARTING → RUNNING → FAILED → ... (up to &#39;times&#39;)

If max attempts reached:
FAILED → STOPPED
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;on-fail&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;restart&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;times&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span>
<span class="p">}</span>
</pre></div>
</div>
<section id="timeout-behavior">
<h3>Timeout Behavior<a class="headerlink" href="#timeout-behavior" title="Link to this heading"></a></h3>
<p>When timeout is exceeded:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>RUNNING → (timeout reached) → FAILED → (apply on-fail policy)
</pre></div>
</div>
<p>The process is forcefully terminated with SIGKILL.</p>
</section>
<section id="success-codes">
<h3>Success Codes<a class="headerlink" href="#success-codes" title="Link to this heading"></a></h3>
<p>By default, only exit code <code class="docutils literal notranslate"><span class="pre">0</span></code> is considered success. You can define custom success codes:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;success-codes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">137</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Exit codes not in this list are considered failures.</p>
</section>
</section>
<section id="output-management">
<h2>Output Management<a class="headerlink" href="#output-management" title="Link to this heading"></a></h2>
<p>Bansuri redirects task output according to configuration:</p>
<p><strong>No redirection</strong></p>
<p>Output goes to console (Bansuri’s stdout/stderr):</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{}</span>
</pre></div>
</div>
<p><a href="#id1"><span class="problematic" id="id2">``</span></a><a href="#id3"><span class="problematic" id="id4">`</span></a></p>
<p><strong>File redirection</strong></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;stdout&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/var/log/task.log&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;stderr&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;combined&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Separate files</strong></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;stdout&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/var/log/task.out&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;stderr&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/var/log/task.err&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Combined output</strong></p>
<p>Both stdout and stderr go to the same file:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;stderr&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;combined&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="resource-management">
<h2>Resource Management<a class="headerlink" href="#resource-management" title="Link to this heading"></a></h2>
<p><strong>Working Directory</strong></p>
<p>Tasks execute in the specified directory. Affects:</p>
<ul class="simple">
<li><p>Relative paths in commands</p></li>
<li><p>File operations</p></li>
<li><p>Working directory of child processes</p></li>
</ul>
<p><strong>Timeout</strong></p>
<p>Maximum time a task can run. Process killed if exceeded.</p>
<p>Units:
- Seconds: <code class="docutils literal notranslate"><span class="pre">&quot;30&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">30</span></code>
- Seconds suffix: <code class="docutils literal notranslate"><span class="pre">&quot;30s&quot;</span></code>
- Minutes: <code class="docutils literal notranslate"><span class="pre">&quot;5m&quot;</span></code> = 300 seconds
- Hours: <code class="docutils literal notranslate"><span class="pre">&quot;2h&quot;</span></code> = 7200 seconds</p>
<p><strong>Process Groups</strong></p>
<p>Each task runs in its own process group. Allows:</p>
<ul class="simple">
<li><p>Killing task and all children</p></li>
<li><p>Resource isolation</p></li>
<li><p>Clean shutdown</p></li>
</ul>
</section>
<section id="notification-system">
<h2>Notification System<a class="headerlink" href="#notification-system" title="Link to this heading"></a></h2>
<p>Triggered on task failure when <code class="docutils literal notranslate"><span class="pre">notify:</span> <span class="pre">&quot;mail&quot;</span></code> is set.</p>
<p>Components:</p>
<ul class="simple">
<li><p><strong>FailureInfo</strong>: Data structure with failure details</p></li>
<li><p><strong>Notifier</strong>: Abstract base class for notification handlers</p></li>
<li><p><strong>CommandNotifier</strong>: Sends notification via shell command</p></li>
</ul>
<p>Failure notification includes:</p>
<ul class="simple">
<li><p>Task name and command</p></li>
<li><p>Return code and exit details</p></li>
<li><p>Attempt number</p></li>
<li><p>Timestamp</p></li>
<li><p>Stdout/stderr output</p></li>
<li><p>Task description</p></li>
</ul>
<p>See <a class="reference internal" href="notifications.html"><span class="doc">Notifications</span></a> for details.</p>
</section>
<section id="abstract-tasks">
<h2>Abstract Tasks<a class="headerlink" href="#abstract-tasks" title="Link to this heading"></a></h2>
<p>Custom task implementations implement the <code class="docutils literal notranslate"><span class="pre">AbstractTask</span></code> interface:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">AbstractTask</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Execute task, return exit code&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Stop task if running&quot;&quot;&quot;</span>
        <span class="k">pass</span>
</pre></div>
</div>
<p>Benefits:</p>
<ul class="simple">
<li><p>Complex business logic</p></li>
<li><p>Native Python integration</p></li>
<li><p>Stateful operations</p></li>
<li><p>Resource cleanup</p></li>
</ul>
<p>See <a class="reference internal" href="custom-tasks.html"><span class="doc">Creating Custom Tasks</span></a> for examples.</p>
</section>
<section id="configuration-management">
<h2>Configuration Management<a class="headerlink" href="#configuration-management" title="Link to this heading"></a></h2>
<p><strong>Loading</strong></p>
<p>Configuration loaded from <code class="docutils literal notranslate"><span class="pre">scripts.json</span></code> when Bansuri starts:</p>
<ol class="arabic simple">
<li><p>Parse JSON file</p></li>
<li><p>Validate schema</p></li>
<li><p>Create <code class="docutils literal notranslate"><span class="pre">BansuriConfig</span></code> object</p></li>
<li><p>Spawn <code class="docutils literal notranslate"><span class="pre">TaskRunner</span></code> for each script</p></li>
</ol>
<p><strong>Validation</strong></p>
<p>Each script is validated for:</p>
<ul class="simple">
<li><p>Required fields (name, command)</p></li>
<li><p>Valid field types</p></li>
<li><p>Sensible values</p></li>
<li><p>Scheduling requirements</p></li>
</ul>
<p><strong>Synchronization</strong></p>
<p>Bansuri periodically syncs config changes:</p>
<ol class="arabic simple">
<li><p>Detect added tasks → spawn <code class="docutils literal notranslate"><span class="pre">TaskRunner</span></code></p></li>
<li><p>Detect removed tasks → stop and remove <code class="docutils literal notranslate"><span class="pre">TaskRunner</span></code></p></li>
<li><p>Detect modified tasks → restart <code class="docutils literal notranslate"><span class="pre">TaskRunner</span></code></p></li>
</ol>
</section>
<section id="performance-concepts">
<h2>Performance Concepts<a class="headerlink" href="#performance-concepts" title="Link to this heading"></a></h2>
<p><strong>Concurrency</strong></p>
<p>Each task runs in its own thread. Multiple tasks execute concurrently.</p>
<p><strong>I/O-bound tasks</strong> (network, disk):
- Can run many concurrently
- Limited by system I/O, not CPU</p>
<p><strong>CPU-bound tasks</strong> (computation):
- Limited by CPU cores
- Too many concurrent = resource contention</p>
<p><strong>Resource Limits</strong></p>
<p>Monitor and limit:</p>
<ul class="simple">
<li><p>Memory: Each process and total system</p></li>
<li><p>CPU: Per-process or total</p></li>
<li><p>File descriptors</p></li>
<li><p>Disk I/O</p></li>
</ul>
</section>
<section id="observability-concepts">
<h2>Observability Concepts<a class="headerlink" href="#observability-concepts" title="Link to this heading"></a></h2>
<p><strong>Logging</strong></p>
<p>Structured logging from:</p>
<ul class="simple">
<li><p>Orchestrator: Task lifecycle events</p></li>
<li><p>TaskRunner: Execution events</p></li>
<li><p>Tasks: Custom logs</p></li>
</ul>
<p><strong>Monitoring</strong></p>
<p>Observable metrics:</p>
<ul class="simple">
<li><p>Task execution count</p></li>
<li><p>Success/failure rates</p></li>
<li><p>Execution time</p></li>
<li><p>Resource usage</p></li>
<li><p>Timeout occurrences</p></li>
</ul>
<p><strong>Alerting</strong></p>
<p>Based on:</p>
<ul class="simple">
<li><p>Task failures</p></li>
<li><p>Notification triggers</p></li>
<li><p>System resource issues</p></li>
<li><p>Configuration changes</p></li>
</ul>
</section>
<section id="security-concepts">
<h2>Security Concepts<a class="headerlink" href="#security-concepts" title="Link to this heading"></a></h2>
<p><strong>Process Isolation</strong></p>
<p>Each task runs in separate process with:</p>
<ul class="simple">
<li><p>Independent memory space</p></li>
<li><p>Own file descriptors</p></li>
<li><p>Own process group</p></li>
</ul>
<p><strong>User Context</strong></p>
<p>(NOT IMPLEMENTED) Tasks can run as specific users with:</p>
<ul class="simple">
<li><p>Reduced privileges</p></li>
<li><p>Different permissions</p></li>
<li><p>Isolated home directories</p></li>
</ul>
<p><strong>Working Directory</strong></p>
<p>Controls where tasks execute and what files they access.</p>
<p><strong>Permissions</strong></p>
<ul class="simple">
<li><p>Script execute permissions</p></li>
<li><p>Log directory write permissions</p></li>
<li><p>Output file creation permissions</p></li>
</ul>
</section>
<section id="high-availability-concepts">
<h2>High Availability Concepts<a class="headerlink" href="#high-availability-concepts" title="Link to this heading"></a></h2>
<p><strong>Restart Policies</strong></p>
<p>Automatic recovery from failures:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">on-fail:</span> <span class="pre">&quot;restart&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">times:</span> <span class="pre">N</span></code> attempts</p></li>
<li><p>Configurable retry behavior</p></li>
</ul>
<p><strong>Health Checks</strong></p>
<p>Monitor task execution:</p>
<ul class="simple">
<li><p>Track exit codes</p></li>
<li><p>Detect hangs</p></li>
<li><p>Measure latency</p></li>
</ul>
<p><strong>Graceful Shutdown</strong></p>
<p>Clean termination:</p>
<ol class="arabic simple">
<li><p>Send SIGTERM to tasks</p></li>
<li><p>Wait for graceful shutdown</p></li>
<li><p>Force SIGKILL if needed</p></li>
<li><p>Flush logs and state</p></li>
</ol>
</section>
<section id="scaling-concepts">
<h2>Scaling Concepts<a class="headerlink" href="#scaling-concepts" title="Link to this heading"></a></h2>
<p><strong>Single Instance</strong></p>
<p>Suitable for:</p>
<ul class="simple">
<li><p>&lt; 100 tasks</p></li>
<li><p>&lt; 1000 executions/minute</p></li>
<li><p>Single machine</p></li>
<li><p>Non-critical workloads</p></li>
</ul>
<p><strong>Multiple Instances</strong></p>
<p>For larger deployments:</p>
<ul class="simple">
<li><p>Partition tasks across instances</p></li>
<li><p>Share configuration via version control</p></li>
<li><p>Centralize logging</p></li>
<li><p>Coordinate via monitoring</p></li>
</ul>
<p><strong>Containerized Deployment</strong></p>
<p>Run in:</p>
<ul class="simple">
<li><p>Docker containers</p></li>
<li><p>Kubernetes pods</p></li>
<li><p>Cloud container services</p></li>
</ul>
<p>Benefits:</p>
<ul class="simple">
<li><p>Reproducible environment</p></li>
<li><p>Easy scaling</p></li>
<li><p>Simplified deployment</p></li>
<li><p>Resource limits</p></li>
</ul>
</section>
<section id="related-concepts">
<h2>Related Concepts<a class="headerlink" href="#related-concepts" title="Link to this heading"></a></h2>
<p><strong>Cron</strong> (traditional Linux scheduling)</p>
<p>Similar to Bansuri’s timer-based execution but:</p>
<ul class="simple">
<li><p>System-level scheduler</p></li>
<li><p>Separate from process lifecycle</p></li>
<li><p>Limited monitoring</p></li>
</ul>
<p>Bansuri advantages:</p>
<ul class="simple">
<li><p>Process-level control</p></li>
<li><p>In-memory state</p></li>
<li><p>Unified logging</p></li>
<li><p>Flexible retry logic</p></li>
</ul>
<p><strong>Process Managers</strong> (supervisord, systemd)</p>
<p>Similar in goal but different scope:</p>
<ul class="simple">
<li><p>Process managers: Keep services running</p></li>
<li><p>Bansuri: Orchestrate task execution</p></li>
</ul>
<p>Bansuri can run under process managers for higher availability.</p>
</section>
<section id="terminology-reference">
<h2>Terminology Reference<a class="headerlink" href="#terminology-reference" title="Link to this heading"></a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Term</p></th>
<th class="head"><p>Definition</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Orchestrator</p></td>
<td><p>Central coordinator managing all tasks</p></td>
</tr>
<tr class="row-odd"><td><p>TaskRunner</p></td>
<td><p>Thread-based executor for a single task</p></td>
</tr>
<tr class="row-even"><td><p>Task</p></td>
<td><p>Unit of work to be executed</p></td>
</tr>
<tr class="row-odd"><td><p>Script</p></td>
<td><p>Configuration entry for a task</p></td>
</tr>
<tr class="row-even"><td><p>Configuration</p></td>
<td><p>JSON file defining tasks and behavior</p></td>
</tr>
<tr class="row-odd"><td><p>Exit Code</p></td>
<td><p>Process return value (0=success, non-zero=failure)</p></td>
</tr>
<tr class="row-even"><td><p>Timeout</p></td>
<td><p>Maximum execution time for a task</p></td>
</tr>
<tr class="row-odd"><td><p>Failure Policy</p></td>
<td><p>What to do when task fails (stop or restart)</p></td>
</tr>
<tr class="row-even"><td><p>Notification</p></td>
<td><p>Alert sent when task fails</p></td>
</tr>
<tr class="row-odd"><td><p>FailureInfo</p></td>
<td><p>Data structure with task failure details</p></td>
</tr>
<tr class="row-even"><td><p>Process Group</p></td>
<td><p>Group of processes from same task</p></td>
</tr>
<tr class="row-odd"><td><p>Working Directory</p></td>
<td><p>Directory where task executes</p></td>
</tr>
<tr class="row-even"><td><p>Success Codes</p></td>
<td><p>Exit codes considered successful</p></td>
</tr>
</tbody>
</table>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="usage.html" class="btn btn-neutral float-left" title="Usage" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="architecture.html" class="btn btn-neutral float-right" title="System Architecture" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2026, Bansuri Contributors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>